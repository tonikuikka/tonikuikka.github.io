import{g as wi,c as $a,a as ja}from"./_commonjsHelpers.de833af9.js";var Ye=63710088e-1,bf={centimeters:Ye*100,centimetres:Ye*100,degrees:Ye/111325,feet:Ye*3.28084,inches:Ye*39.37,kilometers:Ye/1e3,kilometres:Ye/1e3,meters:Ye,metres:Ye,miles:Ye/1609.344,millimeters:Ye*1e3,millimetres:Ye*1e3,nauticalmiles:Ye/1852,radians:1,yards:Ye*1.0936},_v={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ye,yards:1.0936133},$u={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function qe(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Ev(e,t,r){switch(e){case"Point":return pt(t).geometry;case"LineString":return $t(t).geometry;case"Polygon":return dt(t).geometry;case"MultiPoint":return tu(t).geometry;case"MultiLineString":return ho(t).geometry;case"MultiPolygon":return Qr(t).geometry;default:throw new Error(e+" is invalid")}}function pt(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!We(e[0])||!We(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return qe(n,t,r)}function xv(e,t,r){return r===void 0&&(r={}),nt(e.map(function(n){return pt(n,t)}),r)}function dt(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return qe(a,t,r)}function wv(e,t,r){return r===void 0&&(r={}),nt(e.map(function(n){return dt(n,t)}),r)}function $t(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return qe(n,t,r)}function Iv(e,t,r){return r===void 0&&(r={}),nt(e.map(function(n){return $t(n,t)}),r)}function nt(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function ho(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return qe(n,t,r)}function tu(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return qe(n,t,r)}function Qr(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return qe(n,t,r)}function Vh(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return qe(n,t,r)}function Cv(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function eu(e,t){t===void 0&&(t="kilometers");var r=bf[t];if(!r)throw new Error(t+" units is invalid");return e*r}function ra(e,t){t===void 0&&(t="kilometers");var r=bf[t];if(!r)throw new Error(t+" units is invalid");return e/r}function Hh(e,t){return Do(ra(e,t))}function Os(e){var t=e%360;return t<0&&(t+=360),t}function Do(e){var t=e%(2*Math.PI);return t*180/Math.PI}function tr(e){var t=e%360;return t*Math.PI/180}function na(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return eu(ra(e,t),r)}function Sv(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=$u[t];if(!n)throw new Error("invalid original units");var i=$u[r];if(!i)throw new Error("invalid final units");return e/n*i}function We(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function re(e){return!!e&&e.constructor===Object}function Nv(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!We(t))throw new Error("bbox must only contain numbers")})}function Pv(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Mv=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:$u,bearingToAzimuth:Os,convertArea:Sv,convertLength:na,degreesToRadians:tr,earthRadius:Ye,factors:bf,feature:qe,featureCollection:nt,geometry:Ev,geometryCollection:Vh,isNumber:We,isObject:re,lengthToDegrees:Hh,lengthToRadians:ra,lineString:$t,lineStrings:Iv,multiLineString:ho,multiPoint:tu,multiPolygon:Qr,point:pt,points:xv,polygon:dt,polygons:wv,radiansToDegrees:Do,radiansToLength:eu,round:Cv,unitsFactors:_v,validateBBox:Nv,validateId:Pv},Symbol.toStringTag,{value:"Module"}));function Le(e,t,r){if(e!==null)for(var n,i,o,s,a,u,f,l=0,c=0,h,p=e.type,d=p==="FeatureCollection",m=p==="Feature",x=d?e.features.length:1,_=0;_<x;_++){f=d?e.features[_].geometry:m?e.geometry:e,h=f?f.type==="GeometryCollection":!1,a=h?f.geometries.length:1;for(var g=0;g<a;g++){var v=0,y=0;if(s=h?f.geometries[g]:f,s!==null){u=s.coordinates;var E=s.type;switch(l=r&&(E==="Polygon"||E==="MultiPolygon")?1:0,E){case null:break;case"Point":if(t(u,c,_,v,y)===!1)return!1;c++,v++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],c,_,v,y)===!1)return!1;c++,E==="MultiPoint"&&v++}E==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-l;i++){if(t(u[n][i],c,_,v,y)===!1)return!1;c++}E==="MultiLineString"&&v++,E==="Polygon"&&y++}E==="Polygon"&&v++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(y=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-l;o++){if(t(u[n][i][o],c,_,v,y)===!1)return!1;c++}y++}v++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(Le(s.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Wh(e,t,r,n){var i=r;return Le(e,function(o,s,a,u,f){s===0&&r===void 0?i=o:i=t(i,o,s,a,u,f)},n),i}function Jh(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function Lv(e,t,r){var n=r;return Jh(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function Qt(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Kh(e,t,r){var n=r;return Qt(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function bs(e){var t=[];return Le(e,function(r){t.push(r)}),t}function Zr(e,t){var r,n,i,o,s,a,u,f,l,c,h=0,p=e.type==="FeatureCollection",d=e.type==="Feature",m=p?e.features.length:1;for(r=0;r<m;r++){for(a=p?e.features[r].geometry:d?e.geometry:e,f=p?e.features[r].properties:d?e.properties:{},l=p?e.features[r].bbox:d?e.bbox:void 0,c=p?e.features[r].id:d?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,h,f,l,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,h,f,l,c)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],h,f,l,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function Qh(e,t,r){var n=r;return Zr(e,function(i,o,s,a,u){o===0&&r===void 0?n=i:n=t(n,i,o,s,a,u)}),n}function or(e,t){Zr(e,function(r,n,i,o,s){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(qe(r,i,{bbox:o,id:s}),n,0)===!1?!1:void 0}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var l=r.coordinates[f],c={type:u,coordinates:l};if(t(qe(c,i),n,f)===!1)return!1}})}function Ov(e,t,r){var n=r;return or(e,function(i,o,s){o===0&&s===0&&r===void 0?n=i:n=t(n,i,o,s)}),n}function Pi(e,t){or(e,function(r,n,i){var o=0;if(r.geometry){var s=r.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,u=0,f=0,l=0;if(Le(r,function(c,h,p,d,m){if(a===void 0||n>u||d>f||m>l){a=c,u=n,f=d,l=m,o=0;return}var x=$t([a,c],r.properties);if(t(x,n,i,m,o)===!1)return!1;o++,a=c})===!1)return!1}}})}function Zh(e,t,r){var n=r,i=!1;return Pi(e,function(o,s,a,u,f){i===!1&&r===void 0?n=o:n=t(n,o,s,a,u,f),i=!0}),n}function $h(e,t){if(!e)throw new Error("geojson is required");or(e,function(r,n,i){if(r.geometry!==null){var o=r.geometry.type,s=r.geometry.coordinates;switch(o){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t($t(s[a],r.properties),n,i,a)===!1)return!1;break}}})}function jh(e,t,r){var n=r;return $h(e,function(i,o,s,a){o===0&&r===void 0?n=i:n=t(n,i,o,s,a)}),n}function bv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),$t([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),$t([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o-1),$t([u[n][o],u[n][o+1]],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o-1),$t([u[n][i][o],u[n][i][o+1]],s,t)}throw new Error("geojson is invalid")}function Rv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":return pt(u,s,t);case"MultiPoint":return n<0&&(n=u.length+n),pt(u[n],s,t);case"LineString":return o<0&&(o=u.length+o),pt(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),pt(u[i][o],s,t);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),pt(u[n][o],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o),pt(u[n][i][o],s,t)}throw new Error("geojson is invalid")}const Av=Object.freeze(Object.defineProperty({__proto__:null,coordAll:bs,coordEach:Le,coordReduce:Wh,featureEach:Qt,featureReduce:Kh,findPoint:Rv,findSegment:bv,flattenEach:or,flattenReduce:Ov,geomEach:Zr,geomReduce:Qh,lineEach:$h,lineReduce:jh,propEach:Jh,propReduce:Lv,segmentEach:Pi,segmentReduce:Zh},Symbol.toStringTag,{value:"Module"}));function Oe(e){var t=[1/0,1/0,-1/0,-1/0];return Le(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Oe.default=Oe;const Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));function se(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tp(e){if(e.length>1&&We(e[0])&&We(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return tp(e[0]);throw new Error("coordinates must only contain numbers")}function Tv(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)}function Aa(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)}function Xi(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}}function fe(e){return e.type==="Feature"?e.geometry:e}function Gr(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}const gw=Object.freeze(Object.defineProperty({__proto__:null,collectionOf:Xi,containsNumber:tp,featureOf:Aa,geojsonType:Tv,getCoord:se,getCoords:ot,getGeom:fe,getType:Gr},Symbol.toStringTag,{value:"Module"}));/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ll=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable;function Gv(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function kv(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var qv=kv()?Object.assign:function(e,t){for(var r,n=Gv(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)Fv.call(r,s)&&(n[s]=r[s]);if(Ll){i=Ll(r);for(var a=0;a<i.length;a++)Bv.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n};const Rf=wi(qv);/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var Ol={successCallback:null,verbose:!1},pa={};function zv(e,t,r){r=r||{};for(var n=Object.keys(Ol),i=0;i<n.length;i++){var o=n[i],s=r[o];s=typeof s<"u"&&s!==null?s:Ol[o],pa[o]=s}pa.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t);var a=Yv(Xv(e,t));return typeof pa.successCallback=="function"&&pa.successCallback(a),a}function jt(e,t,r){return(e-t)/(r-t)}function Xv(e,t){for(var r=e.length-1,n=e[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=e[o+1][s],f=e[o+1][s+1],l=e[o][s+1],c=e[o][s];if(!(isNaN(u)||isNaN(f)||isNaN(l)||isNaN(c))){a|=u>=t?8:0,a|=f>=t?4:0,a|=l>=t?2:0,a|=c>=t?1:0;var h=!1;if(a===5||a===10){var p=(u+f+l+c)/4;a===5&&p<t?(a=10,h=!0):a===10&&p<t&&(a=5,h=!0)}if(a!==0&&a!==15){var d,m,x,_;d=m=x=_=.5,a===1?(x=1-jt(t,u,c),m=1-jt(t,l,c)):a===2?(m=jt(t,c,l),_=1-jt(t,f,l)):a===3?(x=1-jt(t,u,c),_=1-jt(t,f,l)):a===4?(d=jt(t,u,f),_=jt(t,l,f)):a===5?(d=jt(t,u,f),_=jt(t,l,f),m=1-jt(t,l,c),x=1-jt(t,u,c)):a===6?(m=jt(t,c,l),d=jt(t,u,f)):a===7?(x=1-jt(t,u,c),d=jt(t,u,f)):a===8?(x=jt(t,c,u),d=1-jt(t,f,u)):a===9?(m=1-jt(t,l,c),d=1-jt(t,f,u)):a===10?(d=1-jt(t,f,u),_=1-jt(t,f,l),m=jt(t,c,l),x=jt(t,c,u)):a===11?(d=1-jt(t,f,u),_=1-jt(t,f,l)):a===12?(x=jt(t,c,u),_=jt(t,l,f)):a===13?(m=1-jt(t,l,c),_=jt(t,l,f)):a===14?(x=jt(t,c,u),m=jt(t,c,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:h,top:d,right:_,bottom:m,left:x}}}}}return i}function Uv(e){return e.cval===5||e.cval===10}function ep(e){return e.cval===0||e.cval===15}function bl(e){!ep(e)&&e.cval!==5&&e.cval!==10&&(e.cval=15)}function Nu(e,t){if(t==="top")return[e.top,1];if(t==="bottom")return[e.bottom,0];if(t==="right")return[1,e.right];if(t==="left")return[0,e.left]}function Yv(e){var t=[],r=0,n=1e-7;return e.cells.forEach(function(i,o){i.forEach(function(s,a){if(typeof s<"u"&&!Uv(s)&&!ep(s)){var u=Vv(e.cells,o,a),f=!1;if(u.info==="mergeable"){for(var l=u.path[u.path.length-1][0],c=u.path[u.path.length-1][1],h=r-1;h>=0;h--)if(Math.abs(t[h][0][0]-l)<=n&&Math.abs(t[h][0][1]-c)<=n){for(var p=u.path.length-2;p>=0;--p)t[h].unshift(u.path[p]);f=!0;break}}f||(t[r++]=u.path)}})}),t}function Vv(e,t,r){var n=e.length,i=[],o=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],s=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],a,u,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],p,c=e[t][r],h=c.cval,p=f[h],d=Nu(c,p);i.push([r+d[0],t+d[1]]),p=l[h],d=Nu(c,p),i.push([r+d[0],t+d[1]]),bl(c);for(var m=r+o[h],x=t+s[h],_=h;m>=0&&x>=0&&x<n&&(m!=r||x!=t)&&(c=e[x][m],!(typeof c>"u"));){if(h=c.cval,h===0||h===15)return{path:i,info:"mergeable"};p=l[h],a=o[h],u=s[h],(h===5||h===10)&&(h===5?c.flipped?s[_]===-1?(p="left",a=-1,u=0):(p="right",a=1,u=0):o[_]===-1&&(p="bottom",a=0,u=-1):h===10&&(c.flipped?o[_]===-1?(p="top",a=0,u=1):(p="bottom",a=0,u=-1):s[_]===1&&(p="left",a=-1,u=0))),d=Nu(c,p),i.push([m+d[0],x+d[1]]),bl(c),m+=a,x+=u,_=h}return{path:i,info:"closed"}}function Hv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Xi(e,"Point","input must contain Points");for(var o=Wv(e,n),s=[],a=0;a<o.length;a++){for(var u=o[a],f=[],l=0;l<u.length;l++){var c=u[l];c.properties[r]?f.push(c.properties[r]):f.push(0),i===!0&&(c.properties.matrixPosition=[a,l])}s.push(f)}return s}function Wv(e,t){var r={};Qt(e,function(o){var s=ot(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(u,f){return ot(u)[0]-ot(f)[0]});return a}),i=n.sort(function(o,s){return t?ot(o[0])[1]-ot(s[0])[1]:ot(s[0])[1]-ot(o[0])[1]});return i}function vw(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Xi(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!re(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=Hv(e,{zProperty:n,flip:!0}),a=Jv(s,t,n,i,o),u=Kv(a,s,e);return nt(u)}function Jv(e,t,r,n,i){for(var o=[],s=1;s<t.length;s++){var a=+t[s],u=Rf({},n,i[s]);u[r]=a;var f=ho(zv(e,a),u);o.push(f)}return o}function Kv(e,t,r){var n=Oe(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=t[0].length-1,f=t.length-1,l=i/u,c=o/f,h=function(p){p[0]=p[0]*l+s,p[1]=p[1]*c+a};return e.forEach(function(p){Le(p,h)}),e}var Af={exports:{}},rp={exports:{}};(function(e,t){(function(r,n){e.exports=n()})($a,function(){function r(g,v,y,E,S){(function C(N,I,b,M,A){for(;M>b;){if(M-b>600){var D=M-b+1,R=I-b+1,k=Math.log(D),F=.5*Math.exp(2*k/3),J=.5*Math.sqrt(k*F*(D-F)/D)*(R-D/2<0?-1:1),H=Math.max(b,Math.floor(I-R*F/D+J)),Q=Math.min(M,Math.floor(I+(D-R)*F/D+J));C(N,I,H,Q,A)}var q=N[I],V=b,U=M;for(n(N,b,I),A(N[M],q)>0&&n(N,b,M);V<U;){for(n(N,V,U),V++,U--;A(N[V],q)<0;)V++;for(;A(N[U],q)>0;)U--}A(N[b],q)===0?n(N,b,U):n(N,++U,M),U<=I&&(b=U+1),I<=U&&(M=U-1)}})(g,v,y||0,E||g.length-1,S||i)}function n(g,v,y){var E=g[v];g[v]=g[y],g[y]=E}function i(g,v){return g<v?-1:g>v?1:0}var o=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(g,v,y){if(!y)return v.indexOf(g);for(var E=0;E<v.length;E++)if(y(g,v[E]))return E;return-1}function a(g,v){u(g,0,g.children.length,v,g)}function u(g,v,y,E,S){S||(S=x(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var C=v;C<y;C++){var N=g.children[C];f(S,g.leaf?E(N):N)}return S}function f(g,v){return g.minX=Math.min(g.minX,v.minX),g.minY=Math.min(g.minY,v.minY),g.maxX=Math.max(g.maxX,v.maxX),g.maxY=Math.max(g.maxY,v.maxY),g}function l(g,v){return g.minX-v.minX}function c(g,v){return g.minY-v.minY}function h(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function p(g){return g.maxX-g.minX+(g.maxY-g.minY)}function d(g,v){return g.minX<=v.minX&&g.minY<=v.minY&&v.maxX<=g.maxX&&v.maxY<=g.maxY}function m(g,v){return v.minX<=g.maxX&&v.minY<=g.maxY&&v.maxX>=g.minX&&v.maxY>=g.minY}function x(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(g,v,y,E,S){for(var C=[v,y];C.length;)if(!((y=C.pop())-(v=C.pop())<=E)){var N=v+Math.ceil((y-v)/E/2)*E;r(g,N,v,y,S),C.push(v,N,N,y)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(g){var v=this.data,y=[];if(!m(g,v))return y;for(var E=this.toBBox,S=[];v;){for(var C=0;C<v.children.length;C++){var N=v.children[C],I=v.leaf?E(N):N;m(g,I)&&(v.leaf?y.push(N):d(g,I)?this._all(N,y):S.push(N))}v=S.pop()}return y},o.prototype.collides=function(g){var v=this.data;if(!m(g,v))return!1;for(var y=[];v;){for(var E=0;E<v.children.length;E++){var S=v.children[E],C=v.leaf?this.toBBox(S):S;if(m(g,C)){if(v.leaf||d(g,C))return!0;y.push(S)}}v=y.pop()}return!1},o.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var v=0;v<g.length;v++)this.insert(g[v]);return this}var y=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===y.height)this._splitRoot(this.data,y);else{if(this.data.height<y.height){var E=this.data;this.data=y,y=E}this._insert(y,this.data.height-y.height-1,!0)}else this.data=y;return this},o.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},o.prototype.clear=function(){return this.data=x([]),this},o.prototype.remove=function(g,v){if(!g)return this;for(var y,E,S,C=this.data,N=this.toBBox(g),I=[],b=[];C||I.length;){if(C||(C=I.pop(),E=I[I.length-1],y=b.pop(),S=!0),C.leaf){var M=s(g,C.children,v);if(M!==-1)return C.children.splice(M,1),I.push(C),this._condense(I),this}S||C.leaf||!d(C,N)?E?(y++,C=E.children[y],S=!1):C=null:(I.push(C),b.push(y),y=0,E=C,C=C.children[0])}return this},o.prototype.toBBox=function(g){return g},o.prototype.compareMinX=function(g,v){return g.minX-v.minX},o.prototype.compareMinY=function(g,v){return g.minY-v.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(g){return this.data=g,this},o.prototype._all=function(g,v){for(var y=[];g;)g.leaf?v.push.apply(v,g.children):y.push.apply(y,g.children),g=y.pop();return v},o.prototype._build=function(g,v,y,E){var S,C=y-v+1,N=this._maxEntries;if(C<=N)return a(S=x(g.slice(v,y+1)),this.toBBox),S;E||(E=Math.ceil(Math.log(C)/Math.log(N)),N=Math.ceil(C/Math.pow(N,E-1))),(S=x([])).leaf=!1,S.height=E;var I=Math.ceil(C/N),b=I*Math.ceil(Math.sqrt(N));_(g,v,y,b,this.compareMinX);for(var M=v;M<=y;M+=b){var A=Math.min(M+b-1,y);_(g,M,A,I,this.compareMinY);for(var D=M;D<=A;D+=I){var R=Math.min(D+I-1,A);S.children.push(this._build(g,D,R,E-1))}}return a(S,this.toBBox),S},o.prototype._chooseSubtree=function(g,v,y,E){for(;E.push(v),!v.leaf&&E.length-1!==y;){for(var S=1/0,C=1/0,N=void 0,I=0;I<v.children.length;I++){var b=v.children[I],M=h(b),A=(D=g,R=b,(Math.max(R.maxX,D.maxX)-Math.min(R.minX,D.minX))*(Math.max(R.maxY,D.maxY)-Math.min(R.minY,D.minY))-M);A<C?(C=A,S=M<S?M:S,N=b):A===C&&M<S&&(S=M,N=b)}v=N||v.children[0]}var D,R;return v},o.prototype._insert=function(g,v,y){var E=y?g:this.toBBox(g),S=[],C=this._chooseSubtree(E,this.data,v,S);for(C.children.push(g),f(C,E);v>=0&&S[v].children.length>this._maxEntries;)this._split(S,v),v--;this._adjustParentBBoxes(E,S,v)},o.prototype._split=function(g,v){var y=g[v],E=y.children.length,S=this._minEntries;this._chooseSplitAxis(y,S,E);var C=this._chooseSplitIndex(y,S,E),N=x(y.children.splice(C,y.children.length-C));N.height=y.height,N.leaf=y.leaf,a(y,this.toBBox),a(N,this.toBBox),v?g[v-1].children.push(N):this._splitRoot(y,N)},o.prototype._splitRoot=function(g,v){this.data=x([g,v]),this.data.height=g.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(g,v,y){for(var E,S,C,N,I,b,M,A=1/0,D=1/0,R=v;R<=y-v;R++){var k=u(g,0,R,this.toBBox),F=u(g,R,y,this.toBBox),J=(S=k,C=F,N=void 0,I=void 0,b=void 0,M=void 0,N=Math.max(S.minX,C.minX),I=Math.max(S.minY,C.minY),b=Math.min(S.maxX,C.maxX),M=Math.min(S.maxY,C.maxY),Math.max(0,b-N)*Math.max(0,M-I)),H=h(k)+h(F);J<A?(A=J,E=R,D=H<D?H:D):J===A&&H<D&&(D=H,E=R)}return E||y-v},o.prototype._chooseSplitAxis=function(g,v,y){var E=g.leaf?this.compareMinX:l,S=g.leaf?this.compareMinY:c;this._allDistMargin(g,v,y,E)<this._allDistMargin(g,v,y,S)&&g.children.sort(E)},o.prototype._allDistMargin=function(g,v,y,E){g.children.sort(E);for(var S=this.toBBox,C=u(g,0,v,S),N=u(g,y-v,y,S),I=p(C)+p(N),b=v;b<y-v;b++){var M=g.children[b];f(C,g.leaf?S(M):M),I+=p(C)}for(var A=y-v-1;A>=v;A--){var D=g.children[A];f(N,g.leaf?S(D):D),I+=p(N)}return I},o.prototype._adjustParentBBoxes=function(g,v,y){for(var E=y;E>=0;E--)f(v[E],g)},o.prototype._condense=function(g){for(var v=g.length-1,y=void 0;v>=0;v--)g[v].children.length===0?v>0?(y=g[v-1].children).splice(y.indexOf(g[v]),1):this.clear():a(g[v],this.toBBox)},o})})(rp);var Qv=rp.exports;class Zv{constructor(t=[],r=$v){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,s=r[o];if(n(i,s)>=0)break;r[t]=s,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let s=(t<<1)+1,a=r[s];const u=s+1;if(u<this.length&&n(r[u],a)<0&&(s=u,a=r[u]),n(a,o)>=0)break;r[t]=a,t=s}r[t]=o}}function $v(e,t){return e<t?-1:e>t?1:0}const jv=Object.freeze(Object.defineProperty({__proto__:null,default:Zv},Symbol.toStringTag,{value:"Module"})),td=ja(jv);var ru={exports:{}},ed=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var u=(i-n)/2,f=0,l=u-1;f<u;l=f++){var c=r[n+f*2+0],h=r[n+f*2+1],p=r[n+l*2+0],d=r[n+l*2+1],m=h>s!=d>s&&o<(p-c)*(s-h)/(d-h)+c;m&&(a=!a)}return a},rd=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var u=i-n,f=0,l=u-1;f<u;l=f++){var c=r[f+n][0],h=r[f+n][1],p=r[l+n][0],d=r[l+n][1],m=h>s!=d>s&&o<(p-c)*(s-h)/(d-h)+c;m&&(a=!a)}return a},np=ed,ip=rd;ru.exports=function(t,r,n,i){return r.length>0&&Array.isArray(r[0])?ip(t,r,n,i):np(t,r,n,i)};ru.exports.nested=ip;ru.exports.flat=np;var nd=ru.exports,ju={exports:{}};(function(e,t){(function(r,n){n(t)})($a,function(r){const i=33306690738754706e-32;function o(m,x,_,g,v){let y,E,S,C,N=x[0],I=g[0],b=0,M=0;I>N==I>-N?(y=N,N=x[++b]):(y=I,I=g[++M]);let A=0;if(b<m&&M<_)for(I>N==I>-N?(S=y-((E=N+y)-N),N=x[++b]):(S=y-((E=I+y)-I),I=g[++M]),y=E,S!==0&&(v[A++]=S);b<m&&M<_;)I>N==I>-N?(S=y-((E=y+N)-(C=E-y))+(N-C),N=x[++b]):(S=y-((E=y+I)-(C=E-y))+(I-C),I=g[++M]),y=E,S!==0&&(v[A++]=S);for(;b<m;)S=y-((E=y+N)-(C=E-y))+(N-C),N=x[++b],y=E,S!==0&&(v[A++]=S);for(;M<_;)S=y-((E=y+I)-(C=E-y))+(I-C),I=g[++M],y=E,S!==0&&(v[A++]=S);return y===0&&A!==0||(v[A++]=y),A}function s(m){return new Float64Array(m)}const a=33306690738754716e-32,u=22204460492503146e-32,f=11093356479670487e-47,l=s(4),c=s(8),h=s(12),p=s(16),d=s(4);r.orient2d=function(m,x,_,g,v,y){const E=(x-y)*(_-v),S=(m-v)*(g-y),C=E-S;if(E===0||S===0||E>0!=S>0)return C;const N=Math.abs(E+S);return Math.abs(C)>=a*N?C:-function(I,b,M,A,D,R,k){let F,J,H,Q,q,V,U,ft,it,gt,ht,ne,_r,Re,lr,cr,Yn,Dr;const Yr=I-D,Vr=M-D,Mn=b-R,Ln=A-R;q=(lr=(ft=Yr-(U=(V=134217729*Yr)-(V-Yr)))*(gt=Ln-(it=(V=134217729*Ln)-(V-Ln)))-((Re=Yr*Ln)-U*it-ft*it-U*gt))-(ht=lr-(Yn=(ft=Mn-(U=(V=134217729*Mn)-(V-Mn)))*(gt=Vr-(it=(V=134217729*Vr)-(V-Vr)))-((cr=Mn*Vr)-U*it-ft*it-U*gt))),l[0]=lr-(ht+q)+(q-Yn),q=(_r=Re-((ne=Re+ht)-(q=ne-Re))+(ht-q))-(ht=_r-cr),l[1]=_r-(ht+q)+(q-cr),q=(Dr=ne+ht)-ne,l[2]=ne-(Dr-q)+(ht-q),l[3]=Dr;let Ii=function(mv,Pl){let Ml=Pl[0];for(let Su=1;Su<mv;Su++)Ml+=Pl[Su];return Ml}(4,l),ps=u*k;if(Ii>=ps||-Ii>=ps||(F=I-(Yr+(q=I-Yr))+(q-D),H=M-(Vr+(q=M-Vr))+(q-D),J=b-(Mn+(q=b-Mn))+(q-R),Q=A-(Ln+(q=A-Ln))+(q-R),F===0&&J===0&&H===0&&Q===0)||(ps=f*k+i*Math.abs(Ii),(Ii+=Yr*Q+Ln*F-(Mn*H+Vr*J))>=ps||-Ii>=ps))return Ii;q=(lr=(ft=F-(U=(V=134217729*F)-(V-F)))*(gt=Ln-(it=(V=134217729*Ln)-(V-Ln)))-((Re=F*Ln)-U*it-ft*it-U*gt))-(ht=lr-(Yn=(ft=J-(U=(V=134217729*J)-(V-J)))*(gt=Vr-(it=(V=134217729*Vr)-(V-Vr)))-((cr=J*Vr)-U*it-ft*it-U*gt))),d[0]=lr-(ht+q)+(q-Yn),q=(_r=Re-((ne=Re+ht)-(q=ne-Re))+(ht-q))-(ht=_r-cr),d[1]=_r-(ht+q)+(q-cr),q=(Dr=ne+ht)-ne,d[2]=ne-(Dr-q)+(ht-q),d[3]=Dr;const vv=o(4,l,4,d,c);q=(lr=(ft=Yr-(U=(V=134217729*Yr)-(V-Yr)))*(gt=Q-(it=(V=134217729*Q)-(V-Q)))-((Re=Yr*Q)-U*it-ft*it-U*gt))-(ht=lr-(Yn=(ft=Mn-(U=(V=134217729*Mn)-(V-Mn)))*(gt=H-(it=(V=134217729*H)-(V-H)))-((cr=Mn*H)-U*it-ft*it-U*gt))),d[0]=lr-(ht+q)+(q-Yn),q=(_r=Re-((ne=Re+ht)-(q=ne-Re))+(ht-q))-(ht=_r-cr),d[1]=_r-(ht+q)+(q-cr),q=(Dr=ne+ht)-ne,d[2]=ne-(Dr-q)+(ht-q),d[3]=Dr;const dv=o(vv,c,4,d,h);q=(lr=(ft=F-(U=(V=134217729*F)-(V-F)))*(gt=Q-(it=(V=134217729*Q)-(V-Q)))-((Re=F*Q)-U*it-ft*it-U*gt))-(ht=lr-(Yn=(ft=J-(U=(V=134217729*J)-(V-J)))*(gt=H-(it=(V=134217729*H)-(V-H)))-((cr=J*H)-U*it-ft*it-U*gt))),d[0]=lr-(ht+q)+(q-Yn),q=(_r=Re-((ne=Re+ht)-(q=ne-Re))+(ht-q))-(ht=_r-cr),d[1]=_r-(ht+q)+(q-cr),q=(Dr=ne+ht)-ne,d[2]=ne-(Dr-q)+(ht-q),d[3]=Dr;const yv=o(dv,h,4,d,p);return p[yv-1]}(m,x,_,g,v,y,N)},r.orient2dfast=function(m,x,_,g,v,y){return(x-y)*(_-v)-(m-v)*(g-y)},Object.defineProperty(r,"__esModule",{value:!0})})})(ju,ju.exports);var id=ju.exports,Rl=Qv,Na=td,od=nd,sd=id.orient2d;Na.default&&(Na=Na.default);Af.exports=op;Af.exports.default=op;function op(e,t,r){t=Math.max(0,t===void 0?2:t),r=r||0;var n=cd(e),i=new Rl(16);i.toBBox=function(g){return{minX:g[0],minY:g[1],maxX:g[0],maxY:g[1]}},i.compareMinX=function(g,v){return g[0]-v[0]},i.compareMinY=function(g,v){return g[1]-v[1]},i.load(e);for(var o=[],s=0,a;s<n.length;s++){var u=n[s];i.remove(u),a=Tl(u,a),o.push(a)}var f=new Rl(16);for(s=0;s<o.length;s++)f.insert(Pu(o[s]));for(var l=t*t,c=r*r;o.length;){var h=o.shift(),p=h.p,d=h.next.p,m=Mu(p,d);if(!(m<c)){var x=m/l;u=ad(i,h.prev.p,p,d,h.next.next.p,x,f),u&&Math.min(Mu(u,p),Mu(u,d))<=x&&(o.push(h),o.push(Tl(u,h)),i.remove(u),f.remove(h),f.insert(Pu(h)),f.insert(Pu(h.next)))}}h=a;var _=[];do _.push(h.p),h=h.next;while(h!==a);return _.push(h.p),_}function ad(e,t,r,n,i,o,s){for(var a=new Na([],ud),u=e.data;u;){for(var f=0;f<u.children.length;f++){var l=u.children[f],c=u.leaf?Lu(l,r,n):fd(r,n,l);c>o||a.push({node:l,dist:c})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),p=h.node,d=Lu(p,t,r),m=Lu(p,n,i);if(h.dist<d&&h.dist<m&&Dl(r,p,s)&&Dl(n,p,s))return p}u=a.pop(),u&&(u=u.node)}return null}function ud(e,t){return e.dist-t.dist}function fd(e,t,r){if(Al(e,r)||Al(t,r))return 0;var n=ga(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(n===0)return 0;var i=ga(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(i===0)return 0;var o=ga(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(o===0)return 0;var s=ga(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return s===0?0:Math.min(n,i,o,s)}function Al(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function Dl(e,t,r){for(var n=Math.min(e[0],t[0]),i=Math.min(e[1],t[1]),o=Math.max(e[0],t[0]),s=Math.max(e[1],t[1]),a=r.search({minX:n,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(ld(a[u].p,a[u].next.p,e,t))return!1;return!0}function So(e,t,r){return sd(e[0],e[1],t[0],t[1],r[0],r[1])}function ld(e,t,r,n){return e!==n&&t!==r&&So(e,t,r)>0!=So(e,t,n)>0&&So(r,n,e)>0!=So(r,n,t)>0}function Pu(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function cd(e){for(var t=e[0],r=e[0],n=e[0],i=e[0],o=0;o<e.length;o++){var s=e[o];s[0]<t[0]&&(t=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[t,r,n,i],u=a.slice();for(o=0;o<e.length;o++)od(e[o],a)||u.push(e[o]);return pd(u)}function Tl(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Mu(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Lu(e,t,r){var n=t[0],i=t[1],o=r[0]-n,s=r[1]-i;if(o!==0||s!==0){var a=((e[0]-n)*o+(e[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return o=e[0]-n,s=e[1]-i,o*o+s*s}function ga(e,t,r,n,i,o,s,a){var u=r-e,f=n-t,l=s-i,c=a-o,h=e-i,p=t-o,d=u*u+f*f,m=u*l+f*c,x=l*l+c*c,_=u*h+f*p,g=l*h+c*p,v=d*x-m*m,y,E,S,C,N=v,I=v;v===0?(E=0,N=1,C=g,I=x):(E=m*g-x*_,C=d*g-m*_,E<0?(E=0,C=g,I=x):E>N&&(E=N,C=g+m,I=x)),C<0?(C=0,-_<0?E=0:-_>d?E=N:(E=-_,N=d)):C>I&&(C=I,-_+m<0?E=0:-_+m>d?E=N:(E=-_+m,N=d)),y=E===0?0:E/N,S=C===0?0:C/I;var b=(1-y)*e+y*r,M=(1-y)*t+y*n,A=(1-S)*i+S*s,D=(1-S)*o+S*a,R=A-b,k=D-M;return R*R+k*k}function hd(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function pd(e){e.sort(hd);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&So(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var n=[],i=e.length-1;i>=0;i--){for(;n.length>=2&&So(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}return n.pop(),t.pop(),t.concat(n)}var gd=Af.exports;const vd=wi(gd);function dd(e,t){t===void 0&&(t={}),t.concavity=t.concavity||1/0;var r=[];if(Le(e,function(i){r.push([i[0],i[1]])}),!r.length)return null;var n=vd(r,t.concavity);return n.length>3?dt([n]):null}function ce(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=se(e),i=fe(t),o=i.type,s=t.bbox,a=i.coordinates;if(s&&yd(n,s)===!1)return!1;o==="Polygon"&&(a=[a]);for(var u=!1,f=0;f<a.length&&!u;f++)if(Fl(n,a[f][0],r.ignoreBoundary)){for(var l=!1,c=1;c<a[f].length&&!l;)Fl(n,a[f][c],!r.ignoreBoundary)&&(l=!0),c++;l||(u=!0)}return u}function Fl(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var s=t[i][0],a=t[i][1],u=t[o][0],f=t[o][1],l=e[1]*(s-u)+a*(u-e[0])+f*(e[0]-s)===0&&(s-e[0])*(u-e[0])<=0&&(a-e[1])*(f-e[1])<=0;if(l)return!r;var c=a>e[1]!=f>e[1]&&e[0]<(u-s)*(e[1]-a)/(f-a)+s;c&&(n=!n)}return n}function yd(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function md(e,t){var r=[];return Qt(e,function(n){var i=!1;if(n.geometry.type==="Point")Zr(t,function(s){ce(n,s)&&(i=!0)}),i&&r.push(n);else if(n.geometry.type==="MultiPoint"){var o=[];Zr(t,function(s){Le(n,function(a){ce(a,s)&&(i=!0,o.push(a))})}),i&&r.push(tu(o))}else throw new Error("Input geometry must be a Point or MultiPoint")}),nt(r)}function ee(e,t,r){r===void 0&&(r={});var n=se(e),i=se(t),o=tr(i[1]-n[1]),s=tr(i[0]-n[0]),a=tr(n[1]),u=tr(i[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return eu(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}function _d(e,t){var r=!1;return nt(wd(e.features.map(function(n){var i={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return t?i.z=n.properties[t]:n.geometry.coordinates.length===3&&(r=!0,i.z=n.geometry.coordinates[2]),i})).map(function(n){var i=[n.a.x,n.a.y],o=[n.b.x,n.b.y],s=[n.c.x,n.c.y],a={};return r?(i.push(n.a.z),o.push(n.b.z),s.push(n.c.z)):a={a:n.a.z,b:n.b.z,c:n.c.z},dt([[i,o,s,i]],a)}))}var Bl=function(){function e(t,r,n){this.a=t,this.b=r,this.c=n;var i=r.x-t.x,o=r.y-t.y,s=n.x-t.x,a=n.y-t.y,u=i*(t.x+r.x)+o*(t.y+r.y),f=s*(t.x+n.x)+a*(t.y+n.y),l=2*(i*(n.y-r.y)-o*(n.x-r.x)),c,h;this.x=(a*u-o*f)/l,this.y=(i*f-s*u)/l,c=this.x-t.x,h=this.y-t.y,this.r=c*c+h*h}return e}();function Ed(e,t){return t.x-e.x}function xd(e){var t=e.length,r,n,i,o,s;t:for(;t;)for(n=e[--t],r=e[--t],i=t;i;)if(s=e[--i],o=e[--i],r===o&&n===s||r===s&&n===o){e.splice(t,2),e.splice(i,2),t-=2;continue t}}function wd(e){if(e.length<3)return[];e.sort(Ed);for(var t=e.length-1,r=e[t].x,n=e[0].x,i=e[t].y,o=i,s=1e-12,a,u,f,l,c,h;t--;)e[t].y<i&&(i=e[t].y),e[t].y>o&&(o=e[t].y);var p=n-r,d=o-i,m=p>d?p:d,x=(n+r)*.5,_=(o+i)*.5,g=[new Bl({__sentinel:!0,x:x-20*m,y:_-m},{__sentinel:!0,x,y:_+20*m},{__sentinel:!0,x:x+20*m,y:_-m})],v=[],y=[],E;for(t=e.length;t--;){for(y.length=0,E=g.length;E--;){if(p=e[t].x-g[E].x,p>0&&p*p>g[E].r){v.push(g[E]),g.splice(E,1);continue}d=e[t].y-g[E].y,!(p*p+d*d>g[E].r)&&(y.push(g[E].a,g[E].b,g[E].b,g[E].c,g[E].c,g[E].a),g.splice(E,1))}for(xd(y),E=y.length;E;)u=y[--E],a=y[--E],f=e[t],l=u.x-a.x,c=u.y-a.y,h=2*(l*(f.y-u.y)-c*(f.x-u.x)),Math.abs(h)>s&&g.push(new Bl(a,u,f))}for(Array.prototype.push.apply(v,g),t=v.length;t--;)(v[t].a.__sentinel||v[t].b.__sentinel||v[t].c.__sentinel)&&v.splice(t,1);return v}function vr(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return sp(e);case"FeatureCollection":return Id(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Df(e);default:throw new Error("unknown GeoJSON type")}}function sp(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=ap(e.properties),t.geometry=Df(e.geometry),t}function ap(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=ap(n):t[r]=n}),t}function Id(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return sp(r)}),t}function Df(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return Df(r)}),t):(t.coordinates=up(e.coordinates),t)}function up(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return up(r)})}function Cd(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(Gr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=vr(e));var n=[],i=jh(e,function(o,s){var a=Sd(o,s);return a||(n.push(o),s)});return i&&n.push(i),n.length?n.length===1?n[0]:ho(n.map(function(o){return o.coordinates})):null}function va(e){return e[0].toString()+","+e[1].toString()}function Sd(e,t){var r=e.geometry.coordinates,n=t.geometry.coordinates,i=va(r[0]),o=va(r[r.length-1]),s=va(n[0]),a=va(n[n.length-1]),u;if(i===a)u=n.concat(r.slice(1));else if(s===o)u=r.concat(n.slice(1));else if(i===s)u=r.slice(1).reverse().concat(n);else if(o===a)u=r.concat(n.reverse().slice(1));else return null;return $t(u)}function Nd(e){return e}function Pd(e){if(e==null)return Nd;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=r=0);var f=2,l=a.length,c=new Array(l);for(c[0]=(t+=a[0])*n+o,c[1]=(r+=a[1])*i+s;f<l;)c[f]=a[f],++f;return c}}function Md(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function fp(e,t){var r=Pd(e.transform),n=e.arcs;function i(l,c){c.length&&c.pop();for(var h=n[l<0?~l:l],p=0,d=h.length;p<d;++p)c.push(r(h[p],p));l<0&&Md(c,d)}function o(l){return r(l)}function s(l){for(var c=[],h=0,p=l.length;h<p;++h)i(l[h],c);return c.length<2&&c.push(c[0]),c}function a(l){for(var c=s(l);c.length<4;)c.push(c[0]);return c}function u(l){return l.map(a)}function f(l){var c=l.type,h;switch(c){case"GeometryCollection":return{type:c,geometries:l.geometries.map(f)};case"Point":h=o(l.coordinates);break;case"MultiPoint":h=l.coordinates.map(o);break;case"LineString":h=s(l.arcs);break;case"MultiLineString":h=l.arcs.map(s);break;case"Polygon":h=u(l.arcs);break;case"MultiPolygon":h=l.arcs.map(u);break;default:return null}return{type:c,coordinates:h}}return f(t)}function Ld(e,t){var r={},n={},i={},o=[],s=-1;t.forEach(function(f,l){var c=e.arcs[f<0?~f:f],h;c.length<3&&!c[1][0]&&!c[1][1]&&(h=t[++s],t[s]=f,t[l]=h)}),t.forEach(function(f){var l=a(f),c=l[0],h=l[1],p,d;if(p=i[c])if(delete i[p.end],p.push(f),p.end=h,d=n[h]){delete n[d.start];var m=d===p?p:p.concat(d);n[m.start=p.start]=i[m.end=d.end]=m}else n[p.start]=i[p.end]=p;else if(p=n[h])if(delete n[p.start],p.unshift(f),p.start=c,d=i[c]){delete i[d.end];var x=d===p?p:d.concat(p);n[x.start=d.start]=i[x.end=p.end]=x}else n[p.start]=i[p.end]=p;else p=[f],n[p.start=c]=i[p.end=h]=p});function a(f){var l=e.arcs[f<0?~f:f],c=l[0],h;return e.transform?(h=[0,0],l.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=l[l.length-1],f<0?[h,c]:[c,h]}function u(f,l){for(var c in f){var h=f[c];delete l[h.start],delete h.start,delete h.end,h.forEach(function(p){r[p<0?~p:p]=1}),o.push(h)}}return u(i,n),u(n,i),t.forEach(function(f){r[f<0?~f:f]||o.push([f])}),o}function Od(e){for(var t=-1,r=e.length,n,i=e[r-1],o=0;++t<r;)n=i,i=e[t],o+=n[0]*i[1]-n[1]*i[0];return Math.abs(o)}function bd(e){return fp(e,Rd.apply(this,arguments))}function Rd(e,t){var r={},n=[],i=[];t.forEach(o);function o(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(o);break;case"Polygon":s(u.arcs);break;case"MultiPolygon":u.arcs.forEach(s);break}}function s(u){u.forEach(function(f){f.forEach(function(l){(r[l=l<0?~l:l]||(r[l]=[])).push(u)})}),n.push(u)}function a(u){return Od(fp(e,{type:"Polygon",arcs:[u]}).coordinates[0])}return n.forEach(function(u){if(!u._){var f=[],l=[u];for(u._=1,i.push(f);u=l.pop();)f.push(u),u.forEach(function(c){c.forEach(function(h){r[h<0?~h:h].forEach(function(p){p._||(p._=1,l.push(p))})})})}}),n.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:i.map(function(u){var f=[],l;if(u.forEach(function(m){m.forEach(function(x){x.forEach(function(_){r[_<0?~_:_].length<2&&f.push(_)})})}),f=Ld(e,f),(l=f.length)>1)for(var c=1,h=a(f[0]),p,d;c<l;++c)(p=a(f[c]))>h&&(d=f[0],f[0]=f[c],f[c]=d,h=p);return f}).filter(function(u){return u.length>0})}}var nu=Object.prototype.hasOwnProperty;function Ad(e){var t=1/0,r=1/0,n=-1/0,i=-1/0;function o(c){c!=null&&nu.call(s,c.type)&&s[c.type](c)}var s={GeometryCollection:function(c){c.geometries.forEach(o)},Point:function(c){a(c.coordinates)},MultiPoint:function(c){c.coordinates.forEach(a)},LineString:function(c){u(c.arcs)},MultiLineString:function(c){c.arcs.forEach(u)},Polygon:function(c){c.arcs.forEach(u)},MultiPolygon:function(c){c.arcs.forEach(f)}};function a(c){var h=c[0],p=c[1];h<t&&(t=h),h>n&&(n=h),p<r&&(r=p),p>i&&(i=p)}function u(c){c.forEach(a)}function f(c){c.forEach(u)}for(var l in e)o(e[l]);return n>=t&&i>=r?[t,r,n,i]:void 0}function Dd(e,t,r,n,i){arguments.length===3&&(n=Array,i=null);for(var o=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=e-1,a=0;a<e;++a)o[a]=i;function u(c){for(var h=t(c)&s,p=o[h],d=0;p!=i;){if(r(p,c))return!0;if(++d>=e)throw new Error("full hashset");p=o[h=h+1&s]}return o[h]=c,!0}function f(c){for(var h=t(c)&s,p=o[h],d=0;p!=i;){if(r(p,c))return!0;if(++d>=e)break;p=o[h=h+1&s]}return!1}function l(){for(var c=[],h=0,p=o.length;h<p;++h){var d=o[h];d!=i&&c.push(d)}return c}return{add:u,has:f,values:l}}function Tf(e,t,r,n,i,o){arguments.length===3&&(n=o=Array,i=null);for(var s=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=new o(e),u=e-1,f=0;f<e;++f)s[f]=i;function l(d,m){for(var x=t(d)&u,_=s[x],g=0;_!=i;){if(r(_,d))return a[x]=m;if(++g>=e)throw new Error("full hashmap");_=s[x=x+1&u]}return s[x]=d,a[x]=m,m}function c(d,m){for(var x=t(d)&u,_=s[x],g=0;_!=i;){if(r(_,d))return a[x];if(++g>=e)throw new Error("full hashmap");_=s[x=x+1&u]}return s[x]=d,a[x]=m,m}function h(d,m){for(var x=t(d)&u,_=s[x],g=0;_!=i;){if(r(_,d))return a[x];if(++g>=e)break;_=s[x=x+1&u]}return m}function p(){for(var d=[],m=0,x=s.length;m<x;++m){var _=s[m];_!=i&&d.push(_)}return d}return{set:l,maybeSet:c,get:h,keys:p}}function Wi(e,t){return e[0]===t[0]&&e[1]===t[1]}var lp=new ArrayBuffer(16),Gl=new Float64Array(lp),da=new Uint32Array(lp);function tf(e){Gl[0]=e[0],Gl[1]=e[1];var t=da[0]^da[1];return t=t<<5^t>>7^da[2]^da[3],t&2147483647}function Td(e){var t=e.coordinates,r=e.lines,n=e.rings,i=S(),o=new Int32Array(t.length),s=new Int32Array(t.length),a=new Int32Array(t.length),u=new Int8Array(t.length),f=0,l,c,h,p,d;for(l=0,c=t.length;l<c;++l)o[l]=s[l]=a[l]=-1;for(l=0,c=r.length;l<c;++l){var m=r[l],x=m[0],_=m[1];for(p=i[x],d=i[++x],++f,u[p]=1;++x<=_;)E(l,h=p,p=d,d=i[x]);++f,u[d]=1}for(l=0,c=t.length;l<c;++l)o[l]=-1;for(l=0,c=n.length;l<c;++l){var g=n[l],v=g[0]+1,y=g[1];for(h=i[y-1],p=i[v-1],d=i[v],E(l,h,p,d);++v<=y;)E(l,h=p,p=d,d=i[v])}function E(M,A,D,R){if(o[D]!==M){o[D]=M;var k=s[D];if(k>=0){var F=a[D];(k!==A||F!==R)&&(k!==R||F!==A)&&(++f,u[D]=1)}else s[D]=A,a[D]=R}}function S(){for(var M=Tf(t.length*1.4,C,N,Int32Array,-1,Int32Array),A=new Int32Array(t.length),D=0,R=t.length;D<R;++D)A[D]=M.maybeSet(D,D);return A}function C(M){return tf(t[M])}function N(M,A){return Wi(t[M],t[A])}o=s=a=null;var I=Dd(f*1.4,tf,Wi),b;for(l=0,c=t.length;l<c;++l)u[b=i[l]]&&I.add(t[b]);return I}function Fd(e){var t=Td(e),r=e.coordinates,n=e.lines,i=e.rings,o,s,a;for(s=0,a=n.length;s<a;++s)for(var u=n[s],f=u[0],l=u[1];++f<l;)t.has(r[f])&&(o={0:f,1:u[1]},u[1]=f,u=u.next=o);for(s=0,a=i.length;s<a;++s)for(var c=i[s],h=c[0],p=h,d=c[1],m=t.has(r[h]);++p<d;)t.has(r[p])&&(m?(o={0:p,1:c[1]},c[1]=p,c=c.next=o):(Bd(r,h,d,d-p),r[d]=r[h],m=!0,p=h));return e}function Bd(e,t,r,n){Ou(e,t,r),Ou(e,t,t+n),Ou(e,t+n,r)}function Ou(e,t,r){for(var n=t+(r---t>>1),i;t<n;++t,--r)i=e[t],e[t]=e[r],e[r]=i}function Gd(e){var t=e.coordinates,r=e.lines,n,i=e.rings,o,s=r.length+i.length,a,u;for(delete e.lines,delete e.rings,a=0,u=r.length;a<u;++a)for(n=r[a];n=n.next;)++s;for(a=0,u=i.length;a<u;++a)for(o=i[a];o=o.next;)++s;var f=Tf(s*2*1.4,tf,Wi),l=e.arcs=[];for(a=0,u=r.length;a<u;++a){n=r[a];do c(n);while(n=n.next)}for(a=0,u=i.length;a<u;++a)if(o=i[a],o.next)do c(o);while(o=o.next);else h(o);function c(g){var v,y,E,S,C,N,I,b;if(E=f.get(v=t[g[0]])){for(I=0,b=E.length;I<b;++I)if(S=E[I],p(S,g)){g[0]=S[0],g[1]=S[1];return}}if(C=f.get(y=t[g[1]])){for(I=0,b=C.length;I<b;++I)if(N=C[I],d(N,g)){g[1]=N[0],g[0]=N[1];return}}E?E.push(g):f.set(v,[g]),C?C.push(g):f.set(y,[g]),l.push(g)}function h(g){var v,y,E,S,C;if(y=f.get(v=t[g[0]]))for(S=0,C=y.length;S<C;++S){if(E=y[S],m(E,g)){g[0]=E[0],g[1]=E[1];return}if(x(E,g)){g[0]=E[1],g[1]=E[0];return}}if(y=f.get(v=t[g[0]+_(g)]))for(S=0,C=y.length;S<C;++S){if(E=y[S],m(E,g)){g[0]=E[0],g[1]=E[1];return}if(x(E,g)){g[0]=E[1],g[1]=E[0];return}}y?y.push(g):f.set(v,[g]),l.push(g)}function p(g,v){var y=g[0],E=v[0],S=g[1],C=v[1];if(y-S!==E-C)return!1;for(;y<=S;++y,++E)if(!Wi(t[y],t[E]))return!1;return!0}function d(g,v){var y=g[0],E=v[0],S=g[1],C=v[1];if(y-S!==E-C)return!1;for(;y<=S;++y,--C)if(!Wi(t[y],t[C]))return!1;return!0}function m(g,v){var y=g[0],E=v[0],S=g[1],C=v[1],N=S-y;if(N!==C-E)return!1;for(var I=_(g),b=_(v),M=0;M<N;++M)if(!Wi(t[y+(M+I)%N],t[E+(M+b)%N]))return!1;return!0}function x(g,v){var y=g[0],E=v[0],S=g[1],C=v[1],N=S-y;if(N!==C-E)return!1;for(var I=_(g),b=N-_(v),M=0;M<N;++M)if(!Wi(t[y+(M+I)%N],t[C-(M+b)%N]))return!1;return!0}function _(g){for(var v=g[0],y=g[1],E=v,S=E,C=t[E];++E<y;){var N=t[E];(N[0]<C[0]||N[0]===C[0]&&N[1]<C[1])&&(S=E,C=N)}return S-v}return e}function kd(e){for(var t=-1,r=e.length;++t<r;){for(var n=e[t],i=0,o=1,s=n.length,a=n[0],u=a[0],f=a[1],l,c;++i<s;)a=n[i],l=a[0],c=a[1],(l!==u||c!==f)&&(n[o++]=[l-u,c-f],u=l,f=c);o===1&&(n[o++]=[0,0]),n.length=o}return e}function qd(e){var t=-1,r=[],n=[],i=[];function o(c){c&&nu.call(s,c.type)&&s[c.type](c)}var s={GeometryCollection:function(c){c.geometries.forEach(o)},LineString:function(c){c.arcs=a(c.arcs)},MultiLineString:function(c){c.arcs=c.arcs.map(a)},Polygon:function(c){c.arcs=c.arcs.map(u)},MultiPolygon:function(c){c.arcs=c.arcs.map(f)}};function a(c){for(var h=0,p=c.length;h<p;++h)i[++t]=c[h];var d={0:t-p+1,1:t};return r.push(d),d}function u(c){for(var h=0,p=c.length;h<p;++h)i[++t]=c[h];var d={0:t-p+1,1:t};return n.push(d),d}function f(c){return c.map(u)}for(var l in e)o(e[l]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:e}}function zd(e){var t={},r;for(r in e)t[r]=Xd(e[r]);return t}function Xd(e){return e==null?{type:null}:(e.type==="FeatureCollection"?Ud:e.type==="Feature"?cp:Ff)(e)}function Ud(e){var t={type:"GeometryCollection",geometries:e.features.map(cp)};return e.bbox!=null&&(t.bbox=e.bbox),t}function cp(e){var t=Ff(e.geometry),r;e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox);for(r in e.properties){t.properties=e.properties;break}return t}function Ff(e){if(e==null)return{type:null};var t=e.type==="GeometryCollection"?{type:"GeometryCollection",geometries:e.geometries.map(Ff)}:e.type==="Point"||e.type==="MultiPoint"?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return e.bbox!=null&&(t.bbox=e.bbox),t}function Yd(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=o-n?(r-1)/(o-n):1,u=s-i?(r-1)/(s-i):1;function f(_){return[Math.round((_[0]-n)*a),Math.round((_[1]-i)*u)]}function l(_,g){for(var v=-1,y=0,E=_.length,S=new Array(E),C,N,I,b,M;++v<E;)C=_[v],b=Math.round((C[0]-n)*a),M=Math.round((C[1]-i)*u),(b!==N||M!==I)&&(S[y++]=[N=b,I=M]);for(S.length=y;y<g;)y=S.push([S[0][0],S[0][1]]);return S}function c(_){return l(_,2)}function h(_){return l(_,4)}function p(_){return _.map(h)}function d(_){_!=null&&nu.call(m,_.type)&&m[_.type](_)}var m={GeometryCollection:function(_){_.geometries.forEach(d)},Point:function(_){_.coordinates=f(_.coordinates)},MultiPoint:function(_){_.coordinates=_.coordinates.map(f)},LineString:function(_){_.arcs=c(_.arcs)},MultiLineString:function(_){_.arcs=_.arcs.map(c)},Polygon:function(_){_.arcs=p(_.arcs)},MultiPolygon:function(_){_.arcs=_.arcs.map(p)}};for(var x in e)d(e[x]);return{scale:[1/a,1/u],translate:[n,i]}}function Vd(e,t){var r=Ad(e=zd(e)),n=t>0&&r&&Yd(e,r,t),i=Gd(Fd(qd(e))),o=i.coordinates,s=Tf(i.arcs.length*1.4,Hd,Wd);e=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(h,p){return s.set(h,p),o.slice(h[0],h[1]+1)}),delete i.coordinates,o=null;function a(h){h&&nu.call(u,h.type)&&u[h.type](h)}var u={GeometryCollection:function(h){h.geometries.forEach(a)},LineString:function(h){h.arcs=f(h.arcs)},MultiLineString:function(h){h.arcs=h.arcs.map(f)},Polygon:function(h){h.arcs=h.arcs.map(f)},MultiPolygon:function(h){h.arcs=h.arcs.map(l)}};function f(h){var p=[];do{var d=s.get(h);p.push(h[0]<h[1]?d:~d)}while(h=h.next);return p}function l(h){return h.map(f)}for(var c in e)a(e[c]);return n&&(i.transform=n,i.arcs=kd(i.arcs)),i}function Hd(e){var t=e[0],r=e[1],n;return r<t&&(n=t,t=r,r=n),t+31*r}function Wd(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s;return n<r&&(s=r,r=n,n=s),o<i&&(s=i,i=o,o=s),r===i&&n===o}function Jd(e,t){if(t===void 0&&(t={}),Gr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(t.mutate===!1||t.mutate===void 0)&&(e=vr(e));var r=[];or(e,function(o){r.push(o.geometry)});var n=Vd({geoms:Vh(r).geometry}),i=bd(n,n.objects.geoms.geometries);return i}function Kd(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(Gr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=vr(e));var n=Qd(e);if(!n)throw new Error("geojson must be homogenous");var i=e;switch(n){case"LineString":return Cd(i,t);case"Polygon":return Jd(i,t);default:throw new Error(n+" is not supported")}}function Qd(e){var t={};or(e,function(n){t[n.geometry.type]=!0});var r=Object.keys(t);return r.length===1?r[0]:null}function dw(e,t){t===void 0&&(t={});var r=t.maxEdge||1/0,n=Zd(e),i=_d(n);if(i.features=i.features.filter(function(s){var a=s.geometry.coordinates[0][0],u=s.geometry.coordinates[0][1],f=s.geometry.coordinates[0][2],l=ee(a,u,t),c=ee(u,f,t),h=ee(a,f,t);return l<=r&&c<=r&&h<=r}),i.features.length<1)return null;var o=Kd(i);return o.coordinates.length===1&&(o.coordinates=o.coordinates[0],o.type="Polygon"),qe(o)}function Zd(e){var t=[],r={};return Qt(e,function(n){if(n.geometry){var i=n.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,i)||(t.push(n),r[i]=!0)}}),nt(t)}var Bf={exports:{}},hp={exports:{}};(function(e,t){(function(r,n){e.exports=n()})($a,function(){function r(s,a,u,f,l){n(s,a,u||0,f||s.length-1,l||o)}function n(s,a,u,f,l){for(;f>u;){if(f-u>600){var c=f-u+1,h=a-u+1,p=Math.log(c),d=.5*Math.exp(2*p/3),m=.5*Math.sqrt(p*d*(c-d)/c)*(h-c/2<0?-1:1),x=Math.max(u,Math.floor(a-h*d/c+m)),_=Math.min(f,Math.floor(a+(c-h)*d/c+m));n(s,a,x,_,l)}var g=s[a],v=u,y=f;for(i(s,u,a),l(s[f],g)>0&&i(s,u,f);v<y;){for(i(s,v,y),v++,y--;l(s[v],g)<0;)v++;for(;l(s[y],g)>0;)y--}l(s[u],g)===0?i(s,u,y):(y++,i(s,y,f)),y<=a&&(u=y+1),a<=y&&(f=y-1)}}function i(s,a,u){var f=s[a];s[a]=s[u],s[u]=f}function o(s,a){return s<a?-1:s>a?1:0}return r})})(hp);var $d=hp.exports;Bf.exports=Rs;Bf.exports.default=Rs;var jd=$d;function Rs(e,t){if(!(this instanceof Rs))return new Rs(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Rs.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!ma(e,t))return r;for(var i=[],o,s,a,u;t;){for(o=0,s=t.children.length;o<s;o++)a=t.children[o],u=t.leaf?n(a):a,ma(e,u)&&(t.leaf?r.push(a):Ru(e,u)?this._all(a,r):i.push(a));t=i.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!ma(e,t))return!1;for(var n=[],i,o,s,a;t;){for(i=0,o=t.children.length;i<o;i++)if(s=t.children[i],a=t.leaf?r(s):s,ma(e,a)){if(t.leaf||Ru(e,a))return!0;n.push(s)}t=n.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Io([]),this},remove:function(e,t){if(!e)return this;for(var r=this.data,n=this.toBBox(e),i=[],o=[],s,a,u,f;r||i.length;){if(r||(r=i.pop(),a=i[i.length-1],s=o.pop(),f=!0),r.leaf&&(u=ty(e,r.children,t),u!==-1))return r.children.splice(u,1),i.push(r),this._condense(i),this;!f&&!r.leaf&&Ru(r,n)?(i.push(r),o.push(s),s=0,a=r,r=r.children[0]):a?(s++,r=a.children[s],f=!1):r=null}return this},toBBox:function(e){return e},compareMinX:kl,compareMinY:ql,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i=r-t+1,o=this._maxEntries,s;if(i<=o)return s=Io(e.slice(t,r+1)),_o(s,this.toBBox),s;n||(n=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,n-1))),s=Io([]),s.leaf=!1,s.height=n;var a=Math.ceil(i/o),u=a*Math.ceil(Math.sqrt(o)),f,l,c,h;for(zl(e,t,r,u,this.compareMinX),f=t;f<=r;f+=u)for(c=Math.min(f+u-1,r),zl(e,f,c,a,this.compareMinY),l=f;l<=c;l+=a)h=Math.min(l+a-1,c),s.children.push(this._build(e,l,h,n-1));return _o(s,this.toBBox),s},_chooseSubtree:function(e,t,r,n){for(var i,o,s,a,u,f,l,c;n.push(t),!(t.leaf||n.length-1===r);){for(l=c=1/0,i=0,o=t.children.length;i<o;i++)s=t.children[i],u=bu(s),f=ey(e,s)-u,f<c?(c=f,l=u<l?u:l,a=s):f===c&&u<l&&(l=u,a=s);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),o=[],s=this._chooseSubtree(i,this.data,t,o);for(s.children.push(e),Es(s,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=Io(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,_o(r,this.toBBox),_o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=Io([e,t]),this.data.height=e.height+1,this.data.leaf=!1,_o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,o,s,a,u,f,l;for(u=f=1/0,n=t;n<=r-t;n++)i=_s(e,0,n,this.toBBox),o=_s(e,n,r,this.toBBox),s=ry(i,o),a=bu(i)+bu(o),s<u?(u=s,l=n,f=a<f?a:f):s===u&&a<f&&(f=a,l=n);return l},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:kl,i=e.leaf?this.compareMinY:ql,o=this._allDistMargin(e,t,r,n),s=this._allDistMargin(e,t,r,i);o<s&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i=this.toBBox,o=_s(e,0,t,i),s=_s(e,r-t,r,i),a=ya(o)+ya(s),u,f;for(u=t;u<r-t;u++)f=e.children[u],Es(o,e.leaf?i(f):f),a+=ya(o);for(u=r-t-1;u>=t;u--)f=e.children[u],Es(s,e.leaf?i(f):f),a+=ya(s);return a},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)Es(t[n],e)},_condense:function(e){for(var t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():_o(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function ty(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function _o(e,t){_s(e,0,e.children.length,t,e)}function _s(e,t,r,n,i){i||(i=Io(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t,s;o<r;o++)s=e.children[o],Es(i,e.leaf?n(s):s);return i}function Es(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function kl(e,t){return e.minX-t.minX}function ql(e,t){return e.minY-t.minY}function bu(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ya(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ey(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function ry(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function Ru(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ma(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Io(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zl(e,t,r,n,i){for(var o=[t,r],s;o.length;)r=o.pop(),t=o.pop(),!(r-t<=n)&&(s=t+Math.ceil((r-t)/n/2)*n,jd(e,s,t,r,i),o.push(t,s,s,r))}var ny=Bf.exports;const Gf=wi(ny);function yw(e,t,r,n){var i=Gf(6),o=t.features.map(function(s){var a;return{minX:s.geometry.coordinates[0],minY:s.geometry.coordinates[1],maxX:s.geometry.coordinates[0],maxY:s.geometry.coordinates[1],property:(a=s.properties)===null||a===void 0?void 0:a[r]}});return i.load(o),e.features.forEach(function(s){s.properties||(s.properties={});var a=Oe(s),u=i.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}),f=[];u.forEach(function(l){ce([l.minX,l.minY],s)&&f.push(l.property)}),s.properties[n]=f}),e}function mw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(!e)throw new Error("geojson is required");return(r===!1||r===void 0)&&(e=vr(e)),Le(e,function(n){var i=n[0],o=n[1];n[0]=o,n[1]=i}),e}function To(e,t){t===void 0&&(t={});var r=typeof t=="object"?t.mutate:t;if(!e)throw new Error("geojson is required");var n=Gr(e),i=[];switch(n){case"LineString":i=Au(e);break;case"MultiLineString":case"Polygon":ot(e).forEach(function(s){i.push(Au(s))});break;case"MultiPolygon":ot(e).forEach(function(s){var a=[];s.forEach(function(u){a.push(Au(u))}),i.push(a)});break;case"Point":return e;case"MultiPoint":var o={};ot(e).forEach(function(s){var a=s.join("-");Object.prototype.hasOwnProperty.call(o,a)||(i.push(s),o[a]=!0)});break;default:throw new Error(n+" geometry not supported")}return e.coordinates?r===!0?(e.coordinates=i,e):{type:n,coordinates:i}:r===!0?(e.geometry.coordinates=i,e):qe({type:n,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function Au(e){var t=ot(e);if(t.length===2&&!Xl(t[0],t[1]))return t;var r=[],n=t.length-1,i=r.length;r.push(t[0]);for(var o=1;o<n;o++){var s=r[r.length-1];t[o][0]===s[0]&&t[o][1]===s[1]||(r.push(t[o]),i=r.length,i>2&&Ul(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(t[t.length-1]),i=r.length,Xl(t[0],t[t.length-1])&&i<4)throw new Error("invalid polygon");return Ul(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function Xl(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ul(e,t,r){var n=r[0],i=r[1],o=e[0],s=e[1],a=t[0],u=t[1],f=n-o,l=i-s,c=a-o,h=u-s,p=f*h-l*c;return p!==0?!1:Math.abs(c)>=Math.abs(h)?c>0?o<=n&&n<=a:a<=n&&n<=o:h>0?s<=i&&i<=u:u<=i&&i<=s}function iy(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n}function oy(e,t,r){var n=t.x,i=t.y,o=r.x-n,s=r.y-i;if(o!==0||s!==0){var a=((e.x-n)*o+(e.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return o=e.x-n,s=e.y-i,o*o+s*s}function sy(e,t){for(var r=e[0],n=[r],i,o=1,s=e.length;o<s;o++)i=e[o],iy(i,r)>t&&(n.push(i),r=i);return r!==i&&n.push(i),n}function ef(e,t,r,n,i){for(var o=n,s,a=t+1;a<r;a++){var u=oy(e[a],e[t],e[r]);u>o&&(s=a,o=u)}o>n&&(s-t>1&&ef(e,t,s,n,i),i.push(e[s]),r-s>1&&ef(e,s,r,n,i))}function ay(e,t){var r=e.length-1,n=[e[0]];return ef(e,0,r,t,n),n.push(e[r]),n}function rf(e,t,r){if(e.length<=2)return e;var n=t!==void 0?t*t:1;return e=r?e:sy(e,n),e=ay(e,n),e}function _w(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.tolerance!==void 0?t.tolerance:1,n=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return i!==!0&&(e=vr(e)),Zr(e,function(o){uy(o,r,n)}),e}function uy(e,t,r){var n=e.type;if(n==="Point"||n==="MultiPoint")return e;To(e,!0);var i=e.coordinates;switch(n){case"LineString":e.coordinates=Yl(i,t,r);break;case"MultiLineString":e.coordinates=i.map(function(o){return Yl(o,t,r)});break;case"Polygon":e.coordinates=Vl(i,t,r);break;case"MultiPolygon":e.coordinates=i.map(function(o){return Vl(o,t,r)})}return e}function Yl(e,t,r){return rf(e.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),t,r).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function Vl(e,t,r){return e.map(function(n){var i=n.map(function(s){return{x:s[0],y:s[1]}});if(i.length<4)throw new Error("invalid polygon");for(var o=rf(i,t,r).map(function(s){return[s.x,s.y]});!fy(o);)t-=t*.01,o=rf(i,t,r).map(function(s){return[s.x,s.y]});return(o[o.length-1][0]!==o[0][0]||o[o.length-1][1]!==o[0][1])&&o.push(o[0]),o})}function fy(e){return e.length<3?!1:!(e.length===3&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}var ly=function(){function e(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var r=0;r<this.length;r++)this.points[r].z=this.points[r].z||0;for(var r=0;r<this.length-1;r++){var n=this.points[r],i=this.points[r+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var r=0;r<this.centers.length-1;r++){var o=this.points[r+1].x-(this.centers[r].x+this.centers[r+1].x)/2,s=this.points[r+1].y-(this.centers[r].y+this.centers[r+1].y)/2,a=this.points[r+1].z-(this.centers[r].y+this.centers[r+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r].z+a)},{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r+1].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r+1].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return e.prototype.cacheSteps=function(t){var r=[],n=this.pos(0);r.push(0);for(var i=0;i<this.duration;i+=10){var o=this.pos(i),s=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z));s>t&&(r.push(i),n=o)}return r},e.prototype.vector=function(t){var r=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(r.y-n.y,r.x-n.x)/3.14,speed:Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y)+(n.z-r.z)*(n.z-r.z))}},e.prototype.pos=function(t){var r=t-this.delay;r<0&&(r=0),r>this.duration&&(r=this.duration-1);var n=r/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n),o=(this.length-1)*n-i;return cy(o,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},e}();function cy(e,t,r,n,i){var o=hy(e),s={x:i.x*o[0]+n.x*o[1]+r.x*o[2]+t.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+t.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+t.z*o[3]};return s}function hy(e){var t=e*e,r=t*e;return[r,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}function Ew(e,t){t===void 0&&(t={});for(var r=t.resolution||1e4,n=t.sharpness||.85,i=[],o=fe(e).coordinates.map(function(f){return{x:f[0],y:f[1]}}),s=new ly({duration:r,points:o,sharpness:n}),a=function(f){var l=s.pos(f);Math.floor(f/100)%2===0&&i.push([l.x,l.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),$t(i,t.properties)}function xw(e,t,r,n){return e=vr(e),t=vr(t),Qt(e,function(i){i.properties||(i.properties={}),Qt(t,function(o){i.properties[n]===void 0&&ce(i,o)&&(i.properties[n]=o.properties[r])})}),e}function ww(e,t){if(!e)throw new Error("featurecollection is required");if(t==null)throw new Error("num is required");if(typeof t!="number")throw new Error("num must be a number");var r=nt(py(e.features,t));return r}function py(e,t){for(var r=e.slice(0),n=e.length,i=n-t,o,s;n-- >i;)s=Math.floor((n+1)*Math.random()),o=r[s],r[s]=r[n],r[n]=o;return r.slice(i)}function pp(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n],a=[r,o],u=[i,o],f=[i,n];return dt([[s,f,u,a,s]],t.properties,{bbox:e,id:t.id})}function gy(e){return pp(Oe(e))}function vy(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=ee(e.slice(0,2),[n,r]),s=ee(e.slice(0,2),[t,i]);if(o>=s){var a=(r+i)/2;return[t,a-(n-t)/2,n,a+(n-t)/2]}else{var u=(t+n)/2;return[u-(i-r)/2,r,u+(i-r)/2,i]}}function hi(e,t,r,n){n===void 0&&(n={});var i=se(e),o=tr(i[0]),s=tr(i[1]),a=tr(r),u=ra(t,n.units),f=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a)),l=o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(f)),c=Do(l),h=Do(f);return pt([c,h],n.properties)}function gp(e,t,r){r===void 0&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[],s=0;s<n;s++)o.push(hi(e,t,s*-360/n,r).geometry.coordinates);return o.push(o[0]),dt([o],i)}function bi(e,t,r){if(r===void 0&&(r={}),r.final===!0)return dy(e,t);var n=se(e),i=se(t),o=tr(n[0]),s=tr(i[0]),a=tr(n[1]),u=tr(i[1]),f=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return Do(Math.atan2(f,l))}function dy(e,t){var r=bi(t,e);return r=(r+180)%360,r}function Iw(e,t){var r=ee(e,t),n=bi(e,t),i=hi(e,r/2,n);return i}function kf(e,t){t===void 0&&(t={});var r=Oe(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return pt([n,i],t.properties,t)}function Zi(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return Le(e,function(o){r+=o[0],n+=o[1],i++},!0),pt([r/i,n/i],t.properties)}function yy(e,t){switch(t===void 0&&(t={}),Gr(e)){case"Point":return pt(se(e),t.properties);case"Polygon":var r=[];Le(e,function(y){r.push(y)});var n=Zi(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,s=0,a=0,u,f,l,c,h,p,d,m,x=r.map(function(y){return[y[0]-i[0],y[1]-i[1]]});for(u=0;u<r.length-1;u++)f=x[u],c=f[0],p=f[1],l=x[u+1],h=l[0],d=l[1],m=c*d-h*p,a+=m,o+=(c+h)*m,s+=(p+d)*m;if(a===0)return n;var _=a*.5,g=1/(6*_);return pt([i[0]+g*o,i[1]+g*s],t.properties);default:var v=dd(e);return v?yy(v,{properties:t.properties}):Zi(e,{properties:t.properties})}}function Cw(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Qt(e,function(r){var n,i,o,s;switch((s=r.geometry)===null||s===void 0?void 0:s.type){case"Point":t.MultiPoint.coordinates.push(r.geometry.coordinates),t.MultiPoint.properties.push(r.properties);break;case"MultiPoint":(n=t.MultiPoint.coordinates).push.apply(n,r.geometry.coordinates),t.MultiPoint.properties.push(r.properties);break;case"LineString":t.MultiLineString.coordinates.push(r.geometry.coordinates),t.MultiLineString.properties.push(r.properties);break;case"MultiLineString":(i=t.MultiLineString.coordinates).push.apply(i,r.geometry.coordinates),t.MultiLineString.properties.push(r.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(r.geometry.coordinates),t.MultiPolygon.properties.push(r.properties);break;case"MultiPolygon":(o=t.MultiPolygon.coordinates).push.apply(o,r.geometry.coordinates),t.MultiPolygon.properties.push(r.properties);break}}),nt(Object.keys(t).filter(function(r){return t[r].coordinates.length}).sort().map(function(r){var n={type:r,coordinates:t[r].coordinates},i={collectedProperties:t[r].properties};return qe(n,i)}))}function qf(e){var t=[];return e.type==="FeatureCollection"?Qt(e,function(r){Le(r,function(n){t.push(pt(n,r.properties))})}):Le(e,function(r){t.push(pt(r,e.properties))}),nt(t)}var zf={exports:{}};zf.exports=iu;zf.exports.default=iu;function iu(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=vp(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,u,f,l,c,h,p;if(n&&(o=wy(e,t,o,r)),e.length>80*r){a=f=e[0],u=l=e[1];for(var d=r;d<i;d+=r)c=e[d],h=e[d+1],c<a&&(a=c),h<u&&(u=h),c>f&&(f=c),h>l&&(l=h);p=Math.max(f-a,l-u),p=p!==0?32767/p:0}return As(o,s,r,a,u,p,0),s}function vp(e,t,r,n,i){var o,s;if(i===sf(e,t,r,n)>0)for(o=t;o<r;o+=n)s=Hl(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=Hl(o,e[o],e[o+1],s);return s&&ou(s,s.next)&&(Ts(s),s=s.next),s}function $i(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(ou(r,r.next)||Pe(r.prev,r,r.next)===0)){if(Ts(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function As(e,t,r,n,i,o,s){if(e){!s&&o&&Py(e,n,i,o);for(var a=e,u,f;e.prev!==e.next;){if(u=e.prev,f=e.next,o?_y(e,n,i,o):my(e)){t.push(u.i/r|0),t.push(e.i/r|0),t.push(f.i/r|0),Ts(e),e=f.next,a=f.next;continue}if(e=f,e===a){s?s===1?(e=Ey($i(e),t,r),As(e,t,r,n,i,o,2)):s===2&&xy(e,t,r,n,i,o):As($i(e),t,r,n,i,o,1);break}}}}function my(e){var t=e.prev,r=e,n=e.next;if(Pe(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,u=r.y,f=n.y,l=i<o?i<s?i:s:o<s?o:s,c=a<u?a<f?a:f:u<f?u:f,h=i>o?i>s?i:s:o>s?o:s,p=a>u?a>f?a:f:u>f?u:f,d=n.next;d!==t;){if(d.x>=l&&d.x<=h&&d.y>=c&&d.y<=p&&No(i,a,o,u,s,f,d.x,d.y)&&Pe(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function _y(e,t,r,n){var i=e.prev,o=e,s=e.next;if(Pe(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,f=s.x,l=i.y,c=o.y,h=s.y,p=a<u?a<f?a:f:u<f?u:f,d=l<c?l<h?l:h:c<h?c:h,m=a>u?a>f?a:f:u>f?u:f,x=l>c?l>h?l:h:c>h?c:h,_=nf(p,d,t,r,n),g=nf(m,x,t,r,n),v=e.prevZ,y=e.nextZ;v&&v.z>=_&&y&&y.z<=g;){if(v.x>=p&&v.x<=m&&v.y>=d&&v.y<=x&&v!==i&&v!==s&&No(a,l,u,c,f,h,v.x,v.y)&&Pe(v.prev,v,v.next)>=0||(v=v.prevZ,y.x>=p&&y.x<=m&&y.y>=d&&y.y<=x&&y!==i&&y!==s&&No(a,l,u,c,f,h,y.x,y.y)&&Pe(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;v&&v.z>=_;){if(v.x>=p&&v.x<=m&&v.y>=d&&v.y<=x&&v!==i&&v!==s&&No(a,l,u,c,f,h,v.x,v.y)&&Pe(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;y&&y.z<=g;){if(y.x>=p&&y.x<=m&&y.y>=d&&y.y<=x&&y!==i&&y!==s&&No(a,l,u,c,f,h,y.x,y.y)&&Pe(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function Ey(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!ou(i,o)&&dp(i,n,n.next,o)&&Ds(i,o)&&Ds(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Ts(n),Ts(n.next),n=e=o),n=n.next}while(n!==e);return $i(n)}function xy(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Oy(s,a)){var u=yp(s,a);s=$i(s,s.next),u=$i(u,u.next),As(s,t,r,n,i,o,0),As(u,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function wy(e,t,r,n){var i=[],o,s,a,u,f;for(o=0,s=t.length;o<s;o++)a=t[o]*n,u=o<s-1?t[o+1]*n:e.length,f=vp(e,a,u,n,!1),f===f.next&&(f.steiner=!0),i.push(Ly(f));for(i.sort(Iy),o=0;o<i.length;o++)r=Cy(i[o],r);return r}function Iy(e,t){return e.x-t.x}function Cy(e,t){var r=Sy(e,t);if(!r)return t;var n=yp(r,e);return $i(n,n.next),$i(r,r.next)}function Sy(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var u=s,f=s.x,l=s.y,c=1/0,h;r=s;do n>=r.x&&r.x>=f&&n!==r.x&&No(i<l?n:o,i,f,l,i<l?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),Ds(r,e)&&(h<c||h===c&&(r.x>s.x||r.x===s.x&&Ny(s,r)))&&(s=r,c=h)),r=r.next;while(r!==u);return s}function Ny(e,t){return Pe(e.prev,e,t.prev)<0&&Pe(t.next,e,e.next)<0}function Py(e,t,r,n){var i=e;do i.z===0&&(i.z=nf(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,My(i)}function My(e){var t,r,n,i,o,s,a,u,f=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<f&&(a++,n=n.nextZ,!!n);t++);for(u=f;a>0||u>0&&n;)a!==0&&(u===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,f*=2}while(s>1);return e}function nf(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Ly(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function No(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function Oy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!by(e,t)&&(Ds(e,t)&&Ds(t,e)&&Ry(e,t)&&(Pe(e.prev,e,t.prev)||Pe(e,t.prev,t))||ou(e,t)&&Pe(e.prev,e,e.next)>0&&Pe(t.prev,t,t.next)>0)}function Pe(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ou(e,t){return e.x===t.x&&e.y===t.y}function dp(e,t,r,n){var i=Ea(Pe(e,t,r)),o=Ea(Pe(e,t,n)),s=Ea(Pe(r,n,e)),a=Ea(Pe(r,n,t));return!!(i!==o&&s!==a||i===0&&_a(e,r,t)||o===0&&_a(e,n,t)||s===0&&_a(r,e,n)||a===0&&_a(r,t,n))}function _a(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Ea(e){return e>0?1:e<0?-1:0}function by(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&dp(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Ds(e,t){return Pe(e.prev,e,e.next)<0?Pe(e,t,e.next)>=0&&Pe(e,e.prev,t)>=0:Pe(e,t,e.prev)<0||Pe(e,e.next,t)<0}function Ry(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function yp(e,t){var r=new of(e.i,e.x,e.y),n=new of(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Hl(e,t,r,n){var i=new of(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ts(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function of(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}iu.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(sf(e,0,o,r));if(i)for(var a=0,u=t.length;a<u;a++){var f=t[a]*r,l=a<u-1?t[a+1]*r:e.length;s-=Math.abs(sf(e,f,l,r))}var c=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;c+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return s===0&&c===0?0:Math.abs((c-s)/s)};function sf(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}iu.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var Ay=zf.exports;const Dy=wi(Ay);function Sw(e){if(!e.geometry||e.geometry.type!=="Polygon"&&e.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return e.geometry.type==="Polygon"?t.features=Wl(e.geometry.coordinates):e.geometry.coordinates.forEach(function(r){t.features=t.features.concat(Wl(r))}),t}function Wl(e){var t=Ty(e),r=2,n=Dy(t.vertices,t.holes,r),i=[],o=[];n.forEach(function(u,f){var l=n[f];o.push([t.vertices[l*r],t.vertices[l*r+1]])});for(var s=0;s<o.length;s+=3){var a=o.slice(s,s+3);a.push(o[s]),i.push(dt([a]))}return i}function Ty(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}function mp(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Qt(t,function(o,s){var a=ee(e,o);a<n&&(i=s,n=a)}),r=vr(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function Fo(e){if(!e)throw new Error("geojson is required");var t=[];return or(e,function(r){Fy(r,t)}),nt(t)}function Fy(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=ot(n);break;case"LineString":r=[ot(n)]}r.forEach(function(i){var o=By(i,e.properties);o.forEach(function(s){s.id=t.length,t.push(s)})})}}function By(e,t){var r=[];return e.reduce(function(n,i){var o=$t([n,i],t);return o.bbox=Gy(n,i),r.push(o),i}),r}function Gy(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s=r<i?r:i,a=n<o?n:o,u=r>i?r:i,f=n>o?n:o;return[s,a,u,f]}var Xf={exports:{}},_p={exports:{}};(function(e,t){(function(r,n){e.exports=n()})($a,function(){function r(g,v,y,E,S){(function C(N,I,b,M,A){for(;M>b;){if(M-b>600){var D=M-b+1,R=I-b+1,k=Math.log(D),F=.5*Math.exp(2*k/3),J=.5*Math.sqrt(k*F*(D-F)/D)*(R-D/2<0?-1:1),H=Math.max(b,Math.floor(I-R*F/D+J)),Q=Math.min(M,Math.floor(I+(D-R)*F/D+J));C(N,I,H,Q,A)}var q=N[I],V=b,U=M;for(n(N,b,I),A(N[M],q)>0&&n(N,b,M);V<U;){for(n(N,V,U),V++,U--;A(N[V],q)<0;)V++;for(;A(N[U],q)>0;)U--}A(N[b],q)===0?n(N,b,U):n(N,++U,M),U<=I&&(b=U+1),I<=U&&(M=U-1)}})(g,v,y||0,E||g.length-1,S||i)}function n(g,v,y){var E=g[v];g[v]=g[y],g[y]=E}function i(g,v){return g<v?-1:g>v?1:0}var o=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(g,v,y){if(!y)return v.indexOf(g);for(var E=0;E<v.length;E++)if(y(g,v[E]))return E;return-1}function a(g,v){u(g,0,g.children.length,v,g)}function u(g,v,y,E,S){S||(S=x(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var C=v;C<y;C++){var N=g.children[C];f(S,g.leaf?E(N):N)}return S}function f(g,v){return g.minX=Math.min(g.minX,v.minX),g.minY=Math.min(g.minY,v.minY),g.maxX=Math.max(g.maxX,v.maxX),g.maxY=Math.max(g.maxY,v.maxY),g}function l(g,v){return g.minX-v.minX}function c(g,v){return g.minY-v.minY}function h(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function p(g){return g.maxX-g.minX+(g.maxY-g.minY)}function d(g,v){return g.minX<=v.minX&&g.minY<=v.minY&&v.maxX<=g.maxX&&v.maxY<=g.maxY}function m(g,v){return v.minX<=g.maxX&&v.minY<=g.maxY&&v.maxX>=g.minX&&v.maxY>=g.minY}function x(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(g,v,y,E,S){for(var C=[v,y];C.length;)if(!((y=C.pop())-(v=C.pop())<=E)){var N=v+Math.ceil((y-v)/E/2)*E;r(g,N,v,y,S),C.push(v,N,N,y)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(g){var v=this.data,y=[];if(!m(g,v))return y;for(var E=this.toBBox,S=[];v;){for(var C=0;C<v.children.length;C++){var N=v.children[C],I=v.leaf?E(N):N;m(g,I)&&(v.leaf?y.push(N):d(g,I)?this._all(N,y):S.push(N))}v=S.pop()}return y},o.prototype.collides=function(g){var v=this.data;if(!m(g,v))return!1;for(var y=[];v;){for(var E=0;E<v.children.length;E++){var S=v.children[E],C=v.leaf?this.toBBox(S):S;if(m(g,C)){if(v.leaf||d(g,C))return!0;y.push(S)}}v=y.pop()}return!1},o.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var v=0;v<g.length;v++)this.insert(g[v]);return this}var y=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===y.height)this._splitRoot(this.data,y);else{if(this.data.height<y.height){var E=this.data;this.data=y,y=E}this._insert(y,this.data.height-y.height-1,!0)}else this.data=y;return this},o.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},o.prototype.clear=function(){return this.data=x([]),this},o.prototype.remove=function(g,v){if(!g)return this;for(var y,E,S,C=this.data,N=this.toBBox(g),I=[],b=[];C||I.length;){if(C||(C=I.pop(),E=I[I.length-1],y=b.pop(),S=!0),C.leaf){var M=s(g,C.children,v);if(M!==-1)return C.children.splice(M,1),I.push(C),this._condense(I),this}S||C.leaf||!d(C,N)?E?(y++,C=E.children[y],S=!1):C=null:(I.push(C),b.push(y),y=0,E=C,C=C.children[0])}return this},o.prototype.toBBox=function(g){return g},o.prototype.compareMinX=function(g,v){return g.minX-v.minX},o.prototype.compareMinY=function(g,v){return g.minY-v.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(g){return this.data=g,this},o.prototype._all=function(g,v){for(var y=[];g;)g.leaf?v.push.apply(v,g.children):y.push.apply(y,g.children),g=y.pop();return v},o.prototype._build=function(g,v,y,E){var S,C=y-v+1,N=this._maxEntries;if(C<=N)return a(S=x(g.slice(v,y+1)),this.toBBox),S;E||(E=Math.ceil(Math.log(C)/Math.log(N)),N=Math.ceil(C/Math.pow(N,E-1))),(S=x([])).leaf=!1,S.height=E;var I=Math.ceil(C/N),b=I*Math.ceil(Math.sqrt(N));_(g,v,y,b,this.compareMinX);for(var M=v;M<=y;M+=b){var A=Math.min(M+b-1,y);_(g,M,A,I,this.compareMinY);for(var D=M;D<=A;D+=I){var R=Math.min(D+I-1,A);S.children.push(this._build(g,D,R,E-1))}}return a(S,this.toBBox),S},o.prototype._chooseSubtree=function(g,v,y,E){for(;E.push(v),!v.leaf&&E.length-1!==y;){for(var S=1/0,C=1/0,N=void 0,I=0;I<v.children.length;I++){var b=v.children[I],M=h(b),A=(D=g,R=b,(Math.max(R.maxX,D.maxX)-Math.min(R.minX,D.minX))*(Math.max(R.maxY,D.maxY)-Math.min(R.minY,D.minY))-M);A<C?(C=A,S=M<S?M:S,N=b):A===C&&M<S&&(S=M,N=b)}v=N||v.children[0]}var D,R;return v},o.prototype._insert=function(g,v,y){var E=y?g:this.toBBox(g),S=[],C=this._chooseSubtree(E,this.data,v,S);for(C.children.push(g),f(C,E);v>=0&&S[v].children.length>this._maxEntries;)this._split(S,v),v--;this._adjustParentBBoxes(E,S,v)},o.prototype._split=function(g,v){var y=g[v],E=y.children.length,S=this._minEntries;this._chooseSplitAxis(y,S,E);var C=this._chooseSplitIndex(y,S,E),N=x(y.children.splice(C,y.children.length-C));N.height=y.height,N.leaf=y.leaf,a(y,this.toBBox),a(N,this.toBBox),v?g[v-1].children.push(N):this._splitRoot(y,N)},o.prototype._splitRoot=function(g,v){this.data=x([g,v]),this.data.height=g.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(g,v,y){for(var E,S,C,N,I,b,M,A=1/0,D=1/0,R=v;R<=y-v;R++){var k=u(g,0,R,this.toBBox),F=u(g,R,y,this.toBBox),J=(S=k,C=F,N=void 0,I=void 0,b=void 0,M=void 0,N=Math.max(S.minX,C.minX),I=Math.max(S.minY,C.minY),b=Math.min(S.maxX,C.maxX),M=Math.min(S.maxY,C.maxY),Math.max(0,b-N)*Math.max(0,M-I)),H=h(k)+h(F);J<A?(A=J,E=R,D=H<D?H:D):J===A&&H<D&&(D=H,E=R)}return E||y-v},o.prototype._chooseSplitAxis=function(g,v,y){var E=g.leaf?this.compareMinX:l,S=g.leaf?this.compareMinY:c;this._allDistMargin(g,v,y,E)<this._allDistMargin(g,v,y,S)&&g.children.sort(E)},o.prototype._allDistMargin=function(g,v,y,E){g.children.sort(E);for(var S=this.toBBox,C=u(g,0,v,S),N=u(g,y-v,y,S),I=p(C)+p(N),b=v;b<y-v;b++){var M=g.children[b];f(C,g.leaf?S(M):M),I+=p(C)}for(var A=y-v-1;A>=v;A--){var D=g.children[A];f(N,g.leaf?S(D):D),I+=p(N)}return I},o.prototype._adjustParentBBoxes=function(g,v,y){for(var E=y;E>=0;E--)f(v[E],g)},o.prototype._condense=function(g){for(var v=g.length-1,y=void 0;v>=0;v--)g[v].children.length===0?v>0?(y=g[v-1].children).splice(y.indexOf(g[v]),1):this.clear():a(g[v],this.toBBox)},o})})(_p);var ky=_p.exports;const qy=ja(Mv),zy=ja(Av),Xy=ja(Dv);var Vn=ky,Ep=qy,xp=zy,Eo=Xy.default,Uy=xp.featureEach;xp.coordEach;Ep.polygon;var Jl=Ep.featureCollection;function wp(e){var t=new Vn(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Eo(r),Vn.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Eo(i),n.push(i)}):Uy(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Eo(i),n.push(i)}),Vn.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Eo(r),Vn.prototype.remove.call(this,r,n)},t.clear=function(){return Vn.prototype.clear.call(this)},t.search=function(r){var n=Vn.prototype.search.call(this,this.toBBox(r));return Jl(n)},t.collides=function(r){return Vn.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=Vn.prototype.all.call(this);return Jl(r)},t.toJSON=function(){return Vn.prototype.toJSON.call(this)},t.fromJSON=function(r){return Vn.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=Eo(r);else if(r.type==="FeatureCollection")n=Eo(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}Xf.exports=wp;Xf.exports.default=wp;var Yy=Xf.exports;const su=wi(Yy);function Ui(e,t){var r={},n=[];if(e.type==="LineString"&&(e=qe(e)),t.type==="LineString"&&(t=qe(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=Kl(e,t);return i&&n.push(i),nt(n)}var o=su();return o.load(Fo(t)),Qt(Fo(e),function(s){Qt(o.search(s),function(a){var u=Kl(s,a);if(u){var f=ot(u).join(",");r[f]||(r[f]=!0,n.push(u))}})}),nt(n)}function Kl(e,t){var r=ot(e),n=ot(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],u=n[0][0],f=n[0][1],l=n[1][0],c=n[1][1],h=(c-f)*(s-i)-(l-u)*(a-o),p=(l-u)*(o-f)-(c-f)*(i-u),d=(s-i)*(o-f)-(a-o)*(i-u);if(h===0)return null;var m=p/h,x=d/h;if(m>=0&&m<=1&&x>=0&&x<=1){var _=i+m*(s-i),g=o+m*(a-o);return pt([_,g])}return null}function Ji(e,t,r){r===void 0&&(r={});var n=pt([1/0,1/0],{dist:1/0}),i=0;return or(e,function(o){for(var s=ot(o),a=0;a<s.length-1;a++){var u=pt(s[a]);u.properties.dist=ee(t,u,r);var f=pt(s[a+1]);f.properties.dist=ee(t,f,r);var l=ee(u,f,r),c=Math.max(u.properties.dist,f.properties.dist),h=bi(u,f),p=hi(t,c,h+90,r),d=hi(t,c,h-90,r),m=Ui($t([p.geometry.coordinates,d.geometry.coordinates]),$t([u.geometry.coordinates,f.geometry.coordinates])),x=null;m.features.length>0&&(x=m.features[0],x.properties.dist=ee(t,x,r),x.properties.location=i+ee(u,x,r)),u.properties.dist<n.properties.dist&&(n=u,n.properties.index=a,n.properties.location=i),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=a+1,n.properties.location=i+l),x&&x.properties.dist<n.properties.dist&&(n=x,n.properties.index=a),i+=l}}),n}function Uf(e,t,r){r===void 0&&(r={});var n=se(e),i=se(t);i[0]+=i[0]-n[0]>180?-360:n[0]-i[0]>180?360:0;var o=Vy(n,i),s=na(o,"meters",r.units);return s}function Vy(e,t,r){r=r===void 0?Ye:Number(r);var n=r,i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,s=o-i,a=Math.abs(t[0]-e[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(u)>1e-11?s/u:Math.cos(i),l=Math.sqrt(s*s+f*f*a*a),c=l*n;return c}function Hy(e,t,r){if(r===void 0&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=pt(e):e.type==="Point"?e=qe(e):Aa(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=$t(t):t.type==="LineString"?t=qe(t):Aa(t,"LineString","line");var n=1/0,i=e.geometry.coordinates;return Pi(t,function(o){var s=o.geometry.coordinates[0],a=o.geometry.coordinates[1],u=Wy(i,s,a,r);u<n&&(n=u)}),na(n,"degrees",r.units)}function Wy(e,t,r,n){var i=[r[0]-t[0],r[1]-t[1]],o=[e[0]-t[0],e[1]-t[1]],s=Ql(o,i);if(s<=0)return Du(e,t,{method:n.method,units:"degrees"});var a=Ql(i,i);if(a<=s)return Du(e,r,{method:n.method,units:"degrees"});var u=s/a,f=[t[0]+u*i[0],t[1]+u*i[1]];return Du(e,f,{method:n.method,units:"degrees"})}function Ql(e,t){return e[0]*t[0]+e[1]*t[1]}function Du(e,t,r){return r.method==="planar"?Uf(e,t,r):ee(e,t,r)}function Nw(e,t,r){r===void 0&&(r={});var n=r.units,i=r.properties||{},o=Jy(e);if(!o.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if(Gr(t)!=="LineString")throw new Error("line must be a LineString");var s=1/0,a=null;return Qt(o,function(u){var f=Hy(u,t,{units:n});f<s&&(s=f,a=u)}),a&&(a.properties=Rf({dist:s},a.properties,i)),a}function Jy(e){var t=[],r=e.geometry?e.geometry.type:e.type;switch(r){case"GeometryCollection":return Zr(e,function(n){n.type==="Point"&&t.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(n){return n.geometry.type==="Point"}),e;default:throw new Error("points must be a Point Collection")}}function Pw(e,t){var r=se(e),n=fe(t),i=n.coordinates,o=i[0];if(o.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var s=t.properties||{},a=s.a,u=s.b,f=s.c,l=r[0],c=r[1],h=o[0][0],p=o[0][1],d=a!==void 0?a:o[0][2],m=o[1][0],x=o[1][1],_=u!==void 0?u:o[1][2],g=o[2][0],v=o[2][1],y=f!==void 0?f:o[2][2],E=(y*(l-h)*(c-x)+d*(l-m)*(c-v)+_*(l-g)*(c-p)-_*(l-h)*(c-v)-y*(l-m)*(c-p)-d*(l-g)*(c-x))/((l-h)*(c-x)+(l-m)*(c-v)+(l-g)*(c-p)-(l-h)*(c-v)-(l-m)*(c-p)-(l-g)*(c-x));return E}function Mw(e){var t,r,n={type:"FeatureCollection",features:[]};if(e.type==="Feature"?r=e.geometry:r=e,r.type==="LineString")t=[r.coordinates];else if(r.type==="MultiLineString")t=r.coordinates;else if(r.type==="MultiPolygon")t=[].concat.apply([],r.coordinates);else if(r.type==="Polygon")t=r.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return t.forEach(function(i){t.forEach(function(o){for(var s=0;s<i.length-1;s++)for(var a=s;a<o.length-1;a++)if(!(i===o&&(Math.abs(s-a)===1||s===0&&a===i.length-2&&i[s][0]===i[i.length-1][0]&&i[s][1]===i[i.length-1][1]))){var u=Ky(i[s][0],i[s][1],i[s+1][0],i[s+1][1],o[a][0],o[a][1],o[a+1][0],o[a+1][1]);u&&n.features.push(pt([u[0],u[1]]))}})}),n}function Ky(e,t,r,n,i,o,s,a){var u,f,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-o)*(r-e)-(s-i)*(n-t),u===0?p.x!==null&&p.y!==null?p:!1:(f=t-o,l=e-i,c=(s-i)*f-(a-o)*l,h=(r-e)*f-(n-t)*l,f=c/u,l=h/u,p.x=e+f*(r-e),p.y=t+f*(n-t),f>=0&&f<=1&&(p.onLine1=!0),l>=0&&l<=1&&(p.onLine2=!0),p.onLine1&&p.onLine2?[p.x,p.y]:!1)}function Lw(e){for(var t=Qy(e),r=kf(t),n=!1,i=0;!n&&i<t.features.length;){var o=t.features[i].geometry,s,a,u,f,l,c,h,p=!1;if(o.type==="Point")r.geometry.coordinates[0]===o.coordinates[0]&&r.geometry.coordinates[1]===o.coordinates[1]&&(n=!0);else if(o.type==="MultiPoint"){var d=!1;for(h=0;!d&&h<o.coordinates.length;)r.geometry.coordinates[0]===o.coordinates[h][0]&&r.geometry.coordinates[1]===o.coordinates[h][1]&&(n=!0,d=!0),h++}else if(o.type==="LineString")for(h=0;!p&&h<o.coordinates.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],u=o.coordinates[h][0],f=o.coordinates[h][1],l=o.coordinates[h+1][0],c=o.coordinates[h+1][1],Zl(s,a,u,f,l,c)&&(p=!0,n=!0),h++;else if(o.type==="MultiLineString")for(var m=0;m<o.coordinates.length;){p=!1,h=0;for(var x=o.coordinates[m];!p&&h<x.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],u=x[h][0],f=x[h][1],l=x[h+1][0],c=x[h+1][1],Zl(s,a,u,f,l,c)&&(p=!0,n=!0),h++;m++}else(o.type==="Polygon"||o.type==="MultiPolygon")&&ce(r,o)&&(n=!0);i++}if(n)return r;var _=nt([]);for(i=0;i<t.features.length;i++)_.features=_.features.concat(qf(t.features[i]).features);return pt(mp(r,_).geometry.coordinates)}function Qy(e){return e.type!=="FeatureCollection"?e.type!=="Feature"?nt([qe(e)]):nt([e]):e}function Zl(e,t,r,n,i,o){var s=Math.sqrt((i-r)*(i-r)+(o-n)*(o-n)),a=Math.sqrt((e-r)*(e-r)+(t-n)*(t-n)),u=Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));return s===a+u}var $l=6378137;function Ip(e){return Qh(e,function(t,r){return t+Zy(r)},0)}function Zy(e){var t=0,r;switch(e.type){case"Polygon":return jl(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=jl(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function jl(e){var t=0;if(e&&e.length>0){t+=Math.abs(tc(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(tc(e[r]))}return t}function tc(e){var t,r,n,i,o,s,a,u=0,f=e.length;if(f>2){for(a=0;a<f;a++)a===f-2?(i=f-2,o=f-1,s=0):a===f-1?(i=f-1,o=0,s=1):(i=a,o=a+1,s=a+2),t=e[i],r=e[o],n=e[s],u+=(Tu(n[0])-Tu(t[0]))*Math.sin(Tu(r[1]));u=u*$l*$l/2}return u}function Tu(e){return e*Math.PI/180}function Ow(e,t,r){r===void 0&&(r={});for(var n=fe(e),i=n.coordinates,o=0,s=0;s<i.length&&!(t>=o&&s===i.length-1);s++)if(o>=t){var a=t-o;if(a){var u=bi(i[s],i[s-1])-180,f=hi(i[s],a,u,r);return f}else return pt(i[s])}else o+=ee(i[s],i[s+1],r);return pt(i[i.length-1])}function $y(e,t){return t===void 0&&(t={}),Zh(e,function(r,n){var i=n.geometry.coordinates;return r+ee(i[0],i[1],t)},0)}function bw(e,t,r){var n=ot(r);if(Gr(r)!=="LineString")throw new Error("line must be a LineString");var i=Ji(r,e),o=Ji(r,t),s;i.properties.index<=o.properties.index?s=[i,o]:s=[o,i];for(var a=[s[0].geometry.coordinates],u=s[0].properties.index+1;u<s[1].properties.index+1;u++)a.push(n[u]);return a.push(s[1].geometry.coordinates),$t(a,r.properties)}function jy(e,t,r,n){if(n=n||{},!re(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var s=i.length,a=0,u,f,l,c=0;c<i.length&&!(t>=a&&c===i.length-1);c++){if(a>t&&o.length===0){if(u=t-a,!u)return o.push(i[c]),$t(o);f=bi(i[c],i[c-1])-180,l=hi(i[c],u,f,n),o.push(l.geometry.coordinates)}if(a>=r)return u=r-a,u?(f=bi(i[c],i[c-1])-180,l=hi(i[c],u,f,n),o.push(l.geometry.coordinates),$t(o)):(o.push(i[c]),$t(o));if(a>=t&&o.push(i[c]),c===i.length-1)return $t(o);a+=ee(i[c],i[c+1],n)}if(a<t&&i.length===s)throw new Error("Start position is beyond line");var h=i[i.length-1];return $t([h,h])}function Wr(e,t,r){r===void 0&&(r={});for(var n=se(e),i=ot(t),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(o===0&&(s="start"),o===i.length-2&&(s="end"),o===0&&o+1===i.length-1&&(s="both")),t0(i[o],i[o+1],n,s,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function t0(e,t,r,n,i){var o=r[0],s=r[1],a=e[0],u=e[1],f=t[0],l=t[1],c=r[0]-a,h=r[1]-u,p=f-a,d=l-u,m=c*d-h*p;if(i!==null){if(Math.abs(m)>i)return!1}else if(m!==0)return!1;if(n){if(n==="start")return Math.abs(p)>=Math.abs(d)?p>0?a<o&&o<=f:f<=o&&o<a:d>0?u<s&&s<=l:l<=s&&s<u;if(n==="end")return Math.abs(p)>=Math.abs(d)?p>0?a<=o&&o<f:f<o&&o<=a:d>0?u<=s&&s<l:l<s&&s<=u;if(n==="both")return Math.abs(p)>=Math.abs(d)?p>0?a<o&&o<f:f<o&&o<a:d>0?u<s&&s<l:l<s&&s<u}else return Math.abs(p)>=Math.abs(d)?p>0?a<=o&&o<=f:f<=o&&o<=a:d>0?u<=s&&s<=l:l<=s&&s<=u;return!1}function e0(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return r0(r,n);case"LineString":return Wr(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ce(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return n0(r,n);case"LineString":return i0(r,n);case"Polygon":case"MultiPolygon":return o0(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return s0(r,n);case"Polygon":case"MultiPolygon":return a0(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return u0(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function r0(e,t){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(Sp(t.coordinates[r],e.coordinates)){n=!0;break}return n}function n0(e,t){for(var r=0;r<e.coordinates.length;r++){for(var n=!1,i=0;i<t.coordinates.length;i++)Sp(e.coordinates[r],t.coordinates[i])&&(n=!0);if(!n)return!1}return!0}function i0(e,t){for(var r=!1,n=0;n<e.coordinates.length;n++){if(!Wr(e.coordinates[n],t))return!1;r||(r=Wr(e.coordinates[n],t,{ignoreEndVertices:!0}))}return r}function o0(e,t){for(var r=!0,n=!1,i=0;i<e.coordinates.length;i++){if(n=ce(e.coordinates[1],t),!n){r=!1;break}n=ce(e.coordinates[1],t,{ignoreBoundary:!0})}return r&&n}function s0(e,t){for(var r=0;r<e.coordinates.length;r++)if(!Wr(e.coordinates[r],t))return!1;return!0}function a0(e,t){var r=Oe(t),n=Oe(e);if(!Cp(r,n))return!1;for(var i=!1,o=0;o<e.coordinates.length-1;o++){if(!ce(e.coordinates[o],t))return!1;if(i||(i=ce(e.coordinates[o],t,{ignoreBoundary:!0})),!i){var s=f0(e.coordinates[o],e.coordinates[o+1]);i=ce(s,t,{ignoreBoundary:!0})}}return i}function u0(e,t){var r=Oe(e),n=Oe(t);if(!Cp(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!ce(e.coordinates[0][i],t))return!1;return!0}function Cp(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function Sp(e,t){return e[0]===t[0]&&e[1]===t[1]}function f0(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function l0(e,t,r){r===void 0&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=e[0],o=e[1],s=e[2],a=e[3],u=t/ee([i,o],[s,o],r),f=u*(s-i),l=t/ee([i,o],[i,a],r),c=l*(a-o),h=s-i,p=a-o,d=Math.floor(h/f),m=Math.floor(p/c),x=(h-d*f)/2,_=(p-m*c)/2,g=i+x;g<=s;){for(var v=o+_;v<=a;){var y=pt([g,v],r.properties);r.mask?e0(y,r.mask)&&n.push(y):n.push(y),v+=c}g+=f}return nt(n)}function c0(e,t){t===void 0&&(t={});var r=t.precision,n=t.coordinates,i=t.mutate;if(r=r==null||isNaN(r)?6:r,n=n==null||isNaN(n)?3:n,!e)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(i===!1||i===void 0)&&(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,r);return Le(e,function(s){h0(s,o,n)}),e}function h0(e,t,r){e.length>r&&e.splice(r,e.length);for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t;return e}function ec(e){if(!e)throw new Error("geojson is required");var t=[];return or(e,function(r){t.push(r)}),nt(t)}function Rw(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return or(e,function(s){i&&(s.geometry.coordinates=s.geometry.coordinates.reverse()),p0(s,t,n,function(a){o.push(a)})}),nt(o)}function p0(e,t,r,n){var i=$y(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=jy(e,t*s,t*(s+1),{units:r});n(a,s)}}function g0(e,t,r){if(e.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");r===void 0&&(r=1);var n=e.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var u=0;u<n[a].length-1;u++)s.push(x(a,u));var f=Gf();f.load(s)}for(var l=0;l<n.length;l++)for(var c=0;c<n[l].length-1;c++)if(r){var h=f.search(x(l,c));h.forEach(function(_){var g=_.ring,v=_.edge;m(l,c,g,v)})}else for(var p=0;p<n.length;p++)for(var d=0;d<n[p].length-1;d++)m(l,c,p,d);return t||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function m(_,g,v,y){var E=n[_][g],S=n[_][g+1],C=n[v][y],N=n[v][y+1],I=v0(E,S,C,N);if(I!==null){var b,M;if(S[0]!==E[0]?b=(I[0]-E[0])/(S[0]-E[0]):b=(I[1]-E[1])/(S[1]-E[1]),N[0]!==C[0]?M=(I[0]-C[0])/(N[0]-C[0]):M=(I[1]-C[1])/(N[1]-C[1]),!(b>=1||b<=0||M>=1||M<=0)){var A=I,D=!o[A];D&&(o[A]=!0),t?i.push(t(I,_,g,E,S,b,v,y,C,N,M,D)):i.push(I)}}}function x(_,g){var v=n[_][g],y=n[_][g+1],E,S,C,N;return v[0]<y[0]?(E=v[0],S=y[0]):(E=y[0],S=v[0]),v[1]<y[1]?(C=v[1],N=y[1]):(C=y[1],N=v[1]),{minX:E,minY:C,maxX:S,maxY:N,ring:_,edge:g}}}function v0(e,t,r,n){if(xs(e,r)||xs(e,n)||xs(t,r)||xs(n,r))return null;var i=e[0],o=e[1],s=t[0],a=t[1],u=r[0],f=r[1],l=n[0],c=n[1],h=(i-s)*(f-c)-(o-a)*(u-l);if(h===0)return null;var p=((i*a-o*s)*(u-l)-(i-s)*(u*c-f*l))/h,d=((i*a-o*s)*(f-c)-(o-a)*(u*c-f*l))/h;return[p,d]}function xs(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!xs(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0}function d0(e){if(e.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(e.geometry===void 0||e.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(e.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,r=[],g=0;g<t;g++){var n=e.geometry.coordinates[g];ws(n[0],n[n.length-1])||n.push(n[0]),r.push.apply(r,n.slice(0,n.length-1))}if(!m0(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=r.length,o=g0(e,function(it,gt,ht,ne,_r,Re,lr,cr,Yn,Dr,Yr,Vr){return[it,gt,ht,ne,_r,Re,lr,cr,Yn,Dr,Yr,Vr]}),s=o.length;if(s==0){for(var C=[],g=0;g<t;g++)C.push(dt([e.geometry.coordinates[g]],{parent:-1,winding:y0(e.geometry.coordinates[g])}));var Q=nt(C);return q(),V(),Q}for(var a=[],u=[],g=0;g<t;g++){a.push([]);for(var f=0;f<e.geometry.coordinates[g].length-1;f++)a[g].push([new rc(e.geometry.coordinates[g][Po(f+1,e.geometry.coordinates[g].length-1)],1,[g,f],[g,Po(f+1,e.geometry.coordinates[g].length-1)],void 0)]),u.push(new nc(e.geometry.coordinates[g][f],[g,Po(f-1,e.geometry.coordinates[g].length-1)],[g,f],void 0,void 0,!1,!0))}for(var g=0;g<s;g++)a[o[g][1]][o[g][2]].push(new rc(o[g][0],o[g][5],[o[g][1],o[g][2]],[o[g][6],o[g][7]],void 0)),o[g][11]&&u.push(new nc(o[g][0],[o[g][1],o[g][2]],[o[g][6],o[g][7]],void 0,void 0,!0,!0));for(var l=u.length,g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)a[g][f].sort(function(gt,ht){return gt.param<ht.param?-1:1});for(var c=[],g=0;g<l;g++)c.push({minX:u[g].coord[0],minY:u[g].coord[1],maxX:u[g].coord[0],maxY:u[g].coord[1],index:g});var h=Gf();h.load(c);for(var g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)for(var p=0;p<a[g][f].length;p++){var d;p==a[g][f].length-1?d=a[g][Po(f+1,e.geometry.coordinates[g].length-1)][0].coord:d=a[g][f][p+1].coord;var m=h.search({minX:d[0],minY:d[1],maxX:d[0],maxY:d[1]})[0];a[g][f][p].nxtIsectAlongEdgeIn=m.index}for(var g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)for(var p=0;p<a[g][f].length;p++){var d=a[g][f][p].coord,m=h.search({minX:d[0],minY:d[1],maxX:d[0],maxY:d[1]})[0],x=m.index;x<i?u[x].nxtIsectAlongRingAndEdge2=a[g][f][p].nxtIsectAlongEdgeIn:ws(u[x].ringAndEdge1,a[g][f][p].ringAndEdgeIn)?u[x].nxtIsectAlongRingAndEdge1=a[g][f][p].nxtIsectAlongEdgeIn:u[x].nxtIsectAlongRingAndEdge2=a[g][f][p].nxtIsectAlongEdgeIn}for(var _=[],g=0,f=0;f<t;f++){for(var v=g,p=0;p<e.geometry.coordinates[f].length-1;p++)u[g].coord[0]<u[v].coord[0]&&(v=g),g++;for(var y=u[v].nxtIsectAlongRingAndEdge2,p=0;p<u.length;p++)if(u[p].nxtIsectAlongRingAndEdge1==v||u[p].nxtIsectAlongRingAndEdge2==v){var E=p;break}var S=Pa([u[E].coord,u[v].coord,u[y].coord],!0)?1:-1;_.push({isect:v,parent:-1,winding:S})}_.sort(function(ft,it){return u[ft.isect].coord>u[it.isect].coord?-1:1});for(var C=[];_.length>0;){var N=_.pop(),I=N.isect,b=N.parent,M=N.winding,A=C.length,D=[u[I].coord],R=I;if(u[I].ringAndEdge1Walkable)var k=u[I].ringAndEdge1,F=u[I].nxtIsectAlongRingAndEdge1;else var k=u[I].ringAndEdge2,F=u[I].nxtIsectAlongRingAndEdge2;for(;!ws(u[I].coord,u[F].coord);){D.push(u[F].coord);for(var J=void 0,g=0;g<_.length;g++)if(_[g].isect==F){J=g;break}if(J!=null&&_.splice(J,1),ws(k,u[F].ringAndEdge1)){if(k=u[F].ringAndEdge2,u[F].ringAndEdge2Walkable=!1,u[F].ringAndEdge1Walkable){var H={isect:F};Pa([u[R].coord,u[F].coord,u[u[F].nxtIsectAlongRingAndEdge2].coord],M==1)?(H.parent=b,H.winding=-M):(H.parent=A,H.winding=M),_.push(H)}R=F,F=u[F].nxtIsectAlongRingAndEdge2}else{if(k=u[F].ringAndEdge1,u[F].ringAndEdge1Walkable=!1,u[F].ringAndEdge2Walkable){var H={isect:F};Pa([u[R].coord,u[F].coord,u[u[F].nxtIsectAlongRingAndEdge1].coord],M==1)?(H.parent=b,H.winding=-M):(H.parent=A,H.winding=M),_.push(H)}R=F,F=u[F].nxtIsectAlongRingAndEdge1}}D.push(u[F].coord),C.push(dt([D],{index:A,parent:b,winding:M,netWinding:void 0}))}var Q=nt(C);q(),V();function q(){for(var ft=[],it=0;it<Q.features.length;it++)Q.features[it].properties.parent==-1&&ft.push(it);if(ft.length>1)for(var it=0;it<ft.length;it++){for(var gt=-1,ht=1/0,ne=0;ne<Q.features.length;ne++)ft[it]!=ne&&ce(Q.features[ft[it]].geometry.coordinates[0][0],Q.features[ne],{ignoreBoundary:!0})&&Ip(Q.features[ne])<ht&&(gt=ne);Q.features[ft[it]].properties.parent=gt}}function V(){for(var ft=0;ft<Q.features.length;ft++)if(Q.features[ft].properties.parent==-1){var it=Q.features[ft].properties.winding;Q.features[ft].properties.netWinding=it,U(ft,it)}}function U(ft,it){for(var gt=0;gt<Q.features.length;gt++)if(Q.features[gt].properties.parent==ft){var ht=it+Q.features[gt].properties.winding;Q.features[gt].properties.netWinding=ht,U(gt,ht)}}return Q}var rc=function(e,t,r,n,i){this.coord=e,this.param=t,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},nc=function(e,t,r,n,i,o,s){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Pa(e,t){if(typeof t>"u"&&(t=!0),e.length!=3)throw new Error("This function requires an array of three points [x,y]");var r=(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0]);return r>=0==t}function y0(e){for(var t=0,r=0;r<e.length-1;r++)e[r][0]<e[t][0]&&(t=r);if(Pa([e[Po(t-1,e.length-1)],e[t],e[Po(t+1,e.length-1)]],!0))var n=1;else var n=-1;return n}function ws(e,t){if(!e||!t||e.length!=t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!ws(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}function Po(e,t){return(e%t+t)%t}function m0(e){for(var t={},r=1,n=0,i=e.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(t,e[n])){r=0;break}t[e[n]]=1}return r}function Aw(e){var t=[];return or(e,function(r){r.geometry.type==="Polygon"&&Qt(d0(r),function(n){t.push(dt(n.geometry.coordinates,r.properties))})}),nt(t)}var ic=Math.PI/180,oc=180/Math.PI,Fs=function(e,t){this.lon=e,this.lat=t,this.x=ic*e,this.y=ic*t};Fs.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};Fs.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Fs(t,e)};var Np=function(){this.coords=[],this.length=0};Np.prototype.move_to=function(e){this.length++,this.coords.push(e)};var Yf=function(e){this.properties=e||{},this.geometries=[]};Yf.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}};Yf.prototype.wkt=function(){for(var e="",t="LINESTRING(",r=function(o){t+=o[0]+" "+o[1]+","},n=0;n<this.geometries.length;n++){if(this.geometries[n].coords.length===0)return"LINESTRING(empty)";var i=this.geometries[n].coords;i.forEach(r),e+=t.substring(0,t.length-1)+")"}return e};var Vf=function(e,t,r){if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Fs(e.x,e.y),this.end=new Fs(t.x,t.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};Vf.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),r=Math.sin(e*this.g)/Math.sin(this.g),n=t*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=oc*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2))),a=oc*Math.atan2(i,n);return[a,s]};Vf.prototype.Arc=function(e,t){var r=[];if(!e||e<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(e-1),i=0;i<e;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,f=t&&t.offset?t.offset:10,l=180-f,c=-180+f,h=360-f,p=1;p<r.length;++p){var d=r[p-1][0],m=r[p][0],x=Math.abs(m-d);x>h&&(m>l&&d<c||d>l&&m<c)?a=!0:x>u&&(u=x)}var _=[];if(a&&u<f){var g=[];_.push(g);for(var v=0;v<r.length;++v){var y=parseFloat(r[v][0]);if(v>0&&Math.abs(y-r[v-1][0])>h){var E=parseFloat(r[v-1][0]),S=parseFloat(r[v-1][1]),C=parseFloat(r[v][0]),N=parseFloat(r[v][1]);if(E>-180&&E<c&&C===180&&v+1<r.length&&r[v-1][0]>-180&&r[v-1][0]<c){g.push([-180,r[v][1]]),v++,g.push([r[v][0],r[v][1]]);continue}else if(E>l&&E<180&&C===-180&&v+1<r.length&&r[v-1][0]>l&&r[v-1][0]<180){g.push([180,r[v][1]]),v++,g.push([r[v][0],r[v][1]]);continue}if(E<c&&C>l){var I=E;E=C,C=I;var b=S;S=N,N=b}if(E>l&&C<c&&(C+=360),E<=180&&C>=180&&E<C){var M=(180-E)/(C-E),A=M*N+(1-M)*S;g.push([r[v-1][0]>l?180:-180,A]),g=[],g.push([r[v-1][0]>l?-180:180,A]),_.push(g)}else g=[],_.push(g);g.push([y,r[v][1]])}else g.push([r[v][0],r[v][1]])}}else{var D=[];_.push(D);for(var R=0;R<r.length;++R)D.push([r[R][0],r[R][1]])}for(var k=new Yf(this.properties),F=0;F<_.length;++F){var J=new Np;k.geometries.push(J);for(var H=_[F],Q=0;Q<H.length;++Q)J.move_to(H[Q])}return k};function Dw(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;e=se(e),t=se(t),n=n||{},i=i||100,o=o||10;var s=new Vf({x:e[0],y:e[1]},{x:t[0],y:t[1]},n),a=s.Arc(i,{offset:o});return a.json()}function Tw(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var r=Gr(e),n=Gr(t);if(r!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=c0(t,{precision:7});switch(n){case"Point":return af(e,i);case"MultiPoint":return sc(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return sc(e,Ui(e,i))}}function sc(e,t){var r=[],n=su();return or(t,function(i){if(r.forEach(function(a,u){a.id=u}),!r.length)r=af(e,i).features,r.forEach(function(a){a.bbox||(a.bbox=vy(Oe(a)))}),n.load(nt(r));else{var o=n.search(i);if(o.features.length){var s=Pp(i,o);r=r.filter(function(a){return a.id!==s.id}),n.remove(s),Qt(af(s,i),function(a){r.push(a),n.insert(a)})}}}),nt(r)}function af(e,t){var r=[],n=ot(e)[0],i=ot(e)[e.geometry.coordinates.length-1];if(Fu(n,se(t))||Fu(i,se(t)))return nt([e]);var o=su(),s=Fo(e);o.load(s);var a=o.search(t);if(!a.features.length)return nt([e]);var u=Pp(t,a),f=[n],l=Kh(s,function(c,h,p){var d=ot(h)[1],m=se(t);return p===u.id?(c.push(m),r.push($t(c)),Fu(m,d)?[m]:[m,d]):(c.push(d),c)},f);return l.length>1&&r.push($t(l)),nt(r)}function Pp(e,t){if(!t.features.length)throw new Error("lines must contain features");if(t.features.length===1)return t.features[0];var r,n=1/0;return Qt(t,function(i){var o=Ji(i,e),s=o.properties.dist;s<n&&(r=i,n=s)}),r}function Fu(e,t){return e[0]===t[0]&&e[1]===t[1]}function _0(e,t,r,n,i){i===void 0&&(i={});var o=i.steps||64,s=ac(r),a=ac(n),u=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(s===a)return $t(gp(e,t,i).geometry.coordinates[0],u);for(var f=s,l=s<a?a:a+360,c=f,h=[],p=0;c<l;)h.push(hi(e,t,c,i).geometry.coordinates),p++,c=f+p*360/o;return c>l&&h.push(hi(e,t,l,i).geometry.coordinates),$t(h,u)}function ac(e){var t=e%360;return t<0&&(t+=360),t}function uf(e,t){t===void 0&&(t={});var r=fe(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),r.type){case"Polygon":return Mp(r,t);case"MultiPolygon":return E0(r,t);default:throw new Error("invalid poly")}}function Mp(e,t){t===void 0&&(t={});var r=fe(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return Lp(n,i)}function E0(e,t){t===void 0&&(t={});var r=fe(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return n.forEach(function(s){o.push(Lp(s,i))}),nt(o)}function Lp(e,t){return e.length>1?ho(e,t):$t(e[0],t)}function Fw(e,t){t===void 0&&(t={});var r,n,i,o=t.properties,s=(r=t.autoComplete)!==null&&r!==void 0?r:!0,a=(n=t.orderCoords)!==null&&n!==void 0?n:!0,u=(i=t.mutate)!==null&&i!==void 0?i:!1;switch(u||(e=vr(e)),e.type){case"FeatureCollection":var f=[];return e.features.forEach(function(l){f.push(ot(uc(l,{},s,a)))}),Qr(f,o);default:return uc(e,o,s,a)}}function uc(e,t,r,n){t=t||(e.type==="Feature"?e.properties:{});var i=fe(e),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=fc(o)),dt([o],t);case"MultiLineString":var a=[],u=0;return o.forEach(function(f){if(r&&(f=fc(f)),n){var l=x0(Oe($t(f)));l>u?(a.unshift(f),u=l):a.push(f)}else a.push(f)}),dt(a,t);default:throw new Error("geometry type "+s+" is not supported")}}function fc(e){var t=e[0],r=t[0],n=t[1],i=e[e.length-1],o=i[0],s=i[1];return(r!==o||n!==s)&&e.push(t),e}function x0(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.abs(t-n)*Math.abs(r-i)}function w0(e,t,r){var n=e.length,i=Mo(e[0],t),o=[],s,a,u,f,l;for(r||(r=[]),s=1;s<n;s++){for(f=e[s-1],l=e[s],a=u=Mo(l,t);;)if(i|a){if(i&a)break;i?(f=ff(f,l,i,t),i=Mo(f,t)):(l=ff(f,l,a,t),a=Mo(l,t))}else{o.push(f),a!==u?(o.push(l),s<n-1&&(r.push(o),o=[])):s===n-1&&o.push(l);break}i=u}return o.length&&r.push(o),r}function I0(e,t){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],i=e[e.length-1],o=!(Mo(i,t)&n),s=0;s<e.length;s++)a=e[s],u=!(Mo(a,t)&n),u!==o&&r.push(ff(i,a,n,t)),u&&r.push(a),i=a,o=u;if(e=r,!e.length)break}return r}function ff(e,t,r,n){return r&8?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:r&4?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:r&2?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:r&1?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function Mo(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function Bw(e,t){var r=fe(e),n=r.type,i=e.type==="Feature"?e.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":{var s=[];return n==="LineString"&&(o=[o]),o.forEach(function(a){w0(a,t,s)}),s.length===1?$t(s[0],i):ho(s,i)}case"Polygon":return dt(lc(o,t),i);case"MultiPolygon":return Qr(o.map(function(a){return lc(a,t)}),i);default:throw new Error("geometry "+n+" not supported")}}function lc(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=I0(o,t);s.length>0&&((s[0][0]!==s[s.length-1][0]||s[0][1]!==s[s.length-1][1])&&s.push(s[0]),s.length>=4&&r.push(s))}return r}var cc=Object.prototype.toString,Op=function(t){var r=cc.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&cc.call(t.callee)==="[object Function]"),n},Bu,hc;function C0(){if(hc)return Bu;hc=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Op,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var p=h.constructor;return p&&p.prototype===h},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!f["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),c=function(h){if(typeof window>"u"||!l)return u(h);try{return u(h)}catch{return!1}};e=function(p){var d=p!==null&&typeof p=="object",m=r.call(p)==="[object Function]",x=n(p),_=d&&r.call(p)==="[object String]",g=[];if(!d&&!m&&!x)throw new TypeError("Object.keys called on a non-object");var v=s&&m;if(_&&p.length>0&&!t.call(p,0))for(var y=0;y<p.length;++y)g.push(String(y));if(x&&p.length>0)for(var E=0;E<p.length;++E)g.push(String(E));else for(var S in p)!(v&&S==="prototype")&&t.call(p,S)&&g.push(String(S));if(o)for(var C=c(p),N=0;N<a.length;++N)!(C&&a[N]==="constructor")&&t.call(p,a[N])&&g.push(a[N]);return g}}return Bu=e,Bu}var S0=Array.prototype.slice,N0=Op,pc=Object.keys,Ma=pc?function(t){return pc(t)}:C0(),gc=Object.keys;Ma.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return N0(n)?gc(S0.call(n)):gc(n)})}else Object.keys=Ma;return Object.keys||Ma};var bp=Ma,Rp=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},P0=Rp,Hf=function(){return P0()&&!!Symbol.toStringTag},vc=typeof Symbol<"u"&&Symbol,M0=Rp,L0=function(){return typeof vc!="function"||typeof Symbol!="function"||typeof vc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:M0()},dc={foo:{}},O0=Object,b0=function(){return{__proto__:dc}.foo===dc.foo&&!({__proto__:null}instanceof O0)},R0="Function.prototype.bind called on incompatible ",A0=Object.prototype.toString,D0=Math.max,T0="[object Function]",yc=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},F0=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},B0=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},G0=function(t){var r=this;if(typeof r!="function"||A0.apply(r)!==T0)throw new TypeError(R0+r);for(var n=F0(arguments,1),i,o=function(){if(this instanceof i){var l=r.apply(this,yc(n,arguments));return Object(l)===l?l:this}return r.apply(t,yc(n,arguments))},s=D0(0,r.length-n.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(i=Function("binder","return function ("+B0(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},k0=G0,Wf=Function.prototype.bind||k0,q0=Function.prototype.call,z0=Object.prototype.hasOwnProperty,X0=Wf,U0=X0.call(q0,z0),Jt,Bo=SyntaxError,Ap=Function,bo=TypeError,Gu=function(e){try{return Ap('"use strict"; return ('+e+").constructor;")()}catch{}},Ki=Object.getOwnPropertyDescriptor;if(Ki)try{Ki({},"")}catch{Ki=null}var ku=function(){throw new bo},Y0=Ki?function(){try{return arguments.callee,ku}catch{try{return Ki(arguments,"callee").get}catch{return ku}}}():ku,xo=L0(),V0=b0(),Ze=Object.getPrototypeOf||(V0?function(e){return e.__proto__}:null),Co={},H0=typeof Uint8Array>"u"||!Ze?Jt:Ze(Uint8Array),Qi={"%AggregateError%":typeof AggregateError>"u"?Jt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Jt:ArrayBuffer,"%ArrayIteratorPrototype%":xo&&Ze?Ze([][Symbol.iterator]()):Jt,"%AsyncFromSyncIteratorPrototype%":Jt,"%AsyncFunction%":Co,"%AsyncGenerator%":Co,"%AsyncGeneratorFunction%":Co,"%AsyncIteratorPrototype%":Co,"%Atomics%":typeof Atomics>"u"?Jt:Atomics,"%BigInt%":typeof BigInt>"u"?Jt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Jt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Jt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Jt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Jt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Jt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Jt:FinalizationRegistry,"%Function%":Ap,"%GeneratorFunction%":Co,"%Int8Array%":typeof Int8Array>"u"?Jt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Jt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Jt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xo&&Ze?Ze(Ze([][Symbol.iterator]())):Jt,"%JSON%":typeof JSON=="object"?JSON:Jt,"%Map%":typeof Map>"u"?Jt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xo||!Ze?Jt:Ze(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Jt:Promise,"%Proxy%":typeof Proxy>"u"?Jt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Jt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Jt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xo||!Ze?Jt:Ze(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Jt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xo&&Ze?Ze(""[Symbol.iterator]()):Jt,"%Symbol%":xo?Symbol:Jt,"%SyntaxError%":Bo,"%ThrowTypeError%":Y0,"%TypedArray%":H0,"%TypeError%":bo,"%Uint8Array%":typeof Uint8Array>"u"?Jt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Jt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Jt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Jt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Jt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Jt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Jt:WeakSet};if(Ze)try{null.error}catch(e){var W0=Ze(Ze(e));Qi["%Error.prototype%"]=W0}var J0=function e(t){var r;if(t==="%AsyncFunction%")r=Gu("async function () {}");else if(t==="%GeneratorFunction%")r=Gu("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Gu("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ze&&(r=Ze(i.prototype))}return Qi[t]=r,r},mc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ia=Wf,Da=U0,K0=ia.call(Function.call,Array.prototype.concat),Q0=ia.call(Function.apply,Array.prototype.splice),_c=ia.call(Function.call,String.prototype.replace),Ta=ia.call(Function.call,String.prototype.slice),Z0=ia.call(Function.call,RegExp.prototype.exec),$0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j0=/\\(\\)?/g,tm=function(t){var r=Ta(t,0,1),n=Ta(t,-1);if(r==="%"&&n!=="%")throw new Bo("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Bo("invalid intrinsic syntax, expected opening `%`");var i=[];return _c(t,$0,function(o,s,a,u){i[i.length]=a?_c(u,j0,"$1"):s||o}),i},em=function(t,r){var n=t,i;if(Da(mc,n)&&(i=mc[n],n="%"+i[0]+"%"),Da(Qi,n)){var o=Qi[n];if(o===Co&&(o=J0(n)),typeof o>"u"&&!r)throw new bo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Bo("intrinsic "+t+" does not exist!")},ss=function(t,r){if(typeof t!="string"||t.length===0)throw new bo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new bo('"allowMissing" argument must be a boolean');if(Z0(/^%?[^%]*%?$/,t)===null)throw new Bo("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=tm(t),i=n.length>0?n[0]:"",o=em("%"+i+"%",r),s=o.name,a=o.value,u=!1,f=o.alias;f&&(i=f[0],Q0(n,K0([0,1],f)));for(var l=1,c=!0;l<n.length;l+=1){var h=n[l],p=Ta(h,0,1),d=Ta(h,-1);if((p==='"'||p==="'"||p==="`"||d==='"'||d==="'"||d==="`")&&p!==d)throw new Bo("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(u=!0),i+="."+h,s="%"+i+"%",Da(Qi,s))a=Qi[s];else if(a!=null){if(!(h in a)){if(!r)throw new bo("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ki&&l+1>=n.length){var m=Ki(a,h);c=!!m,c&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else c=Da(a,h),a=a[h];c&&!u&&(Qi[s]=a)}}return a},Dp={exports:{}},rm=ss,lf=rm("%Object.defineProperty%",!0),cf=function(){if(lf)try{return lf({},"a",{value:1}),!0}catch{return!1}return!1};cf.hasArrayLengthDefineBug=function(){if(!cf())return null;try{return lf([],"length",{value:1}).length!==1}catch{return!0}};var au=cf,nm=ss,La=nm("%Object.getOwnPropertyDescriptor%",!0);if(La)try{La([],"length")}catch{La=null}var Tp=La,im=au(),Jf=ss,Ps=im&&Jf("%Object.defineProperty%",!0);if(Ps)try{Ps({},"a",{value:1})}catch{Ps=!1}var om=Jf("%SyntaxError%"),wo=Jf("%TypeError%"),Ec=Tp,Kf=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new wo("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new wo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new wo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new wo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new wo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new wo("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!Ec&&Ec(t,r);if(Ps)Ps(t,r,{configurable:s===null&&u?u.configurable:!s,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:o===null&&u?u.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new om("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Fp=ss,xc=Kf,sm=au(),wc=Tp,Ic=Fp("%TypeError%"),am=Fp("%Math.floor%"),um=function(t,r){if(typeof t!="function")throw new Ic("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||am(r)!==r)throw new Ic("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&wc){var s=wc(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(sm?xc(t,"length",r,!0,!0):xc(t,"length",r)),t};(function(e){var t=Wf,r=ss,n=um,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||t.call(s,o),u=r("%Object.defineProperty%",!0),f=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}e.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(t,s,arguments);return n(p,1+f(0,h.length-(arguments.length-1)),!0)};var l=function(){return a(t,o,arguments)};u?u(e.exports,"apply",{value:l}):e.exports.apply=l})(Dp);var Qf=Dp.exports,Bp=ss,Gp=Qf,fm=Gp(Bp("String.prototype.indexOf")),kp=function(t,r){var n=Bp(t,!!r);return typeof n=="function"&&fm(t,".prototype.")>-1?Gp(n):n},lm=Hf(),cm=kp,hf=cm("Object.prototype.toString"),uu=function(t){return lm&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:hf(t)==="[object Arguments]"},qp=function(t){return uu(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&hf(t)!=="[object Array]"&&hf(t.callee)==="[object Function]"},hm=function(){return uu(arguments)}();uu.isLegacyArguments=qp;var pm=hm?uu:qp,gm=bp,vm=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",dm=Object.prototype.toString,ym=Array.prototype.concat,Cc=Kf,mm=function(e){return typeof e=="function"&&dm.call(e)==="[object Function]"},zp=au(),_m=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!mm(n)||!n())return}zp?Cc(e,t,r,!0):Cc(e,t,r)},Xp=function(e,t){var r=arguments.length>2?arguments[2]:{},n=gm(t);vm&&(n=ym.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)_m(e,n[i],t[n[i]],r[n[i]])};Xp.supportsDescriptors=!!zp;var oa=Xp,Sc=function(e){return e!==e},Up=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Sc(t)&&Sc(r))},Em=Up,Yp=function(){return typeof Object.is=="function"?Object.is:Em},xm=Yp,wm=oa,Im=function(){var t=xm();return wm(Object,{is:t},{is:function(){return Object.is!==t}}),t},Cm=oa,Sm=Qf,Nm=Up,Vp=Yp,Pm=Im,Hp=Sm(Vp(),Object);Cm(Hp,{getPolyfill:Vp,implementation:Nm,shim:Pm});var Mm=Hp,pf=kp,Wp=Hf(),Jp,Kp,gf,vf;if(Wp){Jp=pf("Object.prototype.hasOwnProperty"),Kp=pf("RegExp.prototype.exec"),gf={};var qu=function(){throw gf};vf={toString:qu,valueOf:qu},typeof Symbol.toPrimitive=="symbol"&&(vf[Symbol.toPrimitive]=qu)}var Lm=pf("Object.prototype.toString"),Om=Object.getOwnPropertyDescriptor,bm="[object RegExp]",Rm=Wp?function(t){if(!t||typeof t!="object")return!1;var r=Om(t,"lastIndex"),n=r&&Jp(r,"value");if(!n)return!1;try{Kp(t,vf)}catch(i){return i===gf}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:Lm(t)===bm},Bs=function(){return typeof(function(){}).name=="string"},Ms=Object.getOwnPropertyDescriptor;if(Ms)try{Ms([],"length")}catch{Ms=null}Bs.functionsHaveConfigurableNames=function(){if(!Bs()||!Ms)return!1;var t=Ms(function(){},"name");return!!t&&!!t.configurable};var Am=Function.prototype.bind;Bs.boundFunctionsHaveNames=function(){return Bs()&&typeof Am=="function"&&(function(){}).bind().name!==""};var Dm=Bs,Nc=Kf,Tm=au(),Fm=Dm.functionsHaveConfigurableNames(),Bm=TypeError,Gm=function(t,r){if(typeof t!="function")throw new Bm("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||Fm)&&(Tm?Nc(t,"name",r,!0,!0):Nc(t,"name",r)),t},km=Gm,qm=Object,zm=TypeError,Qp=km(function(){if(this!=null&&this!==qm(this))throw new zm("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),Xm=Qp,Um=oa.supportsDescriptors,Ym=Object.getOwnPropertyDescriptor,Zp=function(){if(Um&&/a/mig.flags==="gim"){var t=Ym(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return t.get}}return Xm},Vm=oa.supportsDescriptors,Hm=Zp,Wm=Object.getOwnPropertyDescriptor,Jm=Object.defineProperty,Km=TypeError,Pc=Object.getPrototypeOf,Qm=/a/,Zm=function(){if(!Vm||!Pc)throw new Km("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Hm(),r=Pc(Qm),n=Wm(r,"flags");return(!n||n.get!==t)&&Jm(r,"flags",{configurable:!0,enumerable:!1,get:t}),t},$m=oa,jm=Qf,t1=Qp,$p=Zp,e1=Zm,jp=jm($p());$m(jp,{getPolyfill:$p,implementation:t1,shim:e1});var r1=jp,n1=Date.prototype.getDay,i1=function(t){try{return n1.call(t),!0}catch{return!1}},o1=Object.prototype.toString,s1="[object Date]",a1=Hf(),u1=function(t){return typeof t!="object"||t===null?!1:a1?i1(t):o1.call(t)===s1},Mc=bp,Lc=pm,Oc=Mm,bc=Rm,Rc=r1,Ac=u1,Dc=Date.prototype.getTime;function tg(e,t,r){var n=r||{};return(n.strict?Oc(e,t):e===t)?!0:!e||!t||typeof e!="object"&&typeof t!="object"?n.strict?Oc(e,t):e==t:f1(e,t,n)}function Tc(e){return e==null}function Fc(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function f1(e,t,r){var n,i;if(typeof e!=typeof t||Tc(e)||Tc(t)||e.prototype!==t.prototype||Lc(e)!==Lc(t))return!1;var o=bc(e),s=bc(t);if(o!==s)return!1;if(o||s)return e.source===t.source&&Rc(e)===Rc(t);if(Ac(e)&&Ac(t))return Dc.call(e)===Dc.call(t);var a=Fc(e),u=Fc(t);if(a!==u)return!1;if(a||u){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var f=Mc(e),l=Mc(t)}catch{return!1}if(f.length!==l.length)return!1;for(f.sort(),l.sort(),n=f.length-1;n>=0;n--)if(f[n]!=l[n])return!1;for(n=f.length-1;n>=0;n--)if(i=f[n],!tg(e[i],t[i],r))return!1;return!0}var eg=tg;const Is=wi(eg);function l1(e,t,r){if(r===void 0&&(r={}),r=r||{},!re(r))throw new Error("options is invalid");var n=r.tolerance||0,i=[],o=su(),s=Fo(e);o.load(s);var a;return Pi(t,function(u){var f=!1;u&&(Qt(o.search(u),function(l){if(f===!1){var c=ot(u).sort(),h=ot(l).sort();Is(c,h)||(n===0?Wr(c[0],l)&&Wr(c[1],l):Ji(l,c[0]).properties.dist<=n&&Ji(l,c[1]).properties.dist<=n)?(f=!0,a?a=zu(a,u):a=u):(n===0?Wr(h[0],u)&&Wr(h[1],u):Ji(u,h[0]).properties.dist<=n&&Ji(u,h[1]).properties.dist<=n)&&(a?a=zu(a,l):a=l)}}),f===!1&&a&&(i.push(a),a=void 0))}),a&&i.push(a),nt(i)}function zu(e,t){var r=ot(t),n=ot(e),i=n[0],o=n[n.length-1],s=e.geometry.coordinates;return Is(r[0],i)?s.unshift(r[1]):Is(r[0],o)?s.push(r[1]):Is(r[1],i)?s.unshift(r[0]):Is(r[1],o)&&s.push(r[0]),e}function Gw(e,t,r,n,i){if(i=i||{},!re(i))throw new Error("options is invalid");var o=i.properties;if(!e)throw new Error("center is required");if(r==null)throw new Error("bearing1 is required");if(n==null)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if(typeof i!="object")throw new Error("options must be an object");if(Bc(r)===Bc(n))return gp(e,t,i);var s=ot(e),a=_0(e,t,r,n,i),u=[[s]];return Le(a,function(f){u[0].push(f)}),u[0].push(s),dt(u,o)}function Bc(e){var t=e%360;return t<0&&(t+=360),t}function Go(e,t,r){r===void 0&&(r={});var n;r.final?n=Gc(se(t),se(e)):n=Gc(se(e),se(t));var i=n>180?-(360-n):n;return i}function Gc(e,t){var r=tr(e[1]),n=tr(t[1]),i=tr(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),s=Math.atan2(i,o);return(Do(s)+360)%360}function Gs(e,t,r,n){n===void 0&&(n={});var i=t<0,o=na(Math.abs(t),n.units,"meters");i&&(o=-Math.abs(o));var s=se(e),a=c1(s,o,r);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,pt(a,n.properties)}function c1(e,t,r,n){n=n===void 0?Ye:Number(n);var i=t/n,o=e[0]*Math.PI/180,s=tr(e[1]),a=tr(r),u=i*Math.cos(a),f=s+u;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var l=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(l)>1e-11?u/l:Math.cos(s),h=i*Math.sin(a)/c,p=o+h;return[(p*180/Math.PI+540)%360-180,f*180/Math.PI]}function kw(e,t){var r=ot(e),n=ot(t),i,o,s,a,u=Oe(t),f=0,l=null;r[0]>u[0]&&r[0]<u[2]&&r[1]>u[1]&&r[1]<u[3]&&(l=mp(e,qf(t)),f=l.properties.featureIndex);var c=Gr(t);switch(c){case"Polygon":i=n[0][f],o=n[0][0],l!==null&&l.geometry.coordinates[1]<r[1]&&(o=n[0][f]),a=ks(n[0][0],n[0][n[0].length-1],r);var h=kc(n[0],r,a,s,i,o);i=h[0],o=h[1];break;case"MultiPolygon":for(var p=0,d=0,m=0,x=0;x<n[0].length;x++){p=x;for(var _=!1,g=0;g<n[0][x].length;g++){if(d=g,m===f){_=!0;break}m++}if(_)break}i=n[0][p][d],o=n[0][p][d],a=ks(n[0][0][0],n[0][0][n[0][0].length-1],r),n.forEach(function(v){var y=kc(v[0],r,a,s,i,o);i=y[0],o=y[1]});break}return nt([pt(i),pt(o)])}function kc(e,t,r,n,i,o){for(var s=0;s<e.length;s++){var a=e[s],u=e[s+1];s===e.length-1&&(u=e[0]),n=ks(a,u,t),r<=0&&n>0?p1(t,a,i)||(i=a):r>0&&n<=0&&(h1(t,a,o)||(o=a)),r=n}return[i,o]}function h1(e,t,r){return ks(e,t,r)>0}function p1(e,t,r){return ks(e,t,r)<0}function ks(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function df(e){for(var t=ot(e),r=0,n=1,i,o;n<t.length;)i=o||t[0],o=t[n],r+=(o[0]-i[0])*(o[1]+i[1]),n++;return r>0}function qw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.reverse||!1,n=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if(typeof r!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(e=vr(e));var i=[];switch(e.type){case"GeometryCollection":return Zr(e,function(o){Oa(o,r)}),e;case"FeatureCollection":return Qt(e,function(o){Qt(Oa(o,r),function(s){i.push(s)})}),nt(i)}return Oa(e,r)}function Oa(e,t){var r=e.type==="Feature"?e.geometry.type:e.type;switch(r){case"GeometryCollection":return Zr(e,function(n){Oa(n,t)}),e;case"LineString":return qc(ot(e),t),e;case"Polygon":return zc(ot(e),t),e;case"MultiLineString":return ot(e).forEach(function(n){qc(n,t)}),e;case"MultiPolygon":return ot(e).forEach(function(n){zc(n,t)}),e;case"Point":case"MultiPoint":return e}}function qc(e,t){df(e)===t&&e.reverse()}function zc(e,t){df(e[0])!==t&&e[0].reverse();for(var r=1;r<e.length;r++)df(e[r])===t&&e[r].reverse()}function g1(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Xi(e,"Point","input must contain Points");for(var o=v1(e,n),s=[],a=0;a<o.length;a++){for(var u=o[a],f=[],l=0;l<u.length;l++){var c=u[l];c.properties[r]?f.push(c.properties[r]):f.push(0),i===!0&&(c.properties.matrixPosition=[a,l])}s.push(f)}return s}function v1(e,t){var r={};Qt(e,function(o){var s=ot(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(u,f){return ot(u)[0]-ot(f)[0]});return a}),i=n.sort(function(o,s){return t?ot(o[0])[1]-ot(s[0])[1]:ot(s[0])[1]-ot(o[0])[1]});return i}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var Xc={successCallback:null,verbose:!1,polygons:!1},Hi={};function d1(e,t,r,n){n=n||{};for(var i=Object.keys(Xc),o=0;o<i.length;o++){var s=i[o],a=n[s];a=typeof a<"u"&&a!==null?a:Xc[s],Hi[s]=a}Hi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+r)+"]");var u=K1(e,t,r),f;return Hi.polygons?(Hi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),f=e_(u)):(Hi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),f=Q1(u)),typeof Hi.successCallback=="function"&&Hi.successCallback(f),f}var pr=64,hn=16,Ve=4,$e=1,mt=[],_t=[],Et=[],xt=[],wt=[],It=[],Ct=[],St=[],Nt=[],Pt=[],Mt=[],Lt=[],Ot=[],bt=[],Rt=[],At=[],Dt=[],Tt=[],Ft=[],Bt=[],Gt=[],kt=[],qt=[],zt=[];Ct[85]=Pt[85]=-1;St[85]=Mt[85]=0;Nt[85]=Lt[85]=1;Ft[85]=kt[85]=1;Bt[85]=qt[85]=0;Gt[85]=zt[85]=1;mt[85]=xt[85]=0;_t[85]=wt[85]=-1;Et[85]=Rt[85]=0;At[85]=Ot[85]=0;Dt[85]=bt[85]=1;It[85]=Tt[85]=1;kt[1]=kt[169]=0;qt[1]=qt[169]=-1;zt[1]=zt[169]=0;Ot[1]=Ot[169]=-1;bt[1]=bt[169]=0;Rt[1]=Rt[169]=0;Pt[4]=Pt[166]=0;Mt[4]=Mt[166]=-1;Lt[4]=Lt[166]=1;At[4]=At[166]=1;Dt[4]=Dt[166]=0;Tt[4]=Tt[166]=0;Ct[16]=Ct[154]=0;St[16]=St[154]=1;Nt[16]=Nt[154]=1;xt[16]=xt[154]=1;wt[16]=wt[154]=0;It[16]=It[154]=1;Ft[64]=Ft[106]=0;Bt[64]=Bt[106]=1;Gt[64]=Gt[106]=0;mt[64]=mt[106]=-1;_t[64]=_t[106]=0;Et[64]=Et[106]=1;Ft[2]=Ft[168]=0;Bt[2]=Bt[168]=-1;Gt[2]=Gt[168]=1;kt[2]=kt[168]=0;qt[2]=qt[168]=-1;zt[2]=zt[168]=0;Ot[2]=Ot[168]=-1;bt[2]=bt[168]=0;Rt[2]=Rt[168]=0;At[2]=At[168]=-1;Dt[2]=Dt[168]=0;Tt[2]=Tt[168]=1;Ct[8]=Ct[162]=0;St[8]=St[162]=-1;Nt[8]=Nt[162]=0;Pt[8]=Pt[162]=0;Mt[8]=Mt[162]=-1;Lt[8]=Lt[162]=1;Ot[8]=Ot[162]=1;bt[8]=bt[162]=0;Rt[8]=Rt[162]=1;At[8]=At[162]=1;Dt[8]=Dt[162]=0;Tt[8]=Tt[162]=0;Ct[32]=Ct[138]=0;St[32]=St[138]=1;Nt[32]=Nt[138]=1;Pt[32]=Pt[138]=0;Mt[32]=Mt[138]=1;Lt[32]=Lt[138]=0;mt[32]=mt[138]=1;_t[32]=_t[138]=0;Et[32]=Et[138]=0;xt[32]=xt[138]=1;wt[32]=wt[138]=0;It[32]=It[138]=1;kt[128]=kt[42]=0;qt[128]=qt[42]=1;zt[128]=zt[42]=1;Ft[128]=Ft[42]=0;Bt[128]=Bt[42]=1;Gt[128]=Gt[42]=0;mt[128]=mt[42]=-1;_t[128]=_t[42]=0;Et[128]=Et[42]=1;xt[128]=xt[42]=-1;wt[128]=wt[42]=0;It[128]=It[42]=0;Pt[5]=Pt[165]=-1;Mt[5]=Mt[165]=0;Lt[5]=Lt[165]=0;kt[5]=kt[165]=1;qt[5]=qt[165]=0;zt[5]=zt[165]=0;At[20]=At[150]=0;Dt[20]=Dt[150]=1;Tt[20]=Tt[150]=1;xt[20]=xt[150]=0;wt[20]=wt[150]=-1;It[20]=It[150]=1;Ct[80]=Ct[90]=-1;St[80]=St[90]=0;Nt[80]=Nt[90]=1;Ft[80]=Ft[90]=1;Bt[80]=Bt[90]=0;Gt[80]=Gt[90]=1;Ot[65]=Ot[105]=0;bt[65]=bt[105]=1;Rt[65]=Rt[105]=0;mt[65]=mt[105]=0;_t[65]=_t[105]=-1;Et[65]=Et[105]=0;Ct[160]=Ct[10]=-1;St[160]=St[10]=0;Nt[160]=Nt[10]=1;Pt[160]=Pt[10]=-1;Mt[160]=Mt[10]=0;Lt[160]=Lt[10]=0;kt[160]=kt[10]=1;qt[160]=qt[10]=0;zt[160]=zt[10]=0;Ft[160]=Ft[10]=1;Bt[160]=Bt[10]=0;Gt[160]=Gt[10]=1;At[130]=At[40]=0;Dt[130]=Dt[40]=1;Tt[130]=Tt[40]=1;Ot[130]=Ot[40]=0;bt[130]=bt[40]=1;Rt[130]=Rt[40]=0;mt[130]=mt[40]=0;_t[130]=_t[40]=-1;Et[130]=Et[40]=0;xt[130]=xt[40]=0;wt[130]=wt[40]=-1;It[130]=It[40]=1;Pt[37]=Pt[133]=0;Mt[37]=Mt[133]=1;Lt[37]=Lt[133]=1;kt[37]=kt[133]=0;qt[37]=qt[133]=1;zt[37]=zt[133]=0;mt[37]=mt[133]=-1;_t[37]=_t[133]=0;Et[37]=Et[133]=0;xt[37]=xt[133]=1;wt[37]=wt[133]=0;It[37]=It[133]=0;At[148]=At[22]=-1;Dt[148]=Dt[22]=0;Tt[148]=Tt[22]=0;kt[148]=kt[22]=0;qt[148]=qt[22]=-1;zt[148]=zt[22]=1;Ft[148]=Ft[22]=0;Bt[148]=Bt[22]=1;Gt[148]=Gt[22]=1;xt[148]=xt[22]=-1;wt[148]=wt[22]=0;It[148]=It[22]=1;Ct[82]=Ct[88]=0;St[82]=St[88]=-1;Nt[82]=Nt[88]=1;At[82]=At[88]=1;Dt[82]=Dt[88]=0;Tt[82]=Tt[88]=1;Ot[82]=Ot[88]=-1;bt[82]=bt[88]=0;Rt[82]=Rt[88]=1;Ft[82]=Ft[88]=0;Bt[82]=Bt[88]=-1;Gt[82]=Gt[88]=0;Ct[73]=Ct[97]=0;St[73]=St[97]=1;Nt[73]=Nt[97]=0;Pt[73]=Pt[97]=0;Mt[73]=Mt[97]=-1;Lt[73]=Lt[97]=0;Ot[73]=Ot[97]=1;bt[73]=bt[97]=0;Rt[73]=Rt[97]=0;mt[73]=mt[97]=1;_t[73]=_t[97]=0;Et[73]=Et[97]=1;Ct[145]=Ct[25]=0;St[145]=St[25]=-1;Nt[145]=Nt[25]=0;Ot[145]=Ot[25]=1;bt[145]=bt[25]=0;Rt[145]=Rt[25]=1;kt[145]=kt[25]=0;qt[145]=qt[25]=1;zt[145]=zt[25]=1;xt[145]=xt[25]=-1;wt[145]=wt[25]=0;It[145]=It[25]=0;Pt[70]=Pt[100]=0;Mt[70]=Mt[100]=1;Lt[70]=Lt[100]=0;At[70]=At[100]=-1;Dt[70]=Dt[100]=0;Tt[70]=Tt[100]=1;Ft[70]=Ft[100]=0;Bt[70]=Bt[100]=-1;Gt[70]=Gt[100]=1;mt[70]=mt[100]=1;_t[70]=_t[100]=0;Et[70]=Et[100]=0;Pt[101]=Pt[69]=0;Mt[101]=Mt[69]=1;Lt[101]=Lt[69]=0;mt[101]=mt[69]=1;_t[101]=_t[69]=0;Et[101]=Et[69]=0;kt[149]=kt[21]=0;qt[149]=qt[21]=1;zt[149]=zt[21]=1;xt[149]=xt[21]=-1;wt[149]=wt[21]=0;It[149]=It[21]=0;At[86]=At[84]=-1;Dt[86]=Dt[84]=0;Tt[86]=Tt[84]=1;Ft[86]=Ft[84]=0;Bt[86]=Bt[84]=-1;Gt[86]=Gt[84]=1;Ct[89]=Ct[81]=0;St[89]=St[81]=-1;Nt[89]=Nt[81]=0;Ot[89]=Ot[81]=1;bt[89]=bt[81]=0;Rt[89]=Rt[81]=1;Ct[96]=Ct[74]=0;St[96]=St[74]=1;Nt[96]=Nt[74]=0;Pt[96]=Pt[74]=-1;Mt[96]=Mt[74]=0;Lt[96]=Lt[74]=1;Ft[96]=Ft[74]=1;Bt[96]=Bt[74]=0;Gt[96]=Gt[74]=0;mt[96]=mt[74]=1;_t[96]=_t[74]=0;Et[96]=Et[74]=1;Ct[24]=Ct[146]=0;St[24]=St[146]=-1;Nt[24]=Nt[146]=1;At[24]=At[146]=1;Dt[24]=Dt[146]=0;Tt[24]=Tt[146]=1;Ot[24]=Ot[146]=0;bt[24]=bt[146]=1;Rt[24]=Rt[146]=1;xt[24]=xt[146]=0;wt[24]=wt[146]=-1;It[24]=It[146]=0;Pt[6]=Pt[164]=-1;Mt[6]=Mt[164]=0;Lt[6]=Lt[164]=1;At[6]=At[164]=-1;Dt[6]=Dt[164]=0;Tt[6]=Tt[164]=0;kt[6]=kt[164]=0;qt[6]=qt[164]=-1;zt[6]=zt[164]=1;Ft[6]=Ft[164]=1;Bt[6]=Bt[164]=0;Gt[6]=Gt[164]=0;Ot[129]=Ot[41]=0;bt[129]=bt[41]=1;Rt[129]=Rt[41]=1;kt[129]=kt[41]=0;qt[129]=qt[41]=1;zt[129]=zt[41]=0;mt[129]=mt[41]=-1;_t[129]=_t[41]=0;Et[129]=Et[41]=0;xt[129]=xt[41]=0;wt[129]=wt[41]=-1;It[129]=It[41]=0;At[66]=At[104]=0;Dt[66]=Dt[104]=1;Tt[66]=Tt[104]=0;Ot[66]=Ot[104]=-1;bt[66]=bt[104]=0;Rt[66]=Rt[104]=1;Ft[66]=Ft[104]=0;Bt[66]=Bt[104]=-1;Gt[66]=Gt[104]=0;mt[66]=mt[104]=0;_t[66]=_t[104]=-1;Et[66]=Et[104]=1;Ct[144]=Ct[26]=-1;St[144]=St[26]=0;Nt[144]=Nt[26]=0;kt[144]=kt[26]=1;qt[144]=qt[26]=0;zt[144]=zt[26]=1;Ft[144]=Ft[26]=0;Bt[144]=Bt[26]=1;Gt[144]=Gt[26]=1;xt[144]=xt[26]=-1;wt[144]=wt[26]=0;It[144]=It[26]=1;Pt[36]=Pt[134]=0;Mt[36]=Mt[134]=1;Lt[36]=Lt[134]=1;At[36]=At[134]=0;Dt[36]=Dt[134]=1;Tt[36]=Tt[134]=0;mt[36]=mt[134]=0;_t[36]=_t[134]=-1;Et[36]=Et[134]=1;xt[36]=xt[134]=1;wt[36]=wt[134]=0;It[36]=It[134]=0;Ct[9]=Ct[161]=-1;St[9]=St[161]=0;Nt[9]=Nt[161]=0;Pt[9]=Pt[161]=0;Mt[9]=Mt[161]=-1;Lt[9]=Lt[161]=0;Ot[9]=Ot[161]=1;bt[9]=bt[161]=0;Rt[9]=Rt[161]=0;kt[9]=kt[161]=1;qt[9]=qt[161]=0;zt[9]=zt[161]=1;Ct[136]=0;St[136]=1;Nt[136]=1;Pt[136]=0;Mt[136]=1;Lt[136]=0;At[136]=-1;Dt[136]=0;Tt[136]=1;Ot[136]=-1;bt[136]=0;Rt[136]=0;kt[136]=0;qt[136]=-1;zt[136]=0;Ft[136]=0;Bt[136]=-1;Gt[136]=1;mt[136]=1;_t[136]=0;Et[136]=0;xt[136]=1;wt[136]=0;It[136]=1;Ct[34]=0;St[34]=-1;Nt[34]=0;Pt[34]=0;Mt[34]=-1;Lt[34]=1;At[34]=1;Dt[34]=0;Tt[34]=0;Ot[34]=1;bt[34]=0;Rt[34]=1;kt[34]=0;qt[34]=1;zt[34]=1;Ft[34]=0;Bt[34]=1;Gt[34]=0;mt[34]=-1;_t[34]=0;Et[34]=1;xt[34]=-1;wt[34]=0;It[34]=0;Ct[35]=0;St[35]=1;Nt[35]=1;Pt[35]=0;Mt[35]=-1;Lt[35]=1;At[35]=1;Dt[35]=0;Tt[35]=0;Ot[35]=-1;bt[35]=0;Rt[35]=0;kt[35]=0;qt[35]=-1;zt[35]=0;Ft[35]=0;Bt[35]=1;Gt[35]=0;mt[35]=-1;_t[35]=0;Et[35]=1;xt[35]=1;wt[35]=0;It[35]=1;Ct[153]=0;St[153]=1;Nt[153]=1;Ot[153]=-1;bt[153]=0;Rt[153]=0;kt[153]=0;qt[153]=-1;zt[153]=0;xt[153]=1;wt[153]=0;It[153]=1;Pt[102]=0;Mt[102]=-1;Lt[102]=1;At[102]=1;Dt[102]=0;Tt[102]=0;Ft[102]=0;Bt[102]=1;Gt[102]=0;mt[102]=-1;_t[102]=0;Et[102]=1;Ct[155]=0;St[155]=-1;Nt[155]=0;Ot[155]=1;bt[155]=0;Rt[155]=1;kt[155]=0;qt[155]=1;zt[155]=1;xt[155]=-1;wt[155]=0;It[155]=0;Pt[103]=0;Mt[103]=1;Lt[103]=0;At[103]=-1;Dt[103]=0;Tt[103]=1;Ft[103]=0;Bt[103]=-1;Gt[103]=1;mt[103]=1;_t[103]=0;Et[103]=0;Ct[152]=0;St[152]=1;Nt[152]=1;At[152]=-1;Dt[152]=0;Tt[152]=1;Ot[152]=-1;bt[152]=0;Rt[152]=0;kt[152]=0;qt[152]=-1;zt[152]=0;Ft[152]=0;Bt[152]=-1;Gt[152]=1;xt[152]=1;wt[152]=0;It[152]=1;Ct[156]=0;St[156]=-1;Nt[156]=1;At[156]=1;Dt[156]=0;Tt[156]=1;Ot[156]=-1;bt[156]=0;Rt[156]=0;kt[156]=0;qt[156]=-1;zt[156]=0;Ft[156]=0;Bt[156]=1;Gt[156]=1;xt[156]=-1;wt[156]=0;It[156]=1;Ct[137]=0;St[137]=1;Nt[137]=1;Pt[137]=0;Mt[137]=1;Lt[137]=0;Ot[137]=-1;bt[137]=0;Rt[137]=0;kt[137]=0;qt[137]=-1;zt[137]=0;mt[137]=1;_t[137]=0;Et[137]=0;xt[137]=1;wt[137]=0;It[137]=1;Ct[139]=0;St[139]=1;Nt[139]=1;Pt[139]=0;Mt[139]=-1;Lt[139]=0;Ot[139]=1;bt[139]=0;Rt[139]=0;kt[139]=0;qt[139]=1;zt[139]=0;mt[139]=-1;_t[139]=0;Et[139]=0;xt[139]=1;wt[139]=0;It[139]=1;Ct[98]=0;St[98]=-1;Nt[98]=0;Pt[98]=0;Mt[98]=-1;Lt[98]=1;At[98]=1;Dt[98]=0;Tt[98]=0;Ot[98]=1;bt[98]=0;Rt[98]=1;Ft[98]=0;Bt[98]=1;Gt[98]=0;mt[98]=-1;_t[98]=0;Et[98]=1;Ct[99]=0;St[99]=1;Nt[99]=0;Pt[99]=0;Mt[99]=-1;Lt[99]=1;At[99]=1;Dt[99]=0;Tt[99]=0;Ot[99]=-1;bt[99]=0;Rt[99]=1;Ft[99]=0;Bt[99]=-1;Gt[99]=0;mt[99]=1;_t[99]=0;Et[99]=1;Pt[38]=0;Mt[38]=-1;Lt[38]=1;At[38]=1;Dt[38]=0;Tt[38]=0;kt[38]=0;qt[38]=1;zt[38]=1;Ft[38]=0;Bt[38]=1;Gt[38]=0;mt[38]=-1;_t[38]=0;Et[38]=1;xt[38]=-1;wt[38]=0;It[38]=0;Pt[39]=0;Mt[39]=1;Lt[39]=1;At[39]=-1;Dt[39]=0;Tt[39]=0;kt[39]=0;qt[39]=-1;zt[39]=1;Ft[39]=0;Bt[39]=1;Gt[39]=0;mt[39]=-1;_t[39]=0;Et[39]=1;xt[39]=1;wt[39]=0;It[39]=0;var Zf=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},$f=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},jf=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},tl=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},el=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},rl=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},nl=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},il=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},y1=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},m1=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},_1=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},E1=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},x1=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},w1=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},I1=function(){return[[0,0],[0,1],[1,1],[1,0]]},C1=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},S1=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},N1=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},P1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},M1=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},L1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},O1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},b1=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},R1=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},A1=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},D1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},T1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},F1=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},B1=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},G1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},k1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},q1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},z1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},X1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},U1=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},Y1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},V1=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},H1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},W1=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},J1=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Y=[],X=[],$=[],Z=[],rt=[],et=[],Xt=[],Ut=[];Z[1]=rt[1]=18;Z[169]=rt[169]=18;$[4]=X[4]=12;$[166]=X[166]=12;Y[16]=Ut[16]=4;Y[154]=Ut[154]=4;et[64]=Xt[64]=22;et[106]=Xt[106]=22;$[2]=et[2]=17;Z[2]=rt[2]=18;$[168]=et[168]=17;Z[168]=rt[168]=18;Y[8]=Z[8]=9;X[8]=$[8]=12;Y[162]=Z[162]=9;X[162]=$[162]=12;Y[32]=Ut[32]=4;X[32]=Xt[32]=1;Y[138]=Ut[138]=4;X[138]=Xt[138]=1;rt[128]=Ut[128]=21;et[128]=Xt[128]=22;rt[42]=Ut[42]=21;et[42]=Xt[42]=22;X[5]=rt[5]=14;X[165]=rt[165]=14;$[20]=Ut[20]=6;$[150]=Ut[150]=6;Y[80]=et[80]=11;Y[90]=et[90]=11;Z[65]=Xt[65]=3;Z[105]=Xt[105]=3;Y[160]=et[160]=11;X[160]=rt[160]=14;Y[10]=et[10]=11;X[10]=rt[10]=14;$[130]=Ut[130]=6;Z[130]=Xt[130]=3;$[40]=Ut[40]=6;Z[40]=Xt[40]=3;X[101]=Xt[101]=1;X[69]=Xt[69]=1;rt[149]=Ut[149]=21;rt[21]=Ut[21]=21;$[86]=et[86]=17;$[84]=et[84]=17;Y[89]=Z[89]=9;Y[81]=Z[81]=9;Y[96]=Xt[96]=0;X[96]=et[96]=15;Y[74]=Xt[74]=0;X[74]=et[74]=15;Y[24]=$[24]=8;Z[24]=Ut[24]=7;Y[146]=$[146]=8;Z[146]=Ut[146]=7;X[6]=et[6]=15;$[6]=rt[6]=16;X[164]=et[164]=15;$[164]=rt[164]=16;Z[129]=Ut[129]=7;rt[129]=Xt[129]=20;Z[41]=Ut[41]=7;rt[41]=Xt[41]=20;$[66]=Xt[66]=2;Z[66]=et[66]=19;$[104]=Xt[104]=2;Z[104]=et[104]=19;Y[144]=rt[144]=10;et[144]=Ut[144]=23;Y[26]=rt[26]=10;et[26]=Ut[26]=23;X[36]=Ut[36]=5;$[36]=Xt[36]=2;X[134]=Ut[134]=5;$[134]=Xt[134]=2;Y[9]=rt[9]=10;X[9]=Z[9]=13;Y[161]=rt[161]=10;X[161]=Z[161]=13;X[37]=Ut[37]=5;rt[37]=Xt[37]=20;X[133]=Ut[133]=5;rt[133]=Xt[133]=20;$[148]=rt[148]=16;et[148]=Ut[148]=23;$[22]=rt[22]=16;et[22]=Ut[22]=23;Y[82]=$[82]=8;Z[82]=et[82]=19;Y[88]=$[88]=8;Z[88]=et[88]=19;Y[73]=Xt[73]=0;X[73]=Z[73]=13;Y[97]=Xt[97]=0;X[97]=Z[97]=13;Y[145]=Z[145]=9;rt[145]=Ut[145]=21;Y[25]=Z[25]=9;rt[25]=Ut[25]=21;X[70]=Xt[70]=1;$[70]=et[70]=17;X[100]=Xt[100]=1;$[100]=et[100]=17;Y[34]=Z[34]=9;X[34]=$[34]=12;rt[34]=Ut[34]=21;et[34]=Xt[34]=22;Y[136]=Ut[136]=4;X[136]=Xt[136]=1;$[136]=et[136]=17;Z[136]=rt[136]=18;Y[35]=Ut[35]=4;X[35]=$[35]=12;Z[35]=rt[35]=18;et[35]=Xt[35]=22;Y[153]=Ut[153]=4;Z[153]=rt[153]=18;X[102]=$[102]=12;et[102]=Xt[102]=22;Y[155]=Z[155]=9;rt[155]=Ut[155]=23;X[103]=Xt[103]=1;$[103]=et[103]=17;Y[152]=Ut[152]=4;$[152]=et[152]=17;Z[152]=rt[152]=18;Y[156]=$[156]=8;Z[156]=rt[156]=18;et[156]=Ut[156]=23;Y[137]=Ut[137]=4;X[137]=Xt[137]=1;Z[137]=rt[137]=18;Y[139]=Ut[139]=4;X[139]=Z[139]=13;rt[139]=Xt[139]=20;Y[98]=Z[98]=9;X[98]=$[98]=12;et[98]=Xt[98]=22;Y[99]=Xt[99]=0;X[99]=$[99]=12;Z[99]=et[99]=19;X[38]=$[38]=12;rt[38]=Ut[38]=21;et[38]=Xt[38]=22;X[39]=Ut[39]=5;$[39]=rt[39]=16;et[39]=Xt[39]=22;var z=[];z[1]=z[169]=Zf;z[4]=z[166]=$f;z[16]=z[154]=jf;z[64]=z[106]=tl;z[168]=z[2]=el;z[162]=z[8]=rl;z[138]=z[32]=nl;z[42]=z[128]=il;z[5]=z[165]=y1;z[20]=z[150]=m1;z[80]=z[90]=_1;z[65]=z[105]=E1;z[160]=z[10]=x1;z[130]=z[40]=w1;z[85]=I1;z[101]=z[69]=C1;z[149]=z[21]=S1;z[86]=z[84]=N1;z[89]=z[81]=P1;z[96]=z[74]=M1;z[24]=z[146]=L1;z[6]=z[164]=O1;z[129]=z[41]=b1;z[66]=z[104]=R1;z[144]=z[26]=A1;z[36]=z[134]=D1;z[9]=z[161]=T1;z[37]=z[133]=F1;z[148]=z[22]=B1;z[82]=z[88]=G1;z[73]=z[97]=k1;z[145]=z[25]=q1;z[70]=z[100]=z1;z[34]=function(e){return[il(e),rl(e)]};z[35]=X1;z[136]=function(e){return[nl(e),el(e)]};z[153]=function(e){return[jf(e),Zf(e)]};z[102]=function(e){return[$f(e),tl(e)]};z[155]=U1;z[103]=Y1;z[152]=function(e){return[jf(e),el(e)]};z[156]=V1;z[137]=function(e){return[nl(e),Zf(e)]};z[139]=H1;z[98]=function(e){return[rl(e),tl(e)]};z[99]=W1;z[38]=function(e){return[$f(e),il(e)]};z[39]=J1;function w(e,t,r){return(e-t)/(r-t)}function Xu(e){return e.constructor.toString().indexOf("Array")>-1}function K1(e,t,r){for(var n=e.length-1,i=e[0].length-1,o={rows:n,cols:i,cells:[]},s=t+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var f=0,l=e[a+1][u],c=e[a+1][u+1],h=e[a][u+1],p=e[a][u];if(!(isNaN(l)||isNaN(c)||isNaN(h)||isNaN(p))){f|=l<t?0:l>s?128:64,f|=c<t?0:c>s?32:16,f|=h<t?0:h>s?8:4,f|=p<t?0:p>s?2:1;var d=+f,m=0;if(f===17||f===18||f===33||f===34||f===38||f===68||f===72||f===98||f===102||f===132||f===136||f===137||f===152||f===153){var x=(l+c+h+p)/4;m=x>s?2:x<t?0:1,f===34?m===1?f=35:m===0&&(f=136):f===136?m===1?(f=35,m=4):m===0&&(f=34):f===17?m===1?(f=155,m=4):m===0&&(f=153):f===68?m===1?(f=103,m=4):m===0&&(f=102):f===153?m===1&&(f=155):f===102?m===1&&(f=103):f===152?m<2&&(f=156,m=1):f===137?m<2&&(f=139,m=1):f===98?m<2&&(f=99,m=1):f===38?m<2&&(f=39,m=1):f===18?m>0?(f=156,m=4):f=152:f===33?m>0?(f=139,m=4):f=137:f===72?m>0?(f=99,m=4):f=98:f===132&&(m>0?(f=39,m=4):f=38)}if(f!=0&&f!=170){var _,g,v,y,E,S,C,N;_=g=v=y=E=S=C=N=.5;var I=[];f===1?(v=1-w(t,h,p),N=1-w(t,l,p),I.push(Z[f])):f===169?(v=w(s,p,h),N=w(s,p,l),I.push(Z[f])):f===4?(S=1-w(t,c,h),y=w(t,p,h),I.push(X[f])):f===166?(S=w(s,h,c),y=1-w(s,h,p),I.push(X[f])):f===16?(E=w(t,h,c),g=w(t,l,c),I.push(Y[f])):f===154?(E=1-w(s,c,h),g=1-w(s,c,l),I.push(Y[f])):f===64?(C=w(t,p,l),_=1-w(t,c,l),I.push(et[f])):f===106?(C=1-w(s,l,p),_=w(s,l,c),I.push(et[f])):f===168?(y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),I.push($[f]),I.push(Z[f])):f===2?(y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),I.push($[f]),I.push(Z[f])):f===162?(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),I.push($[f]),I.push(Z[f])):f===8?(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),I.push(Y[f]),I.push(X[f])):f===138?(E=1-w(t,c,h),S=1-w(s,c,h),_=1-w(s,c,l),g=1-w(t,c,l),I.push(Y[f]),I.push(X[f])):f===32?(E=w(s,h,c),S=w(t,h,c),_=w(t,l,c),g=w(s,l,c),I.push(Y[f]),I.push(X[f])):f===42?(N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c),I.push(rt[f]),I.push(et[f])):f===128&&(N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l),I.push(rt[f]),I.push(et[f])),f===5?(S=1-w(t,c,h),N=1-w(t,l,p),I.push(X[f])):f===165?(S=w(s,h,c),N=w(s,p,l),I.push(X[f])):f===20?(y=w(t,p,h),g=w(t,l,c),I.push($[f])):f===150?(y=1-w(s,h,p),g=1-w(s,c,l),I.push($[f])):f===80?(E=w(t,h,c),C=w(t,p,l),I.push(Y[f])):f===90?(E=1-w(s,c,h),C=1-w(s,l,p),I.push(Y[f])):f===65?(v=1-w(t,h,p),_=1-w(t,c,l),I.push(Z[f])):f===105?(v=w(s,p,h),_=w(s,l,c),I.push(Z[f])):f===160?(E=w(s,h,c),S=w(t,h,c),N=w(t,p,l),C=w(s,p,l),I.push(Y[f]),I.push(X[f])):f===10?(E=1-w(t,c,h),S=1-w(s,c,h),N=1-w(s,l,p),C=1-w(t,l,p),I.push(Y[f]),I.push(X[f])):f===130?(y=1-w(t,h,p),v=1-w(s,h,p),_=1-w(s,c,l),g=1-w(t,c,l),I.push($[f]),I.push(Z[f])):f===40?(y=w(s,p,h),v=w(t,p,h),_=w(t,l,c),g=w(s,l,c),I.push($[f]),I.push(Z[f])):f===101?(S=w(s,h,c),_=w(s,l,c),I.push(X[f])):f===69?(S=1-w(t,c,h),_=1-w(t,c,l),I.push(X[f])):f===149?(N=w(s,p,l),g=1-w(s,c,l),I.push(rt[f])):f===21?(N=1-w(t,l,p),g=w(t,l,c),I.push(rt[f])):f===86?(y=1-w(s,h,p),C=1-w(s,l,p),I.push($[f])):f===84?(y=w(t,p,h),C=w(t,p,l),I.push($[f])):f===89?(E=1-w(s,c,h),v=w(s,p,h),I.push(Z[f])):f===81?(E=w(t,h,c),v=1-w(t,h,p),I.push(Z[f])):f===96?(E=w(s,h,c),S=w(t,h,c),C=w(t,p,l),_=w(s,l,c),I.push(Y[f]),I.push(X[f])):f===74?(E=1-w(t,c,h),S=1-w(s,c,h),C=1-w(s,l,p),_=1-w(t,c,l),I.push(Y[f]),I.push(X[f])):f===24?(E=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),g=w(t,l,c),I.push(Y[f]),I.push(Z[f])):f===146?(E=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),g=1-w(s,c,l),I.push(Y[f]),I.push(Z[f])):f===6?(S=1-w(t,c,h),y=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),I.push(X[f]),I.push($[f])):f===164?(S=w(s,h,c),y=w(t,p,h),N=w(t,p,l),C=w(s,p,l),I.push(X[f]),I.push($[f])):f===129?(v=1-w(t,h,p),N=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l),I.push(Z[f]),I.push(rt[f])):f===41?(v=w(s,p,h),N=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c),I.push(Z[f]),I.push(rt[f])):f===66?(y=1-w(t,h,p),v=1-w(s,h,p),C=1-w(s,l,p),_=1-w(t,c,l),I.push($[f]),I.push(Z[f])):f===104?(y=w(s,p,h),v=w(t,p,h),C=w(t,p,l),_=w(s,l,c),I.push(Z[f]),I.push(Xt[f])):f===144?(E=w(t,h,c),N=w(t,p,l),C=w(s,p,l),g=1-w(s,c,l),I.push(Y[f]),I.push(et[f])):f===26?(E=1-w(s,c,h),N=1-w(s,l,p),C=1-w(t,l,p),g=w(t,l,c),I.push(Y[f]),I.push(et[f])):f===36?(S=w(s,h,c),y=w(t,p,h),_=w(t,l,c),g=w(s,l,c),I.push(X[f]),I.push($[f])):f===134?(S=1-w(t,c,h),y=1-w(s,h,p),_=1-w(s,c,l),g=1-w(t,c,l),I.push(X[f]),I.push($[f])):f===9?(E=1-w(t,c,h),S=1-w(s,c,h),v=w(s,p,h),N=1-w(t,l,p),I.push(Y[f]),I.push(X[f])):f===161?(E=w(s,h,c),S=w(t,h,c),v=1-w(t,h,p),N=w(s,p,l),I.push(Y[f]),I.push(X[f])):f===37?(S=w(s,h,c),N=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c),I.push(X[f]),I.push(rt[f])):f===133?(S=1-w(t,c,h),N=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l),I.push(X[f]),I.push(rt[f])):f===148?(y=w(t,p,h),N=w(t,p,l),C=w(s,p,l),g=1-w(s,c,l),I.push($[f]),I.push(et[f])):f===22?(y=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),g=w(t,l,c),I.push($[f]),I.push(et[f])):f===82?(E=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),C=1-w(s,l,p),I.push(Y[f]),I.push(Z[f])):f===88?(E=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),C=w(t,p,l),I.push(Y[f]),I.push(Z[f])):f===73?(E=1-w(t,c,h),S=1-w(s,c,h),v=w(s,p,h),_=1-w(t,c,l),I.push(Y[f]),I.push(X[f])):f===97?(E=w(s,h,c),S=w(t,h,c),v=1-w(t,h,p),_=w(s,l,c),I.push(Y[f]),I.push(X[f])):f===145?(E=w(t,h,c),v=1-w(t,h,p),N=w(s,p,l),g=1-w(s,c,l),I.push(Y[f]),I.push(rt[f])):f===25?(E=1-w(s,c,h),v=w(s,p,h),N=1-w(t,l,p),g=w(t,l,c),I.push(Y[f]),I.push(rt[f])):f===70?(S=1-w(t,c,h),y=1-w(s,h,p),C=1-w(s,l,p),_=1-w(t,c,l),I.push(X[f]),I.push($[f])):f===100?(S=w(s,h,c),y=w(t,p,h),C=w(t,p,l),_=w(s,l,c),I.push(X[f]),I.push($[f])):f===34?(m===0?(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)):(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)),I.push(Y[f]),I.push(X[f]),I.push(rt[f]),I.push(et[f])):f===35?(m===4?(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)):(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)),I.push(Y[f]),I.push(X[f]),I.push(Z[f]),I.push(et[f])):f===136?(m===0?(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)):(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)),I.push(Y[f]),I.push(X[f]),I.push(rt[f]),I.push(et[f])):f===153?(m===0?(E=w(t,h,c),v=1-w(t,h,p),N=1-w(t,l,p),g=w(t,l,c)):(E=1-w(s,c,h),v=w(s,p,h),N=w(s,p,l),g=1-w(s,c,l)),I.push(Y[f]),I.push(Z[f])):f===102?(m===0?(S=1-w(t,c,h),y=w(t,p,h),C=w(t,p,l),_=1-w(t,c,l)):(S=w(s,h,c),y=1-w(s,h,p),C=1-w(s,l,p),_=w(s,l,c)),I.push(X[f]),I.push(et[f])):f===155?(m===4?(E=w(t,h,c),v=1-w(t,h,p),N=1-w(t,l,p),g=w(t,l,c)):(E=1-w(s,c,h),v=w(s,p,h),N=w(s,p,l),g=1-w(s,c,l)),I.push(Y[f]),I.push(rt[f])):f===103?(m===4?(S=1-w(t,c,h),y=w(t,p,h),C=w(t,p,l),_=1-w(t,c,l)):(S=w(s,h,c),y=1-w(s,h,p),C=1-w(s,l,p),_=w(s,l,c)),I.push(X[f]),I.push($[f])):f===152?(m===0?(E=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),g=w(t,l,c)):(E=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),g=1-w(s,c,l)),I.push(Y[f]),I.push($[f]),I.push(Z[f])):f===156?(m===4?(E=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),g=w(t,l,c)):(E=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),N=w(t,p,l),C=w(s,p,l),g=1-w(s,c,l)),I.push(Y[f]),I.push(Z[f]),I.push(et[f])):f===137?(m===0?(E=w(s,h,c),S=w(t,h,c),v=1-w(t,h,p),N=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)):(E=1-w(t,c,h),S=1-w(s,c,h),v=w(s,p,h),N=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)),I.push(Y[f]),I.push(X[f]),I.push(Z[f])):f===139?(m===4?(E=w(s,h,c),S=w(t,h,c),v=1-w(t,h,p),N=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)):(E=1-w(t,c,h),S=1-w(s,c,h),v=w(s,p,h),N=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)),I.push(Y[f]),I.push(X[f]),I.push(rt[f])):f===98?(m===0?(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),C=w(t,p,l),_=1-w(t,c,l)):(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),C=1-w(s,l,p),_=w(s,l,c)),I.push(Y[f]),I.push(X[f]),I.push(et[f])):f===99?(m===4?(E=1-w(t,c,h),S=1-w(s,c,h),y=w(s,p,h),v=w(t,p,h),C=w(t,p,l),_=1-w(t,c,l)):(E=w(s,h,c),S=w(t,h,c),y=1-w(t,h,p),v=1-w(s,h,p),C=1-w(s,l,p),_=w(s,l,c)),I.push(Y[f]),I.push(X[f]),I.push(Z[f])):f===38?(m===0?(S=1-w(t,c,h),y=w(t,p,h),N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)):(S=w(s,h,c),y=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)),I.push(X[f]),I.push(rt[f]),I.push(et[f])):f===39?(m===4?(S=1-w(t,c,h),y=w(t,p,h),N=w(t,p,l),C=w(s,p,l),_=1-w(s,c,l),g=1-w(t,c,l)):(S=w(s,h,c),y=1-w(s,h,p),N=1-w(s,l,p),C=1-w(t,l,p),_=w(t,l,c),g=w(s,l,c)),I.push(X[f]),I.push($[f]),I.push(et[f])):f===85&&(E=1,S=0,y=1,v=0,N=0,C=1,_=0,g=1),(_<0||_>1||g<0||g>1||E<0||E>1||y<0||y>1||N<0||N>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+f+" "+d+" "+l+","+c+","+h+","+p+" "+m+" "+_+" "+g+" "+E+" "+S+" "+y+" "+v+" "+N+" "+C),o.cells[a][u]={cval:f,cval_real:d,flipped:m,topleft:_,topright:g,righttop:E,rightbottom:S,bottomright:y,bottomleft:v,leftbottom:N,lefttop:C,edges:I}}}}}return o}function Q1(e){for(var t=[],r=e.rows,n=e.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(typeof e.cells[o][s]<"u"&&e.cells[o][s].edges.length>0){var a=e.cells[o][s],u=j1(a),f=null,l=s,c=o;u!==null&&i.push([u.p[0]+l,u.p[1]+c]);do{if(f=t_(e.cells[c][l],u.x,u.y,u.o),f!==null)i.push([f.p[0]+l,f.p[1]+c]),l+=f.x,c+=f.y,u=f;else break;if(c<0||c>=r||l<0||l>=n||typeof e.cells[c][l]>"u"){l-=f.x,c-=f.y;var h=Z1(e,l,c,f.x,f.y,f.o);if(h!==null)h.path.forEach(function(p){i.push(p)}),l=h.i,c=h.j,u=h;else break}}while(typeof e.cells[c][l]<"u"&&e.cells[c][l].edges.length>0);t.push(i),i=[],e.cells[o][s].edges.length>0&&s--}return t}function Z1(e,t,r,n,i,o){for(var s=e.cells[r][t],a=s.cval_real,u=t+n,f=r+i,l=[],c=!1;!c;){if(typeof e.cells[f]>"u"||typeof e.cells[f][u]>"u")if(f-=i,u-=n,s=e.cells[f][u],a=s.cval_real,i===-1)if(o===0)if(a&$e)l.push([u,f]),n=-1,i=0,o=0;else if(a&Ve)l.push([u+1,f]),n=1,i=0,o=0;else{l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else if(a&$e)l.push([u,f]),n=-1,i=0,o=0;else if(a&Ve){l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else{l.push([u+s.bottomleft,f]),n=0,i=1,o=0,c=!0;break}else if(i===1)if(o===0)if(a&hn)l.push([u+1,f+1]),n=1,i=0,o=1;else if(a&pr){l.push([u+s.topleft,f+1]),n=0,i=-1,o=0,c=!0;break}else{l.push([u+s.topright,f+1]),n=0,i=-1,o=1,c=!0;break}else a&hn?(l.push([u+1,f+1]),n=1,i=0,o=1):(l.push([u+1,f+1]),n=1,i=0,o=1);else if(n===-1)if(o===0)if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else if(a&$e){l.push([u,f+s.leftbottom]),n=1,i=0,o=0,c=!0;break}else{l.push([u,f+s.lefttop]),n=1,i=0,o=1,c=!0;break}else if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(n===1)if(o===0)if(a&Ve)l.push([u+1,f]),n=0,i=-1,o=1;else{l.push([u+1,f+s.rightbottom]),n=-1,i=0,o=0,c=!0;break}else if(a&Ve)l.push([u+1,f]),n=0,i=-1,o=1;else if(a&hn){l.push([u+1,f+s.righttop]),n=-1,i=0,o=1;break}else{l.push([u+1,f+s.rightbottom]),n=-1,i=0,o=0,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}else if(s=e.cells[f][u],a=s.cval_real,n===-1)if(o===0)if(typeof e.cells[f-1]<"u"&&typeof e.cells[f-1][u]<"u")n=0,i=-1,o=1;else if(a&$e)l.push([u,f]);else{l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else if(a&pr)console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");else{console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+f);break}else if(n===1)if(o===0){console.log("MarchingSquaresJS-isoBands: wtf");break}else if(typeof e.cells[f+1]<"u"&&typeof e.cells[f+1][u]<"u")n=0,i=1,o=0;else if(a&hn)l.push([u+1,f+1]),n=1,i=0,o=1;else{l.push([u+s.topleft,f+1]),n=0,i=-1,o=0,c=!0;break}else if(i===-1)if(o===1)if(typeof e.cells[f][u+1]<"u")n=1,i=0,o=1;else if(a&Ve)l.push([u+1,f]),n=0,i=-1,o=1;else{l.push([u+1,f+s.righttop]),n=-1,i=0,o=1,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(i===1)if(o===0)if(typeof e.cells[f][u-1]<"u")n=-1,i=0,o=0;else if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else{l.push([u,f+s.leftbottom]),n=1,i=0,o=0,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else{console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(u+=n,f+=i,u===t&&f===r)break}return{path:l,i:u,j:f,x:n,y:i,o}}function $1(e,t){delete e.edges[t];for(var r=t+1;r<e.edges.length;r++)e.edges[r-1]=e.edges[r];e.edges.pop()}function j1(e){if(e.edges.length>0){var t=e.edges[e.edges.length-1],r=e.cval_real;switch(t){case 0:return r&hn?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 1:return r&Ve?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 2:return r&Ve?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 3:return r&$e?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 4:return r&hn?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 5:return r&Ve?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 6:return r&Ve?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 7:return r&$e?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 8:return r&Ve?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.righttop],x:-1,y:0,o:1};case 9:return r&$e?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 10:return r&$e?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.righttop],x:-1,y:0,o:1};case 11:return r&pr?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 12:return r&Ve?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 13:return r&$e?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 14:return r&$e?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 15:return r&pr?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 16:return r&Ve?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 17:return r&pr?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 18:return r&$e?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 19:return r&pr?{p:[e.bottomleft,0],x:0,y:1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 20:return r&pr?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 21:return r&hn?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.topright,1],x:0,y:-1,o:1};case 22:return r&pr?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 23:return r&hn?{p:[0,e.lefttop],x:1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e);break}}return null}function t_(e,t,r,n){var i,o,s,a,u=e.cval,f;switch(t){case-1:switch(n){case 0:i=X[u],s=Pt[u],a=Mt[u],f=Lt[u];break;default:i=Y[u],s=Ct[u],a=St[u],f=Nt[u];break}break;case 1:switch(n){case 0:i=rt[u],s=kt[u],a=qt[u],f=zt[u];break;default:i=et[u],s=Ft[u],a=Bt[u],f=Gt[u];break}break;default:switch(r){case-1:switch(n){case 0:i=Xt[u],s=mt[u],a=_t[u],f=Et[u];break;default:i=Ut[u],s=xt[u],a=wt[u],f=It[u];break}break;case 1:switch(n){case 0:i=Z[u],s=Ot[u],a=bt[u],f=Rt[u];break;default:i=$[u],s=At[u],a=Dt[u],f=Tt[u];break}break}break}if(o=e.edges.indexOf(i),typeof e.edges[o]<"u")$1(e,o);else return null;switch(u=e.cval_real,i){case 0:u&hn?(t=e.topleft,r=1):(t=1,r=e.righttop);break;case 1:u&Ve?(t=1,r=e.rightbottom):(t=e.topleft,r=1);break;case 2:u&Ve?(t=e.topleft,r=1):(t=e.bottomright,r=0);break;case 3:u&$e?(t=e.bottomleft,r=0):(t=e.topleft,r=1);break;case 4:u&hn?(t=e.topright,r=1):(t=1,r=e.righttop);break;case 5:u&Ve?(t=1,r=e.rightbottom):(t=e.topright,r=1);break;case 6:u&Ve?(t=e.topright,r=1):(t=e.bottomright,r=0);break;case 7:u&$e?(t=e.bottomleft,r=0):(t=e.topright,r=1);break;case 8:u&Ve?(t=1,r=e.righttop):(t=e.bottomright,r=0);break;case 9:u&$e?(t=e.bottomleft,r=0):(t=1,r=e.righttop);break;case 10:u&$e?(t=1,r=e.righttop):(t=0,r=e.leftbottom);break;case 11:u&pr?(t=0,r=e.lefttop):(t=1,r=e.righttop);break;case 12:u&Ve?(t=1,r=e.rightbottom):(t=e.bottomright,r=0);break;case 13:u&$e?(t=e.bottomleft,r=0):(t=1,r=e.rightbottom);break;case 14:u&$e?(t=1,r=e.rightbottom):(t=0,r=e.leftbottom);break;case 15:u&pr?(t=0,r=e.lefttop):(t=1,r=e.rightbottom);break;case 16:u&Ve?(t=0,r=e.leftbottom):(t=e.bottomright,r=0);break;case 17:u&pr?(t=0,r=e.lefttop):(t=e.bottomright,r=0);break;case 18:u&$e?(t=e.bottomleft,r=0):(t=0,r=e.leftbottom);break;case 19:u&pr?(t=0,r=e.lefttop):(t=e.bottomleft,r=0);break;case 20:u&pr?(t=0,r=e.leftbottom):(t=e.topleft,r=1);break;case 21:u&hn?(t=e.topright,r=1):(t=0,r=e.leftbottom);break;case 22:u&pr?(t=0,r=e.lefttop):(t=e.topleft,r=1);break;case 23:u&hn?(t=e.topright,r=1):(t=0,r=e.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e),null}return(typeof t>"u"||typeof r>"u"||typeof s>"u"||typeof a>"u"||typeof f>"u")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(e),console.log(t+" "+r+" "+s+" "+a+" "+f)),{p:[t,r],x:s,y:a,o:f}}function e_(e){var t=[],r=0;return e.cells.forEach(function(n,i){n.forEach(function(o,s){if(typeof o<"u"){var a=z[o.cval](o);typeof a=="object"&&Xu(a)?typeof a[0]=="object"&&Xu(a[0])?typeof a[0][0]=="object"&&Xu(a[0][0])?a.forEach(function(u){u.forEach(function(f){f[0]+=s,f[1]+=i}),t[r++]=u}):(a.forEach(function(u){u[0]+=s,u[1]+=i}),t[r++]=a):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),t}function zw(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Xi(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!re(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=g1(e,{zProperty:n,flip:!0}),a=r_(s,t,n);a=n_(a,s,e);var u=a.map(function(f,l){if(o[l]&&!re(o[l]))throw new Error("Each mappedProperty is required to be an Object");var c=Rf({},i,o[l]);c[n]=f[n];var h=Qr(f.groupedRings,c);return h});return nt(u)}function r_(e,t,r){for(var n=[],i=1;i<t.length;i++){var o=+t[i-1],s=+t[i],a=d1(e,o,s-o),u=i_(a),f=o_(u),l={};l.groupedRings=f,l[r]=o+"-"+s,n.push(l)}return n}function n_(e,t,r){var n=Oe(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=t[0].length-1,f=t.length-1,l=i/u,c=o/f,h=function(p){p[0]=p[0]*l+s,p[1]=p[1]*c+a};return e.forEach(function(p){p.groupedRings.forEach(function(d){d.forEach(function(m){m.forEach(h)})})}),e}function i_(e){var t=[],r=[];e.forEach(function(i){var o=Ip(dt([i]));r.push(o),t.push({ring:i,area:o})}),r.sort(function(i,o){return o-i});var n=[];return r.forEach(function(i){for(var o=0;o<t.length;o++)if(t[o].area===i){n.push(t[o].ring),t.splice(o,1);break}}),n}function o_(e){for(var t=e.map(function(u){return{lrCoordinates:u,grouped:!1}}),r=[];!a_(t);)for(var n=0;n<t.length;n++)if(!t[n].grouped){var i=[];i.push(t[n].lrCoordinates),t[n].grouped=!0;for(var o=dt([t[n].lrCoordinates]),s=n+1;s<t.length;s++)if(!t[s].grouped){var a=dt([t[s].lrCoordinates]);s_(a,o)&&(i.push(t[s].lrCoordinates),t[s].grouped=!0)}r.push(i)}return r}function s_(e,t){for(var r=qf(e),n=0;n<r.features.length;n++)if(!ce(r.features[n],t))return!1;return!0}function a_(e){for(var t=0;t<e.length;t++)if(e[t].grouped===!1)return!1;return!0}function u_(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(n||(n=Zi(e)),(i===!1||i===void 0)&&(e=vr(e)),Le(e,function(o){var s=Go(n,o),a=s+t,u=Uf(n,o),f=ot(Gs(n,u,a));o[0]=f[0],o[1]=f[1]})),e}function f_(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!e)throw new Error("geojson required");if(typeof t!="number"||t===0)throw new Error("invalid factor");var o=Array.isArray(n)||typeof n=="object";return i!==!0&&(e=vr(e)),e.type==="FeatureCollection"&&!o?(Qt(e,function(s,a){e.features[a]=Uc(s,t,n)}),e):Uc(e,t,n)}function Uc(e,t,r){var n=Gr(e)==="Point";return r=l_(e,r),t===1||n||Le(e,function(i){var o=Uf(r,i),s=Go(r,i),a=o*t,u=ot(Gs(r,a,s));i[0]=u[0],i[1]=u[1],i.length===3&&(i[2]*=t)}),e}function l_(e,t){if(t==null&&(t="centroid"),Array.isArray(t)||typeof t=="object")return se(t);var r=e.bbox?e.bbox:Oe(e),n=r[0],i=r[1],o=r[2],s=r[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return pt([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return pt([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return pt([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return pt([o,s]);case"center":return kf(e);case void 0:case null:case"centroid":return Zi(e);default:throw new Error("invalid origin")}}function Xw(e,t,r,n){if(n=n||{},!re(n))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");if(o&&typeof o!="number"&&isNaN(o))throw new Error("zTranslation is not a number");if(o=o!==void 0?o:0,t===0&&o===0)return e;if(r==null||isNaN(r))throw new Error("direction is required");return t<0&&(t=-t,r=r+180),(s===!1||s===void 0)&&(e=vr(e)),Le(e,function(a){var u=ot(Gs(a,t,r,{units:i}));a[0]=u[0],a[1]=u[1],o&&a.length===3&&(a[2]+=o)}),e}function Fa(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function yf(e,t){return e[0]*t[1]-t[0]*e[1]}function c_(e,t){return[e[0]+t[0],e[1]+t[1]]}function h_(e,t){return[e[0]-t[0],e[1]-t[1]]}function p_(e,t){return[e*t[0],e*t[1]]}function g_(e,t){var r=e[0],n=Fa(e),i=t[0],o=Fa(t),s=yf(n,o),a=h_(i,r),u=yf(a,o),f=u/s,l=c_(r,p_(f,n));return l}function v_(e,t){var r=Fa(e),n=Fa(t);return yf(r,n)===0}function d_(e,t){return v_(e,t)?!1:g_(e,t)}function Uw(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=Gr(e),o=e.properties;switch(i){case"LineString":return Yc(e,t,n);case"MultiLineString":var s=[];return or(e,function(a){s.push(Yc(a,t,n).geometry.coordinates)}),ho(s,o);default:throw new Error("geometry "+i+" is not supported")}}function Yc(e,t,r){var n=[],i=Hh(t,r),o=ot(e),s=[];return o.forEach(function(a,u){if(u!==o.length-1){var f=y_(a,o[u+1],i);if(n.push(f),u>0){var l=n[u-1],c=d_(f,l);c!==!1&&(l[1]=c,f[0]=c),s.push(l[0]),u===o.length-2&&(s.push(f[0]),s.push(f[1]))}o.length===2&&(s.push(f[0]),s.push(f[1]))}}),$t(s,e.properties)}function y_(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,s=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,s],[o,a]]}function m_(e){return(e>0)-(e<0)||+e}function ol(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=r[0]-t[0],s=r[1]-t[1];return m_(n*s-o*i)}function __(e,t){var r=e.geometry.coordinates[0].map(function(s){return s[0]}),n=e.geometry.coordinates[0].map(function(s){return s[1]}),i=t.geometry.coordinates[0].map(function(s){return s[0]}),o=t.geometry.coordinates[0].map(function(s){return s[1]});return Math.max.apply(null,r)===Math.max.apply(null,i)&&Math.max.apply(null,n)===Math.max.apply(null,o)&&Math.min.apply(null,r)===Math.min.apply(null,i)&&Math.min.apply(null,n)===Math.min.apply(null,o)}function Vc(e,t){return t.geometry.coordinates[0].every(function(r){return ce(pt(r),e)})}function E_(e,t){return e[0]===t[0]&&e[1]===t[1]}var Hc=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(t){return t.join(",")},e.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(r){return r.from.id!==t.from.id})},e.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(r){return r.to.id!==t.to.id})},e.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(r,n){var i=r.to,o=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]===0&&o.coordinates[0]-t.coordinates[0]===0)return i.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var s=ol(t.coordinates,i.coordinates,o.coordinates);if(s<0)return 1;if(s>0)return-1;var a=Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2),u=Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2);return a-u}),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},e.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},e}(),x_=function(){function e(t,r){this.from=t,this.to=r,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return $t([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(t){return ol(t.from.coordinates,t.to.coordinates,this.to.coordinates)},e}(),w_=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},e.prototype.get=function(t){return this.edges[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(t){this.edges.forEach(t)},e.prototype.map=function(t){return this.edges.map(t)},e.prototype.some=function(t){return this.edges.some(t)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var t=this,r=this.edges.reduce(function(s,a,u){return a.from.coordinates[1]>t.edges[s].from.coordinates[1]&&(s=u),s},0),n=(r===0?this.length:r)-1,i=(r+1)%this.length,o=ol(this.edges[n].from.coordinates,this.edges[r].from.coordinates,this.edges[i].from.coordinates);return o===0?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},e.prototype.toMultiPoint=function(){return tu(this.edges.map(function(t){return t.from.coordinates}))},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(r){return r.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=dt([t])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=gy(this.toPolygon())},e.findEdgeRingContaining=function(t,r){var n=t.getEnvelope(),i,o;return r.forEach(function(s){var a=s.getEnvelope();if(o&&(i=o.getEnvelope()),!__(a,n)&&Vc(a,n)){for(var u=t.map(function(d){return d.from.coordinates}),f=void 0,l=function(d){s.some(function(m){return E_(d,m.from.coordinates)})||(f=d)},c=0,h=u;c<h.length;c++){var p=h[c];l(p)}f&&s.inside(pt(f))&&(!o||Vc(i,a))&&(o=s)}}),o},e.prototype.inside=function(t){return ce(t,this.toPolygon())},e}();const rg=w_;function I_(e){if(!e)throw new Error("No geojson passed");if(e.type!=="FeatureCollection"&&e.type!=="GeometryCollection"&&e.type!=="MultiLineString"&&e.type!=="LineString"&&e.type!=="Feature")throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var C_=function(){function e(){this.edges=[],this.nodes={}}return e.fromGeoJson=function(t){I_(t);var r=new e;return or(t,function(n){Aa(n,"LineString","Graph::fromGeoJson"),Wh(n,function(i,o){if(i){var s=r.getNode(i),a=r.getNode(o);r.addEdge(s,a)}return o})}),r},e.prototype.getNode=function(t){var r=Hc.buildId(t),n=this.nodes[r];return n||(n=this.nodes[r]=new Hc(t)),n},e.prototype.addEdge=function(t,r){var n=new x_(t,r),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},e.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(r){return t.nodes[r]}).forEach(function(r){return t._removeIfDangle(r)})},e.prototype._removeIfDangle=function(t){var r=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(i){return i.to});this.removeNode(t),n.forEach(function(i){return r._removeIfDangle(i)})}},e.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(r){r.label===r.symetric.label&&(t.removeEdge(r.symetric),t.removeEdge(r))})},e.prototype._computeNextCWEdges=function(t){var r=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(n){return r._computeNextCWEdges(r.nodes[n])}):t.getOuterEdges().forEach(function(n,i){t.getOuterEdge((i===0?t.getOuterEdges().length:i)-1).symetric.next=n})},e.prototype._computeNextCCWEdges=function(t,r){for(var n=t.getOuterEdges(),i,o,s=n.length-1;s>=0;--s){var a=n[s],u=a.symetric,f=void 0,l=void 0;a.label===r&&(f=a),u.label===r&&(l=u),!(!f||!l)&&(l&&(o=l),f&&(o&&(o.next=f,o=void 0),i||(i=f)))}o&&(o.next=i)},e.prototype._findLabeledEdgeRings=function(){var t=[],r=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do i.label=r,i=i.next;while(!n.isEqual(i));r++}}),t},e.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=void 0}),this._findLabeledEdgeRings().forEach(function(n){t._findIntersectionNodes(n).forEach(function(i){t._computeNextCCWEdges(i,n.label)})});var r=[];return this.edges.forEach(function(n){n.ring||r.push(t._findEdgeRing(n))}),r},e.prototype._findIntersectionNodes=function(t){var r=[],n=t,i=function(){var o=0;n.from.getOuterEdges().forEach(function(s){s.label===t.label&&++o}),o>1&&r.push(n.from),n=n.next};do i();while(!t.isEqual(n));return r},e.prototype._findEdgeRing=function(t){var r=t,n=new rg;do n.push(r),r.ring=n,r=r.next;while(!t.isEqual(r));return n},e.prototype.removeNode=function(t){var r=this;t.getOuterEdges().forEach(function(n){return r.removeEdge(n)}),t.innerEdges.forEach(function(n){return r.removeEdge(n)}),delete this.nodes[t.id]},e.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(r){return!r.isEqual(t)}),t.deleteEdge()},e}();const S_=C_;function Yw(e){var t=S_.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var r=[],n=[];return t.getEdgeRings().filter(function(i){return i.isValid()}).forEach(function(i){i.isHole()?r.push(i):n.push(i)}),r.forEach(function(i){rg.findEdgeRingContaining(i,n)&&n.push(i)}),nt(n.map(function(i){return i.toPolygon()}))}function N_(e,t){var r=!0;return or(e,function(n){or(t,function(i){if(r===!1)return!1;r=P_(n.geometry,i.geometry)})}),r}function P_(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!b_(e.coordinates,t.coordinates);case"LineString":return!Wc(t,e);case"Polygon":return!ce(e,t)}break;case"LineString":switch(t.type){case"Point":return!Wc(e,t);case"LineString":return!M_(e,t);case"Polygon":return!Jc(t,e)}break;case"Polygon":switch(t.type){case"Point":return!ce(t,e);case"LineString":return!Jc(e,t);case"Polygon":return!L_(t,e)}}return!1}function Wc(e,t){for(var r=0;r<e.coordinates.length-1;r++)if(O_(e.coordinates[r],e.coordinates[r+1],t.coordinates))return!0;return!1}function M_(e,t){var r=Ui(e,t);return r.features.length>0}function Jc(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(ce(i,e))return!0}var o=Ui(t,uf(e));return o.features.length>0}function L_(e,t){for(var r=0,n=e.coordinates[0];r<n.length;r++){var i=n[r];if(ce(i,t))return!0}for(var o=0,s=t.coordinates[0];o<s.length;o++){var a=s[o];if(ce(a,e))return!0}var u=Ui(uf(e),uf(t));return u.features.length>0}function O_(e,t,r){var n=r[0]-e[0],i=r[1]-e[1],o=t[0]-e[0],s=t[1]-e[1],a=n*s-i*o;return a!==0?!1:Math.abs(o)>=Math.abs(s)?o>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:s>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]}function b_(e,t){return e[0]===t[0]&&e[1]===t[1]}function Vw(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return sl(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return R_(r,n);case"MultiPoint":return A_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Wr(n,r,{ignoreEndVertices:!0});case"LineString":return F_(r,n);case"MultiPoint":return D_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ce(n,r,{ignoreBoundary:!0});case"LineString":return B_(r,n);case"Polygon":return G_(r,n);case"MultiPoint":return T_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function R_(e,t){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(sl(e.coordinates[r],t.coordinates)){n=!0;break}return n}function A_(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=e.coordinates;s<a.length;s++){var u=a[s];if(sl(i,u)){o=!0;break}}if(!o)return!1}return!0}function D_(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Wr(o,e,{ignoreEndVertices:!0})&&(r=!0),!Wr(o,e))return!1}return!!r}function T_(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(!ce(i,e,{ignoreBoundary:!0}))return!1}return!0}function F_(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Wr({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!Wr({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}function B_(e,t){var r=!1,n=0,i=Oe(e),o=Oe(t);if(!ng(i,o))return!1;for(n;n<t.coordinates.length-1;n++){var s=k_(t.coordinates[n],t.coordinates[n+1]);if(ce({type:"Point",coordinates:s},e,{ignoreBoundary:!0})){r=!0;break}}return r}function G_(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var r=Oe(e),n=Oe(t);if(!ng(r,n))return!1;for(var i=fe(t).coordinates,o=0,s=i;o<s.length;o++)for(var a=s[o],u=0,f=a;u<f.length;u++){var l=f[u];if(!ce(l,e))return!1}return!0}function ng(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function sl(e,t){return e[0]===t[0]&&e[1]===t[1]}function k_(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Hw(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Kc(r,n);case"Polygon":return Zc(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Kc(n,r);case"LineString":return q_(r,n);case"Polygon":return Qc(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Zc(n,r);case"LineString":return Qc(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kc(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<t.coordinates.length-1;s++){var a=!0;(s===0||s===t.coordinates.length-2)&&(a=!1),ig(t.coordinates[s],t.coordinates[s+1],e.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function q_(e,t){var r=Ui(e,t);if(r.features.length>0)for(var n=0;n<e.coordinates.length-1;n++)for(var i=0;i<t.coordinates.length-1;i++){var o=!0;if((i===0||i===t.coordinates.length-2)&&(o=!1),ig(e.coordinates[n],e.coordinates[n+1],t.coordinates[i],o))return!0}return!1}function Qc(e,t){var r=Mp(t),n=Ui(e,r);return n.features.length>0}function Zc(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&(!r||!n);o++)ce(pt(e.coordinates[o]),t)?r=!0:n=!0;return n&&r}function ig(e,t,r,n){var i=r[0]-e[0],o=r[1]-e[1],s=t[0]-e[0],a=t[1]-e[1],u=i*a-o*s;return u!==0?!1:n?Math.abs(s)>=Math.abs(a)?s>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:a>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]:Math.abs(s)>=Math.abs(a)?s>0?e[0]<r[0]&&r[0]<t[0]:t[0]<r[0]&&r[0]<e[0]:a>0?e[1]<r[1]&&r[1]<t[1]:t[1]<r[1]&&r[1]<e[1]}var z_=eg,oi=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=e&&e.direction?e.direction:!1,this.pseudoNode=e&&e.pseudoNode?e.pseudoNode:!1,this.objectComparator=e&&e.objectComparator?e.objectComparator:X_};oi.prototype.compare=function(e,t){if(e.type!==t.type||!og(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(e.type.indexOf("Multi")===0){var r=this,n=$c(e),i=$c(t);return n.every(function(o){return this.some(function(s){return r.compare(o,s)})},i)}}return!1};function $c(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function og(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}oi.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].toFixed(this.precision)!==t[r].toFixed(this.precision))return!1;return!0};oi.prototype.compareLine=function(e,t,r,n){if(!og(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!(n&&!this.compareCoord(i[0],o[0])&&(o=this.fixStartIndex(o,i),!o))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):this.compareCoord(i[r],o[o.length-(1+r)])?this.comparePath(i.slice().reverse(),o):!1}};oi.prototype.fixStartIndex=function(e,t){for(var r,n=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){n=i;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r};oi.prototype.comparePath=function(e,t){var r=this;return e.every(function(n,i){return r.compareCoord(n,this[i])},t)};oi.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length),i=this;return r.every(function(o){return this.some(function(s){return i.compareLine(o,s,1,!0)})},n)}else return!1};oi.prototype.compareFeature=function(e,t){return e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t)?!1:this.compare(e.geometry,t.geometry)};oi.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))};oi.prototype.removePseudo=function(e){return e};function X_(e,t){return z_(e,t,{strict:!0})}var U_=oi;const sg=wi(U_);function Ww(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;if(i==="MultiPoint"&&o!=="MultiPoint"||(i==="LineString"||i==="MultiLineString")&&o!=="LineString"&&o!=="MultiLineString"||(i==="Polygon"||i==="MultiPolygon")&&o!=="Polygon"&&o!=="MultiPolygon")throw new Error("features must be of the same type");if(i==="Point")throw new Error("Point geometry not supported");var s=new sg({precision:6});if(s.compare(e,t))return!1;var a=0;switch(i){case"MultiPoint":for(var u=0;u<r.coordinates.length;u++)for(var f=0;f<n.coordinates.length;f++){var l=r.coordinates[u],c=n.coordinates[f];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":Pi(e,function(h){Pi(t,function(p){l1(h,p).features.length&&a++})});break;case"Polygon":case"MultiPolygon":Pi(e,function(h){Pi(t,function(p){Ui(h,p).features.length&&a++})});break}return a>0}function Jw(e,t){var r=fe(e).type,n=fe(t).type;if(r!==n)return!1;var i=new sg({precision:6});return i.compare(To(e),To(t))}function Y_(e,t){var r=!1;return or(e,function(n){or(t,function(i){if(r===!0)return!0;r=!N_(n.geometry,i.geometry)})}),r}var ag={exports:{}},Uu={exports:{}},jc;function V_(){return jc||(jc=1,function(e){function t(r,n,i,o){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,o)}t.prototype.run=function(r,n,i,o){this._init(r,n,i,o);for(var s=0;s<this._datasetLength;s++)if(this._visited[s]!==1){this._visited[s]=1;var a=this._regionQuery(s);if(a.length<this.minPts)this.noise.push(s);else{var u=this.clusters.length;this.clusters.push([]),this._addToCluster(s,u),this._expandCluster(u,a)}}return this.clusters},t.prototype._init=function(r,n,i,o){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),o&&(this.distance=o)},t.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var o=n[i];if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);s.length>=this.minPts&&(n=this._mergeArrays(n,s))}this._assigned[o]!==1&&this._addToCluster(o,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var o=this.distance(this.dataset[r],this.dataset[i]);o<this.epsilon&&n.push(i)}return n},t.prototype._mergeArrays=function(r,n){for(var i=n.length,o=0;o<i;o++){var s=n[o];r.indexOf(s)<0&&r.push(s)}return r},t.prototype._euclideanDistance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;)i+=(r[o]-n[o])*(r[o]-n[o]);return Math.sqrt(i)},e.exports&&(e.exports=t)}(Uu)),Uu.exports}var Yu={exports:{}},th;function H_(){return th||(th=1,function(e){function t(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}t.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},t.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var a=0;a<this.k;a++){for(var u=new Array(h),f=0,l=0;l<h;l++)u[l]=0;for(var c=0;c<i;c++){var h=this.dataset[c].length;if(a===this.assignments[c]){for(var l=0;l<h;l++)u[l]+=this.dataset[c][l];f++}}if(f>0){for(var l=0;l<h;l++)u[l]/=f;this.centroids[a]=u}else this.centroids[a]=this.randomCentroid(),s=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,o=0;o<n;o++)i=this.argmin(this.dataset[o],this.centroids,this.distance),i!=this.assignments[o]&&(this.assignments[o]=i,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},t.prototype.argmin=function(r,n,i){for(var o=Number.MAX_VALUE,s=0,a=n.length,u,f=0;f<a;f++)u=i(r,n[f]),u<o&&(o=u,s=f);return s},t.prototype.distance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;){var s=r[o]-n[o];i+=s*s}return Math.sqrt(i)},e.exports&&(e.exports=t)}(Yu)),Yu.exports}var Vu={exports:{}},Hu={exports:{}},eh;function ug(){return eh||(eh=1,function(e){function t(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}t.prototype.insert=function(r,n){for(var i=this._queue.length,o=i;o--;){var s=this._priorities[o];this._sorting==="desc"?n>s&&(i=o):n<s&&(i=o)}this._insertAt(r,n,i)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var o=0;o<r.length;o++)this.insert(r[o],n[o])}i&&(this._sorting=i)},t.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},e.exports&&(e.exports=t)}(Hu)),Hu.exports}var rh;function W_(){return rh||(rh=1,function(e){if(e.exports)var t=ug();function r(n,i,o,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,o,s)}r.prototype.run=function(n,i,o,s){this._init(n,i,o,s);for(var a=0,u=this.dataset.length;a<u;a++)if(this._processed[a]!==1){this._processed[a]=1,this.clusters.push([a]);var f=this.clusters.length-1;this._orderedList.push(a);var l=new t(null,null,"asc"),c=this._regionQuery(a);this._distanceToCore(a)!==void 0&&(this._updateQueue(a,c,l),this._expandCluster(f,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,o=this._orderedList.length;i<o;i++){var s=this._orderedList[i],a=this._reachability[s];n.push([s,a])}return n},r.prototype._init=function(n,i,o,s){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),o&&(this.minPts=o),s&&(this.distance=s)},r.prototype._updateQueue=function(n,i,o){var s=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(a){if(s._processed[a]===void 0){var u=s.distance(s.dataset[n],s.dataset[a]),f=Math.max(s._coreDistance,u);s._reachability[a]===void 0?(s._reachability[a]=f,o.insert(a,f)):f<s._reachability[a]&&(s._reachability[a]=f,o.remove(a),o.insert(a,f))}})},r.prototype._expandCluster=function(n,i){for(var o=i.getElements(),s=0,a=o.length;s<a;s++){var u=o[s];if(this._processed[u]===void 0){var f=this._regionQuery(u);this._processed[u]=1,this.clusters[n].push(u),this._orderedList.push(u),this._distanceToCore(u)!==void 0&&(this._updateQueue(u,f,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,o=0;o<i;o++){var s=this._regionQuery(n,o);if(s.length>=this.minPts)return o}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var o=[],s=0,a=this.dataset.length;s<a;s++)this.distance(this.dataset[n],this.dataset[s])<i&&o.push(s);return o},r.prototype._euclideanDistance=function(n,i){for(var o=0,s=Math.min(n.length,i.length);s--;)o+=(n[s]-i[s])*(n[s]-i[s]);return Math.sqrt(o)},e.exports&&(e.exports=r)}(Vu)),Vu.exports}(function(e){e.exports&&(e.exports={DBSCAN:V_(),KMEANS:H_(),OPTICS:W_(),PriorityQueue:ug()})})(ag);var J_=ag.exports;const K_=wi(J_);function Kw(e,t,r){r===void 0&&(r={}),r.mutate!==!0&&(e=vr(e)),r.minPoints=r.minPoints||3;var n=new K_.DBSCAN,i=n.run(bs(e),na(t,r.units),r.minPoints,ee),o=-1;return i.forEach(function(s){o++,s.forEach(function(a){var u=e.features[a];u.properties||(u.properties={}),u.properties.cluster=o,u.properties.dbscan="core"})}),n.noise.forEach(function(s){var a=e.features[s];a.properties||(a.properties={}),a.properties.cluster?a.properties.dbscan="edge":a.properties.dbscan="noise"}),e}var fg={eudist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++){var a=(t[s]||0)-(r[s]||0);o+=a*a}return n?Math.sqrt(o):o},mandist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++)o+=Math.abs((t[s]||0)-(r[s]||0));return n?Math.sqrt(o):o},dist:function(t,r,n){var i=Math.abs(t-r);return n?i:i*i}},lg=fg,Q_=lg.eudist,Z_=lg.dist,$_={kmrand:function(t,r){for(var n={},i=[],o=r<<2,s=t.length,a=t[0].length>0;i.length<r&&o-- >0;){var u=t[Math.floor(Math.random()*s)],f=a?u.join("_"):""+u;n[f]||(n[f]=!0,i.push(u))}if(i.length<r)throw new Error("Error initializating clusters");return i},kmpp:function(t,r){var n=t[0].length?Q_:Z_,i=[],o=t.length,s=t[0].length>0,a=t[Math.floor(Math.random()*o)];for(s?a.join("_"):""+a,i.push(a);i.length<r;){for(var u=[],f=i.length,l=0,c=[],h=0;h<o;h++){for(var p=1/0,d=0;d<f;d++){var m=n(t[h],i[d]);m<=p&&(p=m)}u[h]=p}for(var x=0;x<o;x++)l+=u[x];for(var _=0;_<o;_++)c[_]={i:_,v:t[_],pr:u[_]/l,cs:0};c.sort(function(E,S){return E.pr-S.pr}),c[0].cs=c[0].pr;for(var g=1;g<o;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var v=Math.random(),y=0;y<o-1&&c[y++].cs<v;);i.push(c[y-1].v)}return i}},al=fg,cg=$_,j_=al.eudist;al.mandist;al.dist;var tE=cg.kmrand,eE=cg.kmpp,nh=1e4;function ih(e,t,r){r=r||[];for(var n=0;n<e;n++)r[n]=t;return r}function rE(e,t,r,n){var i=[],o=[],s=[],a=[],u=!1,f=n||nh,l=e.length,c=e[0].length,h=c>0,p=[];if(r)r=="kmrand"?i=tE(e,t):r=="kmpp"?i=eE(e,t):i=r;else for(var d={};i.length<t;){var m=Math.floor(Math.random()*l);d[m]||(d[m]=!0,i.push(e[m]))}do{ih(t,0,p);for(var x=0;x<l;x++){for(var _=1/0,g=0,v=0;v<t;v++){var a=h?j_(e[x],i[v]):Math.abs(e[x]-i[v]);a<=_&&(_=a,g=v)}s[x]=g,p[g]++}for(var y=[],o=[],E=0;E<t;E++)y[E]=h?ih(c,0,y[E]):0,o[E]=i[E];if(h){for(var S=0;S<t;S++)i[S]=[];for(var C=0;C<l;C++)for(var N=s[C],I=y[N],b=e[C],M=0;M<c;M++)I[M]+=b[M];u=!0;for(var A=0;A<t;A++){for(var D=i[A],R=y[A],k=o[A],F=p[A],J=0;J<c;J++)D[J]=R[J]/F||0;if(u){for(var H=0;H<c;H++)if(k[H]!=D[H]){u=!1;break}}}}else{for(var Q=0;Q<l;Q++){var q=s[Q];y[q]+=e[Q]}for(var V=0;V<t;V++)i[V]=y[V]/p[V]||0;u=!0;for(var U=0;U<t;U++)if(o[U]!=i[U]){u=!1;break}}u=u||--f<=0}while(!u);return{it:nh-f,k:t,idxs:s,centroids:i}}var nE=rE;const iE=wi(nE);function Qw(e,t){t===void 0&&(t={});var r=e.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(r/2)),t.numberOfClusters>r&&(t.numberOfClusters=r),t.mutate!==!0&&(e=vr(e));var n=bs(e),i=n.slice(0,t.numberOfClusters),o=iE(n,t.numberOfClusters,i),s={};return o.centroids.forEach(function(a,u){s[u]=a}),Qt(e,function(a,u){var f=o.idxs[u];a.properties.cluster=f,a.properties.centroid=s[f]}),e}function Zw(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");var r=oh(e,"line1");if(r!=="LineString")throw new Error("line1 must be a LineString");var n=oh(t,"line2");if(n!=="LineString")throw new Error("line2 must be a LineString");for(var i=Fo(To(e)).features,o=Fo(To(t)).features,s=0;s<i.length;s++){var a=i[s].geometry.coordinates;if(!o[s])break;var u=o[s].geometry.coordinates;if(!oE(a,u))return!1}return!0}function oE(e,t){var r=Os(Go(e[0],e[1])),n=Os(Go(t[0],t[1]));return r===n}function oh(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}function sh(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}function sE(){return new hg(function(e){return e.f})}var fu={search:function(e,t,r,n){e.cleanDirty(),n=n||{};var i=n.heuristic||fu.heuristics.manhattan,o=n.closest||!1,s=sE(),a=t;for(t.h=i(t,r),s.push(t);s.size()>0;){var u=s.pop();if(u===r)return sh(u);u.closed=!0;for(var f=e.neighbors(u),l=0,c=f.length;l<c;++l){var h=f[l];if(!(h.closed||h.isWall())){var p=u.g+h.getCost(u),d=h.visited;(!d||p<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||i(h,r),h.g=p,h.f=h.g+h.h,e.markDirty(h),o&&(h.h<a.h||h.h===a.h&&h.g<a.g)&&(a=h),d?s.rescoreElement(h):s.push(h))}}}return o?sh(a):[]},heuristics:{manhattan:function(e,t){var r=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return r+n},diagonal:function(e,t){var r=1,n=Math.sqrt(2),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return r*(i+o)+(n-2*r)*Math.min(i,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function as(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var n=0,i=e[r];n<i.length;n++){var o=new lu(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}as.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)fu.cleanNode(this.nodes[e])};as.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)fu.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]};as.prototype.markDirty=function(e){this.dirtyNodes.push(e)};as.prototype.neighbors=function(e){var t=[],r=e.x,n=e.y,i=this.grid;return i[r-1]&&i[r-1][n]&&t.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&t.push(i[r+1][n]),i[r]&&i[r][n-1]&&t.push(i[r][n-1]),i[r]&&i[r][n+1]&&t.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&t.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&t.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&t.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&t.push(i[r+1][n+1])),t};as.prototype.toString=function(){for(var e=[],t=this.grid,r,n,i,o,s=0,a=t.length;s<a;s++){for(r=[],n=t[s],i=0,o=n.length;i<o;i++)r.push(n[i].weight);e.push(r.join(" "))}return e.join(`
`)};function lu(e,t,r){this.x=e,this.y=t,this.weight=r}lu.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};lu.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?this.weight*1.41421:this.weight};lu.prototype.isWall=function(){return this.weight===0};function hg(e){this.content=[],this.scoreFunction=e}hg.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,n=this.content[r];if(this.scoreFunction(t)<this.scoreFunction(n))this.content[r]=t,this.content[e]=n,e=r;else break}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],n=this.scoreFunction(r);;){var i=e+1<<1,o=i-1,s=null,a;if(o<t){var u=this.content[o];a=this.scoreFunction(u),a<n&&(s=o)}if(i<t){var f=this.content[i],l=this.scoreFunction(f);l<(s===null?n:a)&&(s=i)}if(s!==null)this.content[e]=this.content[s],this.content[s]=r,e=s;else break}}};function $w(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||nt([]);if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(n&&!We(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=se(e),a=se(t);switch(e=pt(s),t=pt(a),Gr(o)){case"FeatureCollection":if(o.features.length===0)return $t([s,a]);break;case"Polygon":o=nt([qe(fe(o))]);break;default:throw new Error("invalid obstacles")}var u=o;u.features.push(e),u.features.push(t);var f=Oe(f_(pp(Oe(u)),1.15));if(!n){var l=ee([f[0],f[1]],[f[2],f[1]],r);n=l/100}u.features.pop(),u.features.pop();for(var c=f[0],h=f[1],p=f[2],d=f[3],m=n/ee([c,h],[p,h],r),x=m*(p-c),_=n/ee([c,h],[c,d],r),g=_*(d-h),v=p-c,y=d-h,E=Math.floor(v/x),S=Math.floor(y/g),C=(v-E*x)/2,N=(y-S*g)/2,I=[],b=[],M=[],A=[],D=1/0,R=1/0,k=d-N,F=0;k>=h;){for(var J=[],H=[],Q=c+C,q=0;Q<=p;){var V=pt([Q,k]),U=aE(V,o);J.push(U?0:1),H.push(Q+"|"+k);var ft=ee(V,e);!U&&ft<D&&(D=ft,M={x:q,y:F});var it=ee(V,t);!U&&it<R&&(R=it,A={x:q,y:F}),Q+=x,q++}b.push(J),I.push(H),k-=g,F++}var gt=new as(b,{diagonal:!0}),ht=gt.grid[M.y][M.x],ne=gt.grid[A.y][A.x],_r=fu.search(gt,ht,ne),Re=[s];return _r.forEach(function(lr){var cr=I[lr.x][lr.y].split("|");Re.push([+cr[0],+cr[1]])}),Re.push(a),To($t(Re))}function aE(e,t){for(var r=0;r<t.features.length;r++)if(ce(e,t.features[r]))return!0;return!1}function ah(e){return function(){return e}}function uE(e){return e[0]}function fE(e){return e[1]}function Ba(){this._=null}function cu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Ba.prototype={constructor:Ba,insert:function(e,t){var r,n,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=uh(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.R&&(gs(this,r),e=r,r=e.U),r.C=!1,n.C=!0,vs(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.L&&(vs(this,r),e=r,r=e.U),r.C=!1,n.C=!0,gs(this,n))),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,r,n=e.L,i=e.R,o,s;if(n?i?o=uh(i):o=n:o=i,t?t.L===e?t.L=o:t.R=o:this._=o,n&&i?(s=o.C,o.C=e.C,o.L=n,n.U=o,o!==i?(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=i,i.U=o):(o.U=t,t=o,e=o.R)):(s=e.C,e=o),e&&(e.U=t),!s){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(r=t.R,r.C&&(r.C=!1,t.C=!0,gs(this,t),r=t.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,vs(this,r),r=t.R),r.C=t.C,t.C=r.R.C=!1,gs(this,t),e=this._;break}}else if(r=t.L,r.C&&(r.C=!1,t.C=!0,vs(this,t),r=t.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,gs(this,r),r=t.L),r.C=t.C,t.C=r.L.C=!1,vs(this,t),e=this._;break}r.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function gs(e,t){var r=t,n=t.R,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function vs(e,t){var r=t,n=t.L,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function uh(e){for(;e.L;)e=e.L;return e}function Cs(e,t,r,n){var i=[null,null],o=Er.push(i)-1;return i.left=e,i.right=t,r&&Ga(i,e,t,r),n&&Ga(i,t,e,n),Hr[e.index].halfedges.push(o),Hr[t.index].halfedges.push(o),i}function ds(e,t,r){var n=[t,r];return n.left=e,n}function Ga(e,t,r,n){!e[0]&&!e[1]?(e[0]=n,e.left=t,e.right=r):e.left===r?e[1]=n:e[0]=n}function lE(e,t,r,n,i){var o=e[0],s=e[1],a=o[0],u=o[1],f=s[0],l=s[1],c=0,h=1,p=f-a,d=l-u,m;if(m=t-a,!(!p&&m>0)){if(m/=p,p<0){if(m<c)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>c&&(c=m)}if(m=n-a,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>c&&(c=m)}else if(p>0){if(m<c)return;m<h&&(h=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>c&&(c=m)}if(m=i-u,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<h&&(h=m)}return!(c>0)&&!(h<1)||(c>0&&(e[0]=[a+c*p,u+c*d]),h<1&&(e[1]=[a+h*p,u+h*d])),!0}}}}}function cE(e,t,r,n,i){var o=e[1];if(o)return!0;var s=e[0],a=e.left,u=e.right,f=a[0],l=a[1],c=u[0],h=u[1],p=(f+c)/2,d=(l+h)/2,m,x;if(h===l){if(p<t||p>=n)return;if(f>c){if(!s)s=[p,r];else if(s[1]>=i)return;o=[p,i]}else{if(!s)s=[p,i];else if(s[1]<r)return;o=[p,r]}}else if(m=(f-c)/(h-l),x=d-m*p,m<-1||m>1)if(f>c){if(!s)s=[(r-x)/m,r];else if(s[1]>=i)return;o=[(i-x)/m,i]}else{if(!s)s=[(i-x)/m,i];else if(s[1]<r)return;o=[(r-x)/m,r]}else if(l<h){if(!s)s=[t,m*t+x];else if(s[0]>=n)return;o=[n,m*n+x]}else{if(!s)s=[n,m*n+x];else if(s[0]<t)return;o=[t,m*t+x]}return e[0]=s,e[1]=o,!0}function hE(e,t,r,n){for(var i=Er.length,o;i--;)(!cE(o=Er[i],e,t,r,n)||!lE(o,e,t,r,n)||!(Math.abs(o[0][0]-o[1][0])>ue||Math.abs(o[0][1]-o[1][1])>ue))&&delete Er[i]}function pE(e){return Hr[e.index]={site:e,halfedges:[]}}function gE(e,t){var r=e.site,n=t.left,i=t.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=t[1],i=t[0]):(n=t[0],i=t[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function pg(e,t){return t[+(t.left!==e.site)]}function vE(e,t){return t[+(t.left===e.site)]}function dE(){for(var e=0,t=Hr.length,r,n,i,o;e<t;++e)if((r=Hr[e])&&(o=(n=r.halfedges).length)){var s=new Array(o),a=new Array(o);for(i=0;i<o;++i)s[i]=i,a[i]=gE(r,Er[n[i]]);for(s.sort(function(u,f){return a[f]-a[u]}),i=0;i<o;++i)a[i]=n[s[i]];for(i=0;i<o;++i)n[i]=a[i]}}function yE(e,t,r,n){var i=Hr.length,o,s,a,u,f,l,c,h,p,d,m,x,_=!0;for(o=0;o<i;++o)if(s=Hr[o]){for(a=s.site,f=s.halfedges,u=f.length;u--;)Er[f[u]]||f.splice(u,1);for(u=0,l=f.length;u<l;)d=vE(s,Er[f[u]]),m=d[0],x=d[1],c=pg(s,Er[f[++u%l]]),h=c[0],p=c[1],(Math.abs(m-h)>ue||Math.abs(x-p)>ue)&&(f.splice(u,0,Er.push(ds(a,d,Math.abs(m-e)<ue&&n-x>ue?[e,Math.abs(h-e)<ue?p:n]:Math.abs(x-n)<ue&&r-m>ue?[Math.abs(p-n)<ue?h:r,n]:Math.abs(m-r)<ue&&x-t>ue?[r,Math.abs(h-r)<ue?p:t]:Math.abs(x-t)<ue&&m-e>ue?[Math.abs(p-t)<ue?h:e,t]:null))-1),++l);l&&(_=!1)}if(_){var g,v,y,E=1/0;for(o=0,_=null;o<i;++o)(s=Hr[o])&&(a=s.site,g=a[0]-e,v=a[1]-t,y=g*g+v*v,y<E&&(E=y,_=s));if(_){var S=[e,t],C=[e,n],N=[r,n],I=[r,t];_.halfedges.push(Er.push(ds(a=_.site,S,C))-1,Er.push(ds(a,C,N))-1,Er.push(ds(a,N,I))-1,Er.push(ds(a,I,S))-1)}}for(o=0;o<i;++o)(s=Hr[o])&&(s.halfedges.length||delete Hr[o])}var gg=[],ul;function mE(){cu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Lo(e){var t=e.P,r=e.N;if(!(!t||!r)){var n=t.site,i=e.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,f=n[1]-a,l=o[0]-s,c=o[1]-a,h=2*(u*c-f*l);if(!(h>=-IE)){var p=u*u+f*f,d=l*l+c*c,m=(c*p-f*d)/h,x=(u*d-l*p)/h,_=gg.pop()||new mE;_.arc=e,_.site=i,_.x=m+s,_.y=(_.cy=x+a)+Math.sqrt(m*m+x*x),e.circle=_;for(var g=null,v=qs._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x)if(v.L)v=v.L;else{g=v.P;break}else if(v.R)v=v.R;else{g=v;break}qs.insert(g,_),g||(ul=_)}}}}function Ro(e){var t=e.circle;t&&(t.P||(ul=t.N),qs.remove(t),gg.push(t),cu(t),e.circle=null)}var vg=[];function _E(){cu(this),this.edge=this.site=this.circle=null}function fh(e){var t=vg.pop()||new _E;return t.site=e,t}function Wu(e){Ro(e),Ao.remove(e),vg.push(e),cu(e)}function EE(e){var t=e.circle,r=t.x,n=t.cy,i=[r,n],o=e.P,s=e.N,a=[e];Wu(e);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<ue&&Math.abs(n-u.circle.cy)<ue;)o=u.P,a.unshift(u),Wu(u),u=o;a.unshift(u),Ro(u);for(var f=s;f.circle&&Math.abs(r-f.circle.x)<ue&&Math.abs(n-f.circle.cy)<ue;)s=f.N,a.push(f),Wu(f),f=s;a.push(f),Ro(f);var l=a.length,c;for(c=1;c<l;++c)f=a[c],u=a[c-1],Ga(f.edge,u.site,f.site,i);u=a[0],f=a[l-1],f.edge=Cs(u.site,f.site,null,i),Lo(u),Lo(f)}function xE(e){for(var t=e[0],r=e[1],n,i,o,s,a=Ao._;a;)if(o=dg(a,r)-t,o>ue)a=a.L;else if(s=t-wE(a,r),s>ue){if(!a.R){n=a;break}a=a.R}else{o>-ue?(n=a.P,i=a):s>-ue?(n=a,i=a.N):n=i=a;break}pE(e);var u=fh(e);if(Ao.insert(n,u),!(!n&&!i)){if(n===i){Ro(n),i=fh(n.site),Ao.insert(u,i),u.edge=i.edge=Cs(n.site,u.site),Lo(n),Lo(i);return}if(!i){u.edge=Cs(n.site,u.site);return}Ro(n),Ro(i);var f=n.site,l=f[0],c=f[1],h=e[0]-l,p=e[1]-c,d=i.site,m=d[0]-l,x=d[1]-c,_=2*(h*x-p*m),g=h*h+p*p,v=m*m+x*x,y=[(x*g-p*v)/_+l,(h*v-m*g)/_+c];Ga(i.edge,f,d,y),u.edge=Cs(f,e,null,y),i.edge=Cs(e,d,null,y),Lo(n),Lo(i)}}function dg(e,t){var r=e.site,n=r[0],i=r[1],o=i-t;if(!o)return n;var s=e.P;if(!s)return-1/0;r=s.site;var a=r[0],u=r[1],f=u-t;if(!f)return a;var l=a-n,c=1/o-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-u+f/2+i-o/2)))/c+n:(n+a)/2}function wE(e,t){var r=e.N;if(r)return dg(r,t);var n=e.site;return n[1]===t?n[0]:1/0}var ue=1e-6,IE=1e-12,Ao,Hr,qs,Er;function CE(e,t,r){return(e[0]-r[0])*(t[1]-e[1])-(e[0]-t[0])*(r[1]-e[1])}function SE(e,t){return t[1]-e[1]||t[0]-e[0]}function mf(e,t){var r=e.sort(SE).pop(),n,i,o;for(Er=[],Hr=new Array(e.length),Ao=new Ba,qs=new Ba;;)if(o=ul,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(xE(r),n=r[0],i=r[1]),r=e.pop();else if(o)EE(o.arc);else break;if(dE(),t){var s=+t[0][0],a=+t[0][1],u=+t[1][0],f=+t[1][1];hE(s,a,u,f),yE(s,a,u,f)}this.edges=Er,this.cells=Hr,Ao=qs=Er=Hr=null}mf.prototype={constructor:mf,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(n){return pg(t,e[n])});return r.data=t.site.data,r})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(r,n){if(a=(o=r.halfedges).length)for(var i=r.site,o,s=-1,a,u,f=t[o[a-1]],l=f.left===i?f.right:f.left;++s<a;)u=l,f=t[o[s]],l=f.left===i?f.right:f.left,u&&l&&n<u.index&&n<l.index&&CE(i,u,l)<0&&e.push([i.data,u.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var n=this,i,o=n._found||0,s=n.cells.length,a;!(a=n.cells[o]);)if(++o>=s)return null;var u=e-a.site[0],f=t-a.site[1],l=u*u+f*f;do a=n.cells[i=o],o=null,a.halfedges.forEach(function(c){var h=n.edges[c],p=h.left;if(!((p===a.site||!p)&&!(p=h.right))){var d=e-p[0],m=t-p[1],x=d*d+m*m;x<l&&(l=x,o=p.index)}});while(o!==null);return n._found=i,r==null||l<=r*r?a.site:null}};function NE(){var e=uE,t=fE,r=null;function n(i){return new mf(i.map(function(o,s){var a=[Math.round(e(o,s,i)/ue)*ue,Math.round(t(o,s,i)/ue)*ue];return a.index=s,a.data=o,a}),r)}return n.polygons=function(i){return n(i).polygons()},n.links=function(i){return n(i).links()},n.triangles=function(i){return n(i).triangles()},n.x=function(i){return arguments.length?(e=typeof i=="function"?i:ah(+i),n):e},n.y=function(i){return arguments.length?(t=typeof i=="function"?i:ah(+i),n):t},n.extent=function(i){return arguments.length?(r=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(i){return arguments.length?(r=i==null?null:[[0,0],[+i[0],+i[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}function PE(e){return e=e.slice(),e.push(e[0]),dt([e])}function jw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return Xi(e,"Point","points"),nt(NE().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(e.features).map(PE))}function ME(e,t,r,n){n=n||{};var i=n.steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||e,u=n.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!re(n))throw new Error("options must be an object");if(!We(i))throw new Error("steps must be a number");if(!We(s))throw new Error("angle must be a number");var f=se(e);if(o==="degrees")var l=tr(s);else t=Gs(e,t,90,{units:o}),r=Gs(e,r,0,{units:o}),t=se(t)[0]-f[0],r=se(r)[1]-f[1];for(var c=[],h=0;h<i;h+=1){var p=h*-360/i,d=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t,2)*Math.pow(lh(p),2)),m=t*r/Math.sqrt(Math.pow(t,2)+Math.pow(r,2)/Math.pow(lh(p),2));if(p<-90&&p>=-270&&(d=-d),p<-180&&p>=-360&&(m=-m),o==="degrees"){var x=d*Math.cos(l)+m*Math.sin(l),_=m*Math.cos(l)-d*Math.sin(l);d=x,m=_}c.push([d+f[0],m+f[1]])}return c.push(c[0]),o==="degrees"?dt([c],u):u_(dt([c],u),s,{pivot:a})}function lh(e){var t=e*Math.PI/180;return Math.tan(t)}function yg(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return Zr(e,function(o,s,a){var u=t.weight?a==null?void 0:a[t.weight]:void 0;if(u=u??1,!We(u))throw new Error("weight value must be a number for feature index "+s);u=Number(u),u>0&&Le(o,function(f){r+=f[0]*u,n+=f[1]*u,i+=u})}),pt([r/i,n/i],t.properties,t)}function tI(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.counter||10;if(!We(r))throw new Error("counter must be a number");var n=t.weight,i=yg(e,{weight:t.weight}),o=nt([]);Qt(e,function(a){var u;o.features.push(Zi(a,{properties:{weight:(u=a.properties)===null||u===void 0?void 0:u[n]}}))});var s={tolerance:t.tolerance,medianCandidates:[]};return mg(i.geometry.coordinates,[0,0],o,s,r)}function mg(e,t,r,n,i){var o=n.tolerance||.001,s=0,a=0,u=0,f=0;if(Qt(r,function(h){var p,d=(p=h.properties)===null||p===void 0?void 0:p.weight,m=d??1;if(m=Number(m),!We(m))throw new Error("weight value must be a number");if(m>0){f+=1;var x=m*ee(h,e);x===0&&(x=1);var _=m/x;s+=h.geometry.coordinates[0]*_,a+=h.geometry.coordinates[1]*_,u+=_}}),f<1)throw new Error("no features to measure");var l=s/u,c=a/u;return f===1||i===0||Math.abs(l-t[0])<o&&Math.abs(c-t[1])<o?pt([l,c],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([l,c]),mg([l,c],e,r,n,i-1))}function eI(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.steps||64,n=t.weight,i=t.properties||{};if(!We(r))throw new Error("steps must be a number");if(!re(i))throw new Error("properties must be a number");var o=bs(e).length,s=yg(e,{weight:n}),a=0,u=0,f=0;Qt(e,function(C){var N=C.properties[n]||1,I=ch(ot(C),ot(s));a+=Math.pow(I.x,2)*N,u+=Math.pow(I.y,2)*N,f+=I.x*I.y*N});var l=a-u,c=Math.sqrt(Math.pow(l,2)+4*Math.pow(f,2)),h=2*f,p=Math.atan((l+c)/h),d=p*180/Math.PI,m=0,x=0,_=0;Qt(e,function(C){var N=C.properties[n]||1,I=ch(ot(C),ot(s));m+=Math.pow(I.x*Math.cos(p)-I.y*Math.sin(p),2)*N,x+=Math.pow(I.x*Math.sin(p)+I.y*Math.cos(p),2)*N,_+=N});var g=Math.sqrt(2*m/_),v=Math.sqrt(2*x/_),y=ME(s,g,v,{units:"degrees",angle:d,steps:r,properties:i}),E=md(e,nt([y])),S={meanCenterCoordinates:ot(s),semiMajorAxis:g,semiMinorAxis:v,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*bs(E).length/o};return y.properties.standardDeviationalEllipse=S,y}function ch(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}function rI(e,t,r,n){if(n===void 0&&(n={}),!re(n))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=e,o=t,s=r,a=Os(n.mercator!==!0?bi(i,o):Go(i,o)),u=Os(n.mercator!==!0?bi(s,o):Go(s,o)),f=Math.abs(a-u);return n.explementary===!0?360-f:f}function nI(e,t){var r=[],n=t.iterations||1;if(!e)throw new Error("inputPolys is required");return Zr(e,function(i,o,s){var a,u,f;switch(i.type){case"Polygon":a=[[]];for(var l=0;l<n;l++)f=[[]],u=i,l>0&&(u=dt(a).geometry),LE(u,f),a=f.slice(0);r.push(dt(a,s));break;case"MultiPolygon":a=[[[]]];for(var c=0;c<n;c++)f=[[[]]],u=i,c>0&&(u=Qr(a).geometry),OE(u,f),a=f.slice(0);r.push(Qr(a,s));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),nt(r)}function LE(e,t){var r=0,n=0;Le(e,function(i,o,s,a,u){u>r&&(r=u,n=o,t.push([]));var f=o-n,l=e.coordinates[u][f+1],c=i[0],h=i[1],p=l[0],d=l[1];t[u].push([.75*c+.25*p,.75*h+.25*d]),t[u].push([.25*c+.75*p,.25*h+.75*d])},!0),t.forEach(function(i){i.push(i[0])})}function OE(e,t){var r=0,n=0,i=0;Le(e,function(o,s,a,u,f){u>i&&(i=u,n=s,t.push([[]])),f>r&&(r=f,n=s,t[u].push([]));var l=s-n,c=e.coordinates[u][f][l+1],h=o[0],p=o[1],d=c[0],m=c[1];t[u][f].push([.75*h+.25*d,.75*p+.25*m]),t[u][f].push([.25*h+.75*d,.25*p+.75*m])},!0),t.forEach(function(o){o.forEach(function(s){s.push(s[0])})})}function bE(e,t,r){r===void 0&&(r=2);var n=se(e),i=se(t),o=n[0]-i[0],s=n[1]-i[1];return r===1?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function RE(e,t){t=t||{};var r=t.threshold||1e4,n=t.p||2,i=t.binary||!1,o=t.alpha||-1,s=t.standardization||!1,a=[];Qt(e,function(p){a.push(Zi(p))});for(var u=[],f=0;f<a.length;f++)u[f]=[];for(var f=0;f<a.length;f++)for(var l=f;l<a.length;l++){f===l&&(u[f][l]=0);var c=bE(a[f],a[l],n);u[f][l]=c,u[l][f]=c}for(var f=0;f<a.length;f++)for(var l=0;l<a.length;l++){var c=u[f][l];c!==0&&(i?c<=r?u[f][l]=1:u[f][l]=0:c<=r?u[f][l]=Math.pow(c,o):u[f][l]=0)}if(s)for(var f=0;f<a.length;f++)for(var h=u[f].reduce(function(d,m){return d+m},0),l=0;l<a.length;l++)u[f][l]=u[f][l]/h;return u}function iI(e,t){var r=t.inputField,n=t.threshold||1e5,i=t.p||2,o=t.binary||!1,s=t.alpha||-1,a=t.standardization||!0,u=RE(e,{alpha:s,binary:o,p:i,standardization:a,threshold:n}),f=[];Qt(e,function(M){var A=M.properties||{};f.push(A[r])});for(var l=_g(f),c=AE(f),h=0,p=0,d=0,m=0,x=u.length,_=0;_<x;_++){for(var g=0,v=0;v<x;v++)h+=u[_][v]*(f[_]-l)*(f[v]-l),p+=u[_][v],d+=Math.pow(u[_][v]+u[v][_],2),g+=u[_][v]+u[v][_];m+=Math.pow(g,2)}d=.5*d;var y=h/p/c,E=-1/(x-1),S=x*x*d-x*m+3*(p*p),C=(x-1)*(x+1)*(p*p),N=S/C-E*E,I=Math.sqrt(N),b=(y-E)/I;return{expectedMoranIndex:E,moranIndex:y,stdNorm:I,zNorm:b}}function _g(e){for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];t+=i}return t/e.length}function AE(e){for(var t=_g(e),r=0,n=0,i=e;n<i.length;n++){var o=i[n];r+=Math.pow(o-t,2)}return r/e.length}function DE(e,t){return t===void 0&&(t={}),Eg(e,"mercator",t)}function TE(e,t){return t===void 0&&(t={}),Eg(e,"wgs84",t)}function Eg(e,t,r){r===void 0&&(r={}),r=r||{};var n=r.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&We(e[0])?e=t==="mercator"?hh(e):ph(e):(n!==!0&&(e=vr(e)),Le(e,function(i){var o=t==="mercator"?hh(i):ph(i);i[0]=o[0],i[1]=o[1]})),e}function hh(e){var t=Math.PI/180,r=6378137,n=20037508342789244e-9,i=Math.abs(e[0])<=180?e[0]:e[0]-FE(e[0])*360,o=[r*i*t,r*Math.log(Math.tan(Math.PI*.25+.5*e[1]*t))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function ph(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/r)))*t]}function FE(e){return e<0?-1:e>0?1:0}const oI=Object.freeze(Object.defineProperty({__proto__:null,toMercator:DE,toWgs84:TE},Symbol.toStringTag,{value:"Module"}));var BE=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};function hu(e){return Array.isArray(e)?gh(e):e&&e.bbox?gh(e.bbox):[XE(),UE()]}function GE(e,t){t===void 0&&(t={}),e==null&&(e=1);for(var r=[],n=0;n<e;n++)r.push(pt(hu(t.bbox)));return nt(r)}function kE(e,t){t===void 0&&(t={}),e==null&&(e=1),(!We(t.num_vertices)||t.num_vertices===void 0)&&(t.num_vertices=10),(!We(t.max_radial_length)||t.max_radial_length===void 0)&&(t.max_radial_length=10);for(var r=[],n=function(o){var s=[],a=BE(Array(t.num_vertices+1)).map(Math.random);a.forEach(function(u,f,l){l[f]=f>0?u+l[f-1]:u}),a.forEach(function(u){u=u*2*Math.PI/a[a.length-1];var f=Math.random();s.push([f*(t.max_radial_length||10)*Math.sin(u),f*(t.max_radial_length||10)*Math.cos(u)])}),s[s.length-1]=s[0],s=s.map(zE(hu(t.bbox))),r.push(dt([s]))},i=0;i<e;i++)n();return nt(r)}function qE(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.bbox,n=t.num_vertices,i=t.max_length,o=t.max_rotation;e==null&&(e=1),(!We(n)||n===void 0||n<2)&&(n=10),(!We(i)||i===void 0)&&(i=1e-4),(!We(o)||o===void 0)&&(o=Math.PI/8);for(var s=[],a=0;a<e;a++){for(var u=hu(r),f=[u],l=0;l<n-1;l++){var c=l===0?Math.random()*2*Math.PI:Math.tan((f[l][1]-f[l-1][1])/(f[l][0]-f[l-1][0])),h=c+(Math.random()-.5)*o*2,p=Math.random()*i;f.push([f[l][0]+p*Math.cos(h),f[l][1]+p*Math.sin(h)])}s.push($t(f))}return nt(s)}function zE(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}function xg(){return Math.random()-.5}function XE(){return xg()*360}function UE(){return xg()*180}function gh(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}const sI=Object.freeze(Object.defineProperty({__proto__:null,randomLineString:qE,randomPoint:GE,randomPolygon:kE,randomPosition:hu},Symbol.toStringTag,{value:"Module"}));function YE(e,t){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("filter is required");var r=[];return Qt(e,function(n){fl(n.properties,t)&&r.push(n)}),nt(r)}function wg(e,t,r){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("property is required");for(var n=Ig(e,t),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],f=0;f<a.length;f++)u.push(e.features[a[f]]);r(nt(u),s,o)}}function VE(e,t,r,n){var i=n;return wg(e,t,function(o,s,a){a===0&&n===void 0?i=o:i=r(i,o,s,a)}),i}function Ig(e,t){var r={};return Qt(e,function(n,i){var o=n.properties||{};if(Object.prototype.hasOwnProperty.call(o,String(t))){var s=o[t];Object.prototype.hasOwnProperty.call(r,s)?r[s].push(i):r[s]=[i]}}),r}function fl(e,t){if(e===void 0)return!1;var r=typeof t;if(r==="number"||r==="string")return Object.prototype.hasOwnProperty.call(e,t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(!fl(e,t[n]))return!1;return!0}else return Cg(e,t)}function Cg(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}return!0}function HE(e,t){if(!t)return{};if(!t.length)return{};for(var r={},n=0;n<t.length;n++){var i=t[n];Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r}const aI=Object.freeze(Object.defineProperty({__proto__:null,applyFilter:fl,clusterEach:wg,clusterReduce:VE,createBins:Ig,filterProperties:HE,getCluster:YE,propertiesContainsFilter:Cg},Symbol.toStringTag,{value:"Module"}));/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function WE(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(l){f=[6,l],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Ri=function(){function e(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null}return e}();function JE(e,t){return e>t?1:e<t?-1:0}function Ni(e,t,r){for(var n=new Ri(null,null),i=n,o=n;;){var s=r(e,t.key);if(s<0){if(t.left===null)break;if(r(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(r(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=n.right,t.right=n.left,t}function Ju(e,t,r,n){var i=new Ri(e,t);if(r===null)return i.left=i.right=null,i;r=Ni(e,r,n);var o=n(e,r.key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function vh(e,t,r){var n=null,i=null;if(t){t=Ni(e,t,r);var o=r(t.key,e);o===0?(n=t.left,i=t.right):o<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function KE(e,t,r){return t===null?e:(e===null||(t=Ni(e.key,t,r),t.left=e),t)}function _f(e,t,r,n,i){if(e){n(""+t+(r?"└── ":"├── ")+i(e)+`
`);var o=t+(r?"    ":"│   ");e.left&&_f(e.left,o,!1,n,i),e.right&&_f(e.right,o,!0,n,i)}}var ll=function(){function e(t){t===void 0&&(t=JE),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,r){return this._size++,this._root=Ju(t,r,this._root,this._comparator)},e.prototype.add=function(t,r){var n=new Ri(t,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=Ni(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,r,n){var i;if(r===null)return null;r=Ni(t,r,n);var o=n(t,r.key);return o===0?(r.left===null?i=r.right:(i=Ni(t,r.left,n),i.right=r.right),this._size--,i):r},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Ni(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Ni(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},e.prototype.forEach=function(t,r){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(r,n),n=n.right):o=!0;return this},e.prototype.range=function(t,r,n,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,r),u>0)break;if(s(a.key,t)>=0&&n.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(r){var n=r.key;return t.push(n)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(r){var n=r.data;return t.push(n)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var r=this._root,n=!1,i=0,o=[];!n;)if(r)o.push(r),r=r.left;else if(o.length>0){if(r=o.pop(),i===t)return r;i++,r=r.right}else n=!0;return null},e.prototype.next=function(t){var r=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;r;){var o=i(t.key,r.key);if(o===0)break;o<0?(n=r,r=r.left):r=r.right}return n},e.prototype.prev=function(t){var r=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;r;){var o=i(t.key,r.key);if(o===0)break;o<0?r=r.left:(n=r,r=r.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return ZE(this._root)},e.prototype.load=function(t,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var i=t.length,o=this._comparator;if(n&&wf(t,r,0,i-1,o),this._root===null)this._root=Ef(t,r,0,i),this._size=i;else{var s=$E(this.toList(),QE(t,r),o);i=this._size+i,this._root=xf({head:s},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var r=[];return _f(this._root,"",!0,function(n){return r.push(n)},t),r.join("")},e.prototype.update=function(t,r,n){var i=this._comparator,o=vh(t,this._root,i),s=o.left,a=o.right;i(t,r)<0?a=Ju(r,n,a,i):s=Ju(r,n,s,i),this._root=KE(s,a,i)},e.prototype.split=function(t){return vh(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,r,n;return WE(this,function(i){switch(i.label){case 0:t=this._root,r=[],n=!1,i.label=1;case 1:return n?[3,6]:t===null?[3,2]:(r.push(t),t=t.left,[3,5]);case 2:return r.length===0?[3,4]:(t=r.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:n=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function Ef(e,t,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),s=e[o],a=t[o],u=new Ri(s,a);return u.left=Ef(e,t,r,o),u.right=Ef(e,t,o+1,n),u}return null}function QE(e,t){for(var r=new Ri(null,null),n=r,i=0;i<e.length;i++)n=n.next=new Ri(e[i],t[i]);return n.next=null,r.next}function ZE(e){for(var t=e,r=[],n=!1,i=new Ri(null,null),o=i;!n;)t?(r.push(t),t=t.left):r.length>0?(t=o=o.next=r.pop(),t=t.right):n=!0;return o.next=null,i.next}function xf(e,t,r){var n=r-t;if(n>0){var i=t+Math.floor(n/2),o=xf(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=xf(e,i+1,r),s}return null}function $E(e,t,r){for(var n=new Ri(null,null),i=n,o=e,s=t;o!==null&&s!==null;)r(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),n.next}function wf(e,t,r,n,i){if(!(r>=n)){for(var o=e[r+n>>1],s=r-1,a=n+1;;){do s++;while(i(e[s],o)<0);do a--;while(i(e[a],o)>0);if(s>=a)break;var u=e[s];e[s]=e[a],e[a]=u,u=t[s],t[s]=t[a],t[a]=u}wf(e,t,r,a,i),wf(e,t,a+1,n,i)}}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mr(e,t,r){return t&&dh(e.prototype,t),r&&dh(e,r),e}var ys=function(t,r){return t.ll.x<=r.x&&r.x<=t.ur.x&&t.ll.y<=r.y&&r.y<=t.ur.y},If=function(t,r){if(r.ur.x<t.ll.x||t.ur.x<r.ll.x||r.ur.y<t.ll.y||t.ur.y<r.ll.y)return null;var n=t.ll.x<r.ll.x?r.ll.x:t.ll.x,i=t.ur.x<r.ur.x?t.ur.x:r.ur.x,o=t.ll.y<r.ll.y?r.ll.y:t.ll.y,s=t.ur.y<r.ur.y?t.ur.y:r.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:s}}},Mi=Number.EPSILON;Mi===void 0&&(Mi=Math.pow(2,-52));var jE=Mi*Mi,Cf=function(t,r){if(-Mi<t&&t<Mi&&-Mi<r&&r<Mi)return 0;var n=t-r;return n*n<jE*t*r?0:t<r?-1:1},tx=function(){function e(){Sn(this,e),this.reset()}return Mr(e,[{key:"reset",value:function(){this.xRounder=new yh,this.yRounder=new yh}},{key:"round",value:function(r,n){return{x:this.xRounder.round(r),y:this.yRounder.round(n)}}}]),e}(),yh=function(){function e(){Sn(this,e),this.tree=new ll,this.round(0)}return Mr(e,[{key:"round",value:function(r){var n=this.tree.add(r),i=this.tree.prev(n);if(i!==null&&Cf(n.key,i.key)===0)return this.tree.remove(r),i.key;var o=this.tree.next(n);return o!==null&&Cf(n.key,o.key)===0?(this.tree.remove(r),o.key):r}}]),e}(),zs=new tx,Ls=function(t,r){return t.x*r.y-t.y*r.x},Sg=function(t,r){return t.x*r.x+t.y*r.y},mh=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y},s=Ls(i,o);return Cf(s,0)},ka=function(t){return Math.sqrt(Sg(t,t))},ex=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return Ls(o,i)/ka(o)/ka(i)},rx=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return Sg(o,i)/ka(o)/ka(i)},_h=function(t,r,n){return r.y===0?null:{x:t.x+r.x/r.y*(n-t.y),y:n}},Eh=function(t,r,n){return r.x===0?null:{x:n,y:t.y+r.y/r.x*(n-t.x)}},nx=function(t,r,n,i){if(r.x===0)return Eh(n,i,t.x);if(i.x===0)return Eh(t,r,n.x);if(r.y===0)return _h(n,i,t.y);if(i.y===0)return _h(t,r,n.y);var o=Ls(r,i);if(o==0)return null;var s={x:n.x-t.x,y:n.y-t.y},a=Ls(s,r)/o,u=Ls(s,i)/o,f=t.x+u*r.x,l=n.x+a*i.x,c=t.y+u*r.y,h=n.y+a*i.y,p=(f+l)/2,d=(c+h)/2;return{x:p,y:d}},Kn=function(){Mr(e,null,[{key:"compare",value:function(r,n){var i=e.comparePoints(r.point,n.point);return i!==0?i:(r.point!==n.point&&r.link(n),r.isLeft!==n.isLeft?r.isLeft?1:-1:qa.compare(r.segment,n.segment))}},{key:"comparePoints",value:function(r,n){return r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0}}]);function e(t,r){Sn(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=r}return Mr(e,[{key:"link",value:function(r){if(r.point===this.point)throw new Error("Tried to link already linked events");for(var n=r.point.events,i=0,o=n.length;i<o;i++){var s=n[i];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var r=this.point.events.length,n=0;n<r;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<r;o++){var s=this.point.events[o];s.consumedBy===void 0&&i.otherSE.point.events===s.otherSE.point.events&&i.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var r=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&r.push(o)}return r}},{key:"getLeftmostComparator",value:function(r){var n=this,i=new Map,o=function(a){var u=a.otherSE;i.set(a,{sine:ex(n.point,r.point,u.point),cosine:rx(n.point,r.point,u.point)})};return function(s,a){i.has(s)||o(s),i.has(a)||o(a);var u=i.get(s),f=u.sine,l=u.cosine,c=i.get(a),h=c.sine,p=c.cosine;return f>=0&&h>=0?l<p?1:l>p?-1:0:f<0&&h<0?l<p?-1:l>p?1:0:h<f?-1:h>f?1:0}}}]),e}(),ix=0,qa=function(){Mr(e,null,[{key:"compare",value:function(r,n){var i=r.leftSE.point.x,o=n.leftSE.point.x,s=r.rightSE.point.x,a=n.rightSE.point.x;if(a<i)return 1;if(s<o)return-1;var u=r.leftSE.point.y,f=n.leftSE.point.y,l=r.rightSE.point.y,c=n.rightSE.point.y;if(i<o){if(f<u&&f<l)return 1;if(f>u&&f>l)return-1;var h=r.comparePoint(n.leftSE.point);if(h<0)return 1;if(h>0)return-1;var p=n.comparePoint(r.rightSE.point);return p!==0?p:-1}if(i>o){if(u<f&&u<c)return-1;if(u>f&&u>c)return 1;var d=n.comparePoint(r.leftSE.point);if(d!==0)return d;var m=r.comparePoint(n.rightSE.point);return m<0?1:m>0?-1:1}if(u<f)return-1;if(u>f)return 1;if(s<a){var x=n.comparePoint(r.rightSE.point);if(x!==0)return x}if(s>a){var _=r.comparePoint(n.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(s!==a){var g=l-u,v=s-i,y=c-f,E=a-o;if(g>v&&y<E)return 1;if(g<v&&y>E)return-1}return s>a?1:s<a||l<c?-1:l>c?1:r.id<n.id?-1:r.id>n.id?1:0}}]);function e(t,r,n,i){Sn(this,e),this.id=++ix,this.leftSE=t,t.segment=this,t.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=t,this.rings=n,this.windings=i}return Mr(e,[{key:"replaceRightSE",value:function(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var r=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r<n?r:n},ur:{x:this.rightSE.point.x,y:r>n?r:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(r){return r.x===this.leftSE.point.x&&r.y===this.leftSE.point.y||r.x===this.rightSE.point.x&&r.y===this.rightSE.point.y}},{key:"comparePoint",value:function(r){if(this.isAnEndpoint(r))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return r.x===n.x?0:r.x<n.x?1:-1;var s=(r.y-n.y)/o.y,a=n.x+s*o.x;if(r.x===a)return 0;var u=(r.x-n.x)/o.x,f=n.y+u*o.y;return r.y===f?0:r.y<f?-1:1}},{key:"getIntersection",value:function(r){var n=this.bbox(),i=r.bbox(),o=If(n,i);if(o===null)return null;var s=this.leftSE.point,a=this.rightSE.point,u=r.leftSE.point,f=r.rightSE.point,l=ys(n,u)&&this.comparePoint(u)===0,c=ys(i,s)&&r.comparePoint(s)===0,h=ys(n,f)&&this.comparePoint(f)===0,p=ys(i,a)&&r.comparePoint(a)===0;if(c&&l)return p&&!h?a:!p&&h?f:null;if(c)return h&&s.x===f.x&&s.y===f.y?null:s;if(l)return p&&a.x===u.x&&a.y===u.y?null:u;if(p&&h)return null;if(p)return a;if(h)return f;var d=nx(s,this.vector(),u,r.vector());return d===null||!ys(o,d)?null:zs.round(d.x,d.y)}},{key:"split",value:function(r){var n=[],i=r.events!==void 0,o=new Kn(r,!0),s=new Kn(r,!1),a=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(o);var u=new e(o,a,this.rings.slice(),this.windings.slice());return Kn.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),Kn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),s.checkForConsuming()),n}},{key:"swapEvents",value:function(){var r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(r){for(var n=this,i=r;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=e.compare(n,i);if(o!==0){if(o>0){var s=n;n=i,i=s}if(n.prev===i){var a=n;n=i,i=a}for(var u=0,f=i.rings.length;u<f;u++){var l=i.rings[u],c=i.windings[u],h=n.rings.indexOf(l);h===-1?(n.rings.push(l),n.windings.push(c)):n.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,s=0,a=this.rings.length;s<a;s++){var u=this.rings[s],f=this.windings[s],l=n.indexOf(u);l===-1?(n.push(u),i.push(f)):i[l]+=f}for(var c=[],h=[],p=0,d=n.length;p<d;p++)if(i[p]!==0){var m=n[p],x=m.poly;if(h.indexOf(x)===-1)if(m.isExterior)c.push(x);else{h.indexOf(x)===-1&&h.push(x);var _=c.indexOf(m.poly);_!==-1&&c.splice(_,1)}}for(var g=0,v=c.length;g<v;g++){var y=c[g].multiPoly;o.indexOf(y)===-1&&o.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var r=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(bn.type){case"union":{var i=r.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var s,a;r.length<n.length?(s=r.length,a=n.length):(s=n.length,a=r.length),this._isInResult=a===bn.numMultiPolys&&s<a;break}case"xor":{var u=Math.abs(r.length-n.length);this._isInResult=u%2===1;break}case"difference":{var f=function(c){return c.length===1&&c[0].isSubject};this._isInResult=f(r)!==f(n);break}default:throw new Error("Unrecognized operation type found ".concat(bn.type))}return this._isInResult}}],[{key:"fromRing",value:function(r,n,i){var o,s,a,u=Kn.comparePoints(r,n);if(u<0)o=r,s=n,a=1;else if(u>0)o=n,s=r,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(r.x,", ").concat(r.y,"]"));var f=new Kn(o,!0),l=new Kn(s,!1);return new e(f,l,[i],[a])}}]),e}(),xh=function(){function e(t,r,n){if(Sn(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=zs.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=zs.round(t[s][0],t[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(qa.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(qa.fromRing(o,i,this))}return Mr(e,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];r.push(o.leftSE),r.push(o.rightSE)}return r}}]),e}(),ox=function(){function e(t,r){if(Sn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new xh(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=t.length;n<i;n++){var o=new xh(t[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Mr(e,[{key:"getSweepEvents",value:function(){for(var r=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),s=0,a=o.length;s<a;s++)r.push(o[s]);return r}}]),e}(),wh=function(){function e(t,r){if(Sn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=t.length;n<i;n++){var o=new ox(t[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Mr(e,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),s=0,a=o.length;s<a;s++)r.push(o[s]);return r}}]),e}(),sx=function(){Mr(e,null,[{key:"factory",value:function(r){for(var n=[],i=0,o=r.length;i<o;i++){var s=r[i];if(!(!s.isInResult()||s.ringOut)){for(var a=null,u=s.leftSE,f=s.rightSE,l=[u],c=u.point,h=[];a=u,u=f,l.push(u),u.point!==c;)for(;;){var p=u.getAvailableLinkedEvents();if(p.length===0){var d=l[0].point,m=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(m.x,", ").concat(m.y,"]."))}if(p.length===1){f=p[0].otherSE;break}for(var x=null,_=0,g=h.length;_<g;_++)if(h[_].point===u.point){x=_;break}if(x!==null){var v=h.splice(x)[0],y=l.splice(v.index);y.unshift(y[0].otherSE),n.push(new e(y.reverse()));continue}h.push({index:l.length,point:u.point});var E=u.getLeftmostComparator(a);f=p.sort(E)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){Sn(this,e),this.events=t;for(var r=0,n=t.length;r<n;r++)t[r].segment.ringOut=this;this.poly=null}return Mr(e,[{key:"getGeom",value:function(){for(var r=this.events[0].point,n=[r],i=1,o=this.events.length-1;i<o;i++){var s=this.events[i].point,a=this.events[i+1].point;mh(s,r,a)!==0&&(n.push(s),r=s)}if(n.length===1)return null;var u=n[0],f=n[1];mh(u,r,f)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,h=this.isExteriorRing()?n.length:-1,p=[],d=c;d!=h;d+=l)p.push([n[d].x,n[d].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var r=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];Kn.compare(r,o)>0&&(r=o)}for(var s=r.segment.prevInResult(),a=s?s.prevInResult():null;;){if(!s)return null;if(!a)return s.ringOut;if(a.ringOut!==s.ringOut)return a.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=a.prevInResult(),a=s?s.prevInResult():null}}}]),e}(),Ih=function(){function e(t){Sn(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Mr(e,[{key:"addInterior",value:function(r){this.interiorRings.push(r),r.poly=this}},{key:"getGeom",value:function(){var r=[this.exteriorRing.getGeom()];if(r[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&r.push(o)}return r}}]),e}(),ax=function(){function e(t){Sn(this,e),this.rings=t,this.polys=this._composePolys(t)}return Mr(e,[{key:"getGeom",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&r.push(o)}return r}},{key:"_composePolys",value:function(r){for(var n=[],i=0,o=r.length;i<o;i++){var s=r[i];if(!s.poly)if(s.isExteriorRing())n.push(new Ih(s));else{var a=s.enclosingRing();a.poly||n.push(new Ih(a)),a.poly.addInterior(s)}}return n}}]),e}(),ux=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qa.compare;Sn(this,e),this.queue=t,this.tree=new ll(r),this.segments=[]}return Mr(e,[{key:"process",value:function(r){var n=r.segment,i=[];if(r.consumedBy)return r.isLeft?this.queue.remove(r.otherSE):this.tree.remove(n),i;var o=r.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=o,a=o,u=void 0,f=void 0;u===void 0;)s=this.tree.prev(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);for(;f===void 0;)a=this.tree.next(a),a===null?f=null:a.key.consumedBy===void 0&&(f=a.key);if(r.isLeft){var l=null;if(u){var c=u.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!u.isAnEndpoint(c)))for(var h=this._splitSafely(u,c),p=0,d=h.length;p<d;p++)i.push(h[p])}var m=null;if(f){var x=f.getIntersection(n);if(x!==null&&(n.isAnEndpoint(x)||(m=x),!f.isAnEndpoint(x)))for(var _=this._splitSafely(f,x),g=0,v=_.length;g<v;g++)i.push(_[g])}if(l!==null||m!==null){var y=null;if(l===null)y=m;else if(m===null)y=l;else{var E=Kn.comparePoints(l,m);y=E<=0?l:m}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var S=n.split(y),C=0,N=S.length;C<N;C++)i.push(S[C])}i.length>0?(this.tree.remove(n),i.push(r)):(this.segments.push(n),n.prev=u)}else{if(u&&f){var I=u.getIntersection(f);if(I!==null){if(!u.isAnEndpoint(I))for(var b=this._splitSafely(u,I),M=0,A=b.length;M<A;M++)i.push(b[M]);if(!f.isAnEndpoint(I))for(var D=this._splitSafely(f,I),R=0,k=D.length;R<k;R++)i.push(D[R])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(r,n){this.tree.remove(r);var i=r.rightSE;this.queue.remove(i);var o=r.split(n);return o.push(i),r.consumedBy===void 0&&this.tree.insert(r),o}}]),e}(),Ch=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,fx=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,lx=function(){function e(){Sn(this,e)}return Mr(e,[{key:"run",value:function(r,n,i){bn.type=r,zs.reset();for(var o=[new wh(n,!0)],s=0,a=i.length;s<a;s++)o.push(new wh(i[s],!1));if(bn.numMultiPolys=o.length,bn.type==="difference")for(var u=o[0],f=1;f<o.length;)If(o[f].bbox,u.bbox)!==null?f++:o.splice(f,1);if(bn.type==="intersection"){for(var l=0,c=o.length;l<c;l++)for(var h=o[l],p=l+1,d=o.length;p<d;p++)if(If(h.bbox,o[p].bbox)===null)return[]}for(var m=new ll(Kn.compare),x=0,_=o.length;x<_;x++)for(var g=o[x].getSweepEvents(),v=0,y=g.length;v<y;v++)if(m.insert(g[v]),m.size>Ch)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var E=new ux(m),S=m.size,C=m.pop();C;){var N=C.key;if(m.size===S){var I=N.segment;throw new Error("Unable to pop() ".concat(N.isLeft?"left":"right"," SweepEvent ")+"[".concat(N.point.x,", ").concat(N.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(m.size>Ch)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(E.segments.length>fx)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var b=E.process(N),M=0,A=b.length;M<A;M++){var D=b[M];D.consumedBy===void 0&&m.insert(D)}S=m.size,C=m.pop()}zs.reset();var R=sx.factory(E.segments),k=new ax(R);return k.getGeom()}}]),e}(),bn=new lx,cx=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return bn.run("union",t,n)},hx=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return bn.run("intersection",t,n)},px=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return bn.run("xor",t,n)},gx=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return bn.run("difference",t,n)},vx={union:cx,intersection:hx,xor:px,difference:gx};const fi=vx;function uI(e,t){var r=fe(e),n=fe(t),i=e.properties||{},o=fi.difference(r.coordinates,n.coordinates);return o.length===0?null:o.length===1?dt(o[0],i):Qr(o,i)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var r=Object(this),n=Math.max(Math.min(r.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(o=o<0?Math.max(n+arguments[2],0):Math.min(o,n);i<o;)r[i]=t,++i;return r},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var ji=function(){};ji.prototype.interfaces_=function(){return[]};ji.prototype.getClass=function(){return ji};ji.prototype.equalsWithTolerance=function(t,r,n){return Math.abs(t-r)<=n};var le=function(e){function t(r){e.call(this,r),this.name="IllegalArgumentException",this.message=r,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),st=function(){},Ng={MAX_VALUE:{configurable:!0}};st.isNaN=function(t){return Number.isNaN(t)};st.doubleToLongBits=function(t){return t};st.longBitsToDouble=function(t){return t};st.isInfinite=function(t){return!Number.isFinite(t)};Ng.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(st,Ng);var Xr=function(){},pu=function(){},ko=function(){};function Ur(){}var P=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},po={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};P.prototype.setOrdinate=function(t,r){switch(t){case P.X:this.x=r;break;case P.Y:this.y=r;break;case P.Z:this.z=r;break;default:throw new le("Invalid ordinate index: "+t)}};P.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return!(!ji.equalsWithTolerance(this.x,r.x,n)||!ji.equalsWithTolerance(this.y,r.y,n))}};P.prototype.getOrdinate=function(t){switch(t){case P.X:return this.x;case P.Y:return this.y;case P.Z:return this.z}throw new le("Invalid ordinate index: "+t)};P.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||st.isNaN(this.z))&&st.isNaN(t.z)};P.prototype.equals=function(t){return t instanceof P?this.equals2D(t):!1};P.prototype.equalInZ=function(t,r){return ji.equalsWithTolerance(this.z,t.z,r)};P.prototype.compareTo=function(t){var r=t;return this.x<r.x?-1:this.x>r.x?1:this.y<r.y?-1:this.y>r.y?1:0};P.prototype.clone=function(){};P.prototype.copy=function(){return new P(this)};P.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};P.prototype.distance3D=function(t){var r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(r*r+n*n+i*i)};P.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)};P.prototype.hashCode=function(){var t=17;return t=37*t+P.hashCode(this.x),t=37*t+P.hashCode(this.y),t};P.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};P.prototype.interfaces_=function(){return[Xr,pu,Ur]};P.prototype.getClass=function(){return P};P.hashCode=function(){if(arguments.length===1){var t=arguments[0],r=st.doubleToLongBits(t);return Math.trunc((r^r)>>>32)}};po.DimensionalComparator.get=function(){return ui};po.serialVersionUID.get=function(){return 6683108902428367e3};po.NULL_ORDINATE.get=function(){return st.NaN};po.X.get=function(){return 0};po.Y.get=function(){return 1};po.Z.get=function(){return 2};Object.defineProperties(P,po);var ui=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var r=arguments[0];if(r!==2&&r!==3)throw new le("only 2 or 3 dimensions may be specified");this._dimensionsToTest=r}}};ui.prototype.compare=function(t,r){var n=t,i=r,o=ui.compare(n.x,i.x);if(o!==0)return o;var s=ui.compare(n.y,i.y);if(s!==0)return s;if(this._dimensionsToTest<=2)return 0;var a=ui.compare(n.z,i.z);return a};ui.prototype.interfaces_=function(){return[ko]};ui.prototype.getClass=function(){return ui};ui.compare=function(t,r){return t<r?-1:t>r?1:st.isNaN(t)?st.isNaN(r)?0:-1:st.isNaN(r)?1:0};var qo=function(){};qo.prototype.create=function(){};qo.prototype.interfaces_=function(){return[]};qo.prototype.getClass=function(){return qo};var L=function(){},sa={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};L.prototype.interfaces_=function(){return[]};L.prototype.getClass=function(){return L};L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new le("Unknown location value: "+t)};sa.INTERIOR.get=function(){return 0};sa.BOUNDARY.get=function(){return 1};sa.EXTERIOR.get=function(){return 2};sa.NONE.get=function(){return-1};Object.defineProperties(L,sa);var tt=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Lr=function(){},Pg={LOG_10:{configurable:!0}};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};Lr.log10=function(t){var r=Math.log(t);return st.isInfinite(r)||st.isNaN(r)?r:r/Lr.LOG_10};Lr.min=function(t,r,n,i){var o=t;return r<o&&(o=r),n<o&&(o=n),i<o&&(o=i),o};Lr.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1],n=arguments[2];return t<r?r:t>n?n:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],s=arguments[2];return i<o?o:i>s?s:i}};Lr.wrap=function(t,r){return t<0?r- -t%r:t%r};Lr.max=function(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2],i=t;return r>i&&(i=r),n>i&&(i=n),i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],f=o;return s>f&&(f=s),a>f&&(f=a),u>f&&(f=u),f}};Lr.average=function(t,r){return(t+r)/2};Pg.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Lr,Pg);var Nn=function(t){this.str=t};Nn.prototype.append=function(t){this.str+=t};Nn.prototype.setCharAt=function(t,r){this.str=this.str.substr(0,t)+r+this.str.substr(t+1)};Nn.prototype.toString=function(t){return this.str};var vn=function(t){this.value=t};vn.prototype.intValue=function(){return this.value};vn.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};vn.isNaN=function(t){return Number.isNaN(t)};var Xs=function(){};Xs.isWhitespace=function(t){return t<=32&&t>=0||t===127};Xs.toUpperCase=function(t){return t.toUpperCase()};var O=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}else if(typeof arguments[0]=="string"){var n=arguments[0];e.call(this,e.parse(n))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},sn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};O.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};O.prototype.extractSignificantDigits=function(t,r){var n=this.abs(),i=O.magnitude(n._hi),o=O.TEN.pow(i);n=n.divide(o),n.gt(O.TEN)?(n=n.divide(O.TEN),i+=1):n.lt(O.ONE)&&(n=n.multiply(O.TEN),i-=1);for(var s=i+1,a=new Nn,u=O.MAX_PRINT_DIGITS-1,f=0;f<=u;f++){t&&f===s&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(O.valueOf(l)).multiply(O.TEN),c&&n.selfAdd(O.TEN);var p=!0,d=O.magnitude(n._hi);if(d<0&&Math.abs(d)>=u-f&&(p=!1),!p)break}return r[0]=i,a.toString()};O.prototype.sqr=function(){return this.multiply(this)};O.prototype.doubleValue=function(){return this._hi+this._lo};O.prototype.subtract=function(){if(arguments[0]instanceof O){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.add(-r)}};O.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};O.prototype.isZero=function(){return this._hi===0&&this._lo===0};O.prototype.selfSubtract=function(){if(arguments[0]instanceof O){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.isNaN()?this:this.selfAdd(-r,0)}};O.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};O.prototype.min=function(t){return this.le(t)?this:t};O.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfDivide(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,f=null,l=null,c=null,h=null;return f=this._hi/n,l=O.SPLIT*f,o=l-f,h=O.SPLIT*n,o=l-o,s=f-o,a=h-n,c=f*n,a=h-a,u=n-a,h=o*a-c+o*u+s*a+s*u,l=(this._hi-c-h+this._lo-f*i)/n,h=f+l,this._hi=h,this._lo=f-h+l,this}};O.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};O.prototype.divide=function(){if(arguments[0]instanceof O){var t=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null,u=null,f=null;s=this._hi/t._hi,a=O.SPLIT*s,r=a-s,f=O.SPLIT*t._hi,r=a-r,n=s-r,i=f-t._hi,u=s*t._hi,i=f-i,o=t._hi-i,f=r*i-u+r*o+n*i+n*o,a=(this._hi-u-f+this._lo-s*t._lo)/t._hi,f=s+a;var l=f,c=s-f+a;return new O(l,c)}else if(typeof arguments[0]=="number"){var h=arguments[0];return st.isNaN(h)?O.createNaN():O.copy(this).selfDivide(h,0)}};O.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};O.prototype.pow=function(t){if(t===0)return O.valueOf(1);var r=new O(this),n=O.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(r),i/=2,i>0&&(r=r.sqr());else n=r;return t<0?n.reciprocal():n};O.prototype.ceil=function(){if(this.isNaN())return O.NaN;var t=Math.ceil(this._hi),r=0;return t===this._hi&&(r=Math.ceil(this._lo)),new O(t,r)};O.prototype.compareTo=function(t){var r=t;return this._hi<r._hi?-1:this._hi>r._hi?1:this._lo<r._lo?-1:this._lo>r._lo?1:0};O.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};O.prototype.setValue=function(){if(arguments[0]instanceof O){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.init(r),this}};O.prototype.max=function(t){return this.ge(t)?this:t};O.prototype.sqrt=function(){if(this.isZero())return O.valueOf(0);if(this.isNegative())return O.NaN;var t=1/Math.sqrt(this._hi),r=this._hi*t,n=O.valueOf(r),i=this.subtract(n.sqr()),o=i._hi*(t*.5);return n.add(o)};O.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0],n=null,i=null,o=null,s=null,a=null,u=null;return o=this._hi+r,a=o-this._hi,s=o-a,s=r-a+(this._hi-s),u=s+this._lo,n=o+u,i=u+(o-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(arguments.length===2){var f=arguments[0],l=arguments[1],c=null,h=null,p=null,d=null,m=null,x=null,_=null,g=null;m=this._hi+f,p=this._lo+l,_=m-this._hi,g=p-this._lo,x=m-_,d=p-g,x=f-_+(this._hi-x),d=l-g+(this._lo-d),_=x+p,c=m+_,h=_+(m-c),_=d+h;var v=c+_,y=_+(c-v);return this._hi=v,this._lo=y,this}};O.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfMultiply(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,f=null,l=null;f=O.SPLIT*this._hi,o=f-this._hi,l=O.SPLIT*n,o=f-o,s=this._hi-o,a=l-n,f=this._hi*n,a=l-a,u=n-a,l=o*a-f+o*u+s*a+s*u+(this._hi*i+this._lo*n);var c=f+l;o=f-c;var h=l+o;return this._hi=c,this._lo=h,this}};O.prototype.selfSqr=function(){return this.selfMultiply(this)};O.prototype.floor=function(){if(this.isNaN())return O.NaN;var t=Math.floor(this._hi),r=0;return t===this._hi&&(r=Math.floor(this._lo)),new O(t,r)};O.prototype.negate=function(){return this.isNaN()?this:new O(-this._hi,-this._lo)};O.prototype.clone=function(){};O.prototype.multiply=function(){if(arguments[0]instanceof O){var t=arguments[0];return t.isNaN()?O.createNaN():O.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return st.isNaN(r)?O.createNaN():O.copy(this).selfMultiply(r,0)}};O.prototype.isNaN=function(){return st.isNaN(this._hi)};O.prototype.intValue=function(){return Math.trunc(this._hi)};O.prototype.toString=function(){var t=O.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};O.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null),n=this.extractSignificantDigits(!0,r),i=r[0]+1,o=n;if(n.charAt(0)===".")o="0"+n;else if(i<0)o="0."+O.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var s=i-n.length,a=O.stringOfChar("0",s);o=n+a+".0"}return this.isNegative()?"-"+o:o};O.prototype.reciprocal=function(){var t=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;o=1/this._hi,s=O.SPLIT*o,t=s-o,u=O.SPLIT*this._hi,t=s-t,r=o-t,n=u-this._hi,a=o*this._hi,n=u-n,i=this._hi-n,u=t*n-a+t*i+r*n+r*i,s=(1-a-u-o*this._lo)/this._hi;var f=o+s,l=o-f+s;return new O(f,l)};O.prototype.toSciNotation=function(){if(this.isZero())return O.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null),n=this.extractSignificantDigits(!1,r),i=O.SCI_NOT_EXPONENT_CHAR+r[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var s=n.charAt(0)+"."+o;return this.isNegative()?"-"+s+i:s+i};O.prototype.abs=function(){return this.isNaN()?O.NaN:this.isNegative()?this.negate():new O(this)};O.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};O.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};O.prototype.add=function(){if(arguments[0]instanceof O){var t=arguments[0];return O.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return O.copy(this).selfAdd(r)}};O.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof O){var r=arguments[0];this._hi=r._hi,this._lo=r._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}};O.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};O.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};O.prototype.trunc=function(){return this.isNaN()?O.NaN:this.isPositive()?this.floor():this.ceil()};O.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};O.prototype.interfaces_=function(){return[Ur,Xr,pu]};O.prototype.getClass=function(){return O};O.sqr=function(t){return O.valueOf(t).selfMultiply(t)};O.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return O.parse(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return new O(r)}};O.sqrt=function(t){return O.valueOf(t).sqrt()};O.parse=function(t){for(var r=0,n=t.length;Xs.isWhitespace(t.charAt(r));)r++;var i=!1;if(r<n){var o=t.charAt(r);(o==="-"||o==="+")&&(r++,o==="-"&&(i=!0))}for(var s=new O,a=0,u=0,f=0;!(r>=n);){var l=t.charAt(r);if(r++,Xs.isDigit(l)){var c=l-"0";s.selfMultiply(O.TEN),s.selfAdd(c),a++;continue}if(l==="."){u=a;continue}if(l==="e"||l==="E"){var h=t.substring(r);try{f=vn.parseInt(h)}catch(_){throw _ instanceof Error?new Error("Invalid exponent "+h+" in string "+t):_}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+r+" in string "+t)}var p=s,d=a-u-f;if(d===0)p=s;else if(d>0){var m=O.TEN.pow(d);p=s.divide(m)}else if(d<0){var x=O.TEN.pow(-d);p=s.multiply(x)}return i?p.negate():p};O.createNaN=function(){return new O(st.NaN,st.NaN)};O.copy=function(t){return new O(t)};O.magnitude=function(t){var r=Math.abs(t),n=Math.log(r)/Math.log(10),i=Math.trunc(Math.floor(n)),o=Math.pow(10,i);return o*10<=r&&(i+=1),i};O.stringOfChar=function(t,r){for(var n=new Nn,i=0;i<r;i++)n.append(t);return n.toString()};sn.PI.get=function(){return new O(3.141592653589793,12246467991473532e-32)};sn.TWO_PI.get=function(){return new O(6.283185307179586,24492935982947064e-32)};sn.PI_2.get=function(){return new O(1.5707963267948966,6123233995736766e-32)};sn.E.get=function(){return new O(2.718281828459045,14456468917292502e-32)};sn.NaN.get=function(){return new O(st.NaN,st.NaN)};sn.EPS.get=function(){return 123259516440783e-46};sn.SPLIT.get=function(){return 134217729};sn.MAX_PRINT_DIGITS.get=function(){return 32};sn.TEN.get=function(){return O.valueOf(10)};sn.ONE.get=function(){return O.valueOf(1)};sn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};sn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(O,sn);var gr=function(){},Mg={DP_SAFE_EPSILON:{configurable:!0}};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.orientationIndex=function(t,r,n){var i=gr.orientationIndexFilter(t,r,n);if(i<=1)return i;var o=O.valueOf(r.x).selfAdd(-t.x),s=O.valueOf(r.y).selfAdd(-t.y),a=O.valueOf(n.x).selfAdd(-r.x),u=O.valueOf(n.y).selfAdd(-r.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()};gr.signOfDet2x2=function(t,r,n,i){var o=t.multiply(i).selfSubtract(r.multiply(n));return o.signum()};gr.intersection=function(t,r,n,i){var o=O.valueOf(i.y).selfSubtract(n.y).selfMultiply(O.valueOf(r.x).selfSubtract(t.x)),s=O.valueOf(i.x).selfSubtract(n.x).selfMultiply(O.valueOf(r.y).selfSubtract(t.y)),a=o.subtract(s),u=O.valueOf(i.x).selfSubtract(n.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),f=O.valueOf(i.y).selfSubtract(n.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),l=u.subtract(f),c=l.selfDivide(a).doubleValue(),h=O.valueOf(t.x).selfAdd(O.valueOf(r.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),p=O.valueOf(r.x).selfSubtract(t.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),d=O.valueOf(r.y).selfSubtract(t.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),m=p.subtract(d),x=m.selfDivide(a).doubleValue(),_=O.valueOf(n.y).selfAdd(O.valueOf(i.y).selfSubtract(n.y).selfMultiply(x)).doubleValue();return new P(h,_)};gr.orientationIndexFilter=function(t,r,n){var i=null,o=(t.x-n.x)*(r.y-n.y),s=(t.y-n.y)*(r.x-n.x),a=o-s;if(o>0){if(s<=0)return gr.signum(a);i=o+s}else if(o<0){if(s>=0)return gr.signum(a);i=-o-s}else return gr.signum(a);var u=gr.DP_SAFE_EPSILON*i;return a>=u||-a>=u?gr.signum(a):2};gr.signum=function(t){return t>0?1:t<0?-1:0};Mg.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(gr,Mg);var yt=function(){},aa={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};aa.X.get=function(){return 0};aa.Y.get=function(){return 1};aa.Z.get=function(){return 2};aa.M.get=function(){return 3};yt.prototype.setOrdinate=function(t,r,n){};yt.prototype.size=function(){};yt.prototype.getOrdinate=function(t,r){};yt.prototype.getCoordinate=function(){};yt.prototype.getCoordinateCopy=function(t){};yt.prototype.getDimension=function(){};yt.prototype.getX=function(t){};yt.prototype.clone=function(){};yt.prototype.expandEnvelope=function(t){};yt.prototype.copy=function(){};yt.prototype.getY=function(t){};yt.prototype.toCoordinateArray=function(){};yt.prototype.interfaces_=function(){return[pu]};yt.prototype.getClass=function(){return yt};Object.defineProperties(yt,aa);var Lg=function(){},us=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Lg),ke=function(){};ke.arraycopy=function(t,r,n,i,o){for(var s=0,a=r;a<r+o;a++)n[i+s]=t[a],s++};ke.getProperty=function(t){return{"line.separator":`
`}[t]};var Jr=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],f=arguments[1],l=arguments[2];this.x=u,this.y=f,this.w=l}else if(arguments.length===4){var c=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],m=c.y-h.y,x=h.x-c.x,_=c.x*h.y-h.x*c.y,g=p.y-d.y,v=d.x-p.x,y=p.x*d.y-d.x*p.y;this.x=x*y-v*_,this.y=g*_-m*y,this.w=m*v-g*x}};Jr.prototype.getY=function(){var t=this.y/this.w;if(st.isNaN(t)||st.isInfinite(t))throw new us;return t};Jr.prototype.getX=function(){var t=this.x/this.w;if(st.isNaN(t)||st.isInfinite(t))throw new us;return t};Jr.prototype.getCoordinate=function(){var t=new P;return t.x=this.getX(),t.y=this.getY(),t};Jr.prototype.interfaces_=function(){return[]};Jr.prototype.getClass=function(){return Jr};Jr.intersection=function(t,r,n,i){var o=t.y-r.y,s=r.x-t.x,a=t.x*r.y-r.x*t.y,u=n.y-i.y,f=i.x-n.x,l=n.x*i.y-i.x*n.y,c=s*l-f*a,h=u*a-o*l,p=o*f-u*s,d=c/p,m=h/p;if(st.isNaN(d)||st.isInfinite(d)||st.isNaN(m)||st.isInfinite(m))throw new us;return new P(d,m)};var W=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Og={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()};W.prototype.equals=function(t){if(!(t instanceof W))return!1;var r=t;return this.isNull()?r.isNull():this._maxx===r.getMaxX()&&this._maxy===r.getMaxY()&&this._minx===r.getMinX()&&this._miny===r.getMinY()};W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var r=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new W(r,i,n,o)};W.prototype.isNull=function(){return this._maxx<this._minx};W.prototype.getMaxX=function(){return this._maxx};W.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof W){var r=arguments[0];return this.isNull()||r.isNull()?!1:r.getMinX()>=this._minx&&r.getMaxX()<=this._maxx&&r.getMinY()>=this._miny&&r.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}};W.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof W){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof P){var r=arguments[0];return this.intersects(r.x,r.y)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}};W.prototype.getMinY=function(){return this._miny};W.prototype.getMinX=function(){return this._minx};W.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var r=arguments[0];if(r.isNull())return null;this.isNull()?(this._minx=r.getMinX(),this._maxx=r.getMaxX(),this._miny=r.getMinY(),this._maxy=r.getMaxY()):(r._minx<this._minx&&(this._minx=r._minx),r._maxx>this._maxx&&(this._maxx=r._maxx),r._miny<this._miny&&(this._miny=r._miny),r._maxy>this._maxy&&(this._maxy=r._maxy))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),r=this.getHeight();return t<r?t:r};W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};W.prototype.compareTo=function(t){var r=t;return this.isNull()?r.isNull()?0:-1:r.isNull()?1:this._minx<r._minx?-1:this._minx>r._minx?1:this._miny<r._miny?-1:this._miny>r._miny?1:this._maxx<r._maxx?-1:this._maxx>r._maxx?1:this._maxy<r._maxy?-1:this._maxy>r._maxy?1:0};W.prototype.translate=function(t,r){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+r,this.getMaxY()+r)};W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),r=this.getHeight();return t>r?t:r};W.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=r,this._maxx+=r,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};W.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof P){var r=arguments[0];return this.covers(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}};W.prototype.centre=function(){return this.isNull()?null:new P((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};W.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var r=arguments[0];this._minx=r._minx,this._maxx=r._maxx,this._miny=r._miny,this._maxy=r._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}};W.prototype.getMaxY=function(){return this._maxy};W.prototype.distance=function(t){if(this.intersects(t))return 0;var r=0;this._maxx<t._minx?r=t._minx-this._maxx:this._minx>t._maxx&&(r=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),r===0?n:n===0?r:Math.sqrt(r*r+n*n)};W.prototype.hashCode=function(){var t=17;return t=37*t+P.hashCode(this._minx),t=37*t+P.hashCode(this._maxx),t=37*t+P.hashCode(this._miny),t=37*t+P.hashCode(this._maxy),t};W.prototype.interfaces_=function(){return[Xr,Ur]};W.prototype.getClass=function(){return W};W.intersects=function(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2];return n.x>=(t.x<r.x?t.x:r.x)&&n.x<=(t.x>r.x?t.x:r.x)&&n.y>=(t.y<r.y?t.y:r.y)&&n.y<=(t.y>r.y?t.y:r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=Math.min(s.x,a.x),f=Math.max(s.x,a.x),l=Math.min(i.x,o.x),c=Math.max(i.x,o.x);return!(l>f||c<u||(u=Math.min(s.y,a.y),f=Math.max(s.y,a.y),l=Math.min(i.y,o.y),c=Math.max(i.y,o.y),l>f)||c<u)}};Og.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(W,Og);var un={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},gu=function(t){this.geometryFactory=t||new lt};gu.prototype.read=function(t){var r,n,i;t=t.replace(/[\n\r]/g," ");var o=un.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(o=un.emptyTypeStr.exec(t),o[2]=void 0),o&&(n=o[1].toLowerCase(),i=o[2],Oo[n]&&(r=Oo[n].apply(this,[i]))),r===void 0)throw new Error("Could not parse WKT "+t);return r};gu.prototype.write=function(t){return this.extractGeometry(t)};gu.prototype.extractGeometry=function(t){var r=t.getGeometryType().toLowerCase();if(!Wn[r])return null;var n=r.toUpperCase(),i;return t.isEmpty()?i=n+" EMPTY":i=n+"("+Wn[r].apply(this,[t])+")",i};var Wn={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Wn.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Wn.point.apply(r,[t._geometries[i]])+")");return n.join(",")},linestring:function(t){for(var r=this,n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(Wn.coordinate.apply(r,[t._points._coordinates[i]]));return n.join(",")},linearring:function(t){for(var r=this,n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(Wn.coordinate.apply(r,[t._points._coordinates[i]]));return n.join(",")},multilinestring:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Wn.linestring.apply(r,[t._geometries[i]])+")");return n.join(",")},polygon:function(t){var r=this,n=[];n.push("("+Wn.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)n.push("("+Wn.linestring.apply(r,[t._holes[i]])+")");return n.join(",")},multipolygon:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Wn.polygon.apply(r,[t._geometries[i]])+")");return n.join(",")},geometrycollection:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push(r.extractGeometry(t._geometries[i]));return n.join(",")}},Oo={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var r=t.trim().split(un.spaces);return this.geometryFactory.createPoint(new P(Number.parseFloat(r[0]),Number.parseFloat(r[1])))},multipoint:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var n,i=t.trim().split(","),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(un.trimParens,"$1"),o.push(Oo.point.apply(r,[n]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var r=t.trim().split(","),n=[],i,o=0,s=r.length;o<s;++o)i=r[o].trim().split(un.spaces),n.push(new P(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var r=t.trim().split(","),n=[],i,o=0,s=r.length;o<s;++o)i=r[o].trim().split(un.spaces),n.push(new P(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var n,i=t.trim().split(un.parenComma),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(un.trimParens,"$1"),o.push(Oo.linestring.apply(r,[n]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){var r=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var n,i,o,s=t.trim().split(un.parenComma),a,u=[],f=0,l=s.length;f<l;++f)n=s[f].replace(un.trimParens,"$1"),i=Oo.linestring.apply(r,[n]),o=r.geometryFactory.createLinearRing(i._points),f===0?a=o:u.push(o);return this.geometryFactory.createPolygon(a,u)},multipolygon:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var n,i=t.trim().split(un.doubleParenComma),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(un.trimParens,"$1"),o.push(Oo.polygon.apply(r,[n]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){var r=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),i=[],o=0,s=n.length;o<s;++o)i.push(r.read(n[o]));return this.geometryFactory.createGeometryCollection(i)}},$r=function(t){this.parser=new gu(t)};$r.prototype.write=function(t){return this.parser.write(t)};$r.toLineString=function(t,r){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+r.x+" "+r.y+" )"};var jn=function(e){function t(r){e.call(this,r),this.name="RuntimeException",this.message=r,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),za=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var r=arguments[0];e.call(this,r)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(jn),ut=function(){};ut.prototype.interfaces_=function(){return[]};ut.prototype.getClass=function(){return ut};ut.shouldNeverReachHere=function(){if(arguments.length===0)ut.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new za("Should never reach here"+(t!==null?": "+t:""))}};ut.isTrue=function(){var t,r;if(arguments.length===1)t=arguments[0],ut.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],r=arguments[1],!t))throw r===null?new za:new za(r)};ut.equals=function(){var t,r,n;if(arguments.length===2)t=arguments[0],r=arguments[1],ut.equals(t,r,null);else if(arguments.length===3&&(t=arguments[0],r=arguments[1],n=arguments[2],!r.equals(t)))throw new za("Expected "+t+" but encountered "+r+(n!==null?": "+n:""))};var he=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new P,this._intPt[1]=new P,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},go={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};he.prototype.getIndexAlongSegment=function(t,r){return this.computeIntLineIndex(),this._intLineIndex[t][r]};he.prototype.getTopologySummary=function(){var t=new Nn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};he.prototype.computeIntersection=function(t,r,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=r,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,r,n,i)};he.prototype.getIntersectionNum=function(){return this._result};he.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],r=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);r>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};he.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};he.prototype.setPrecisionModel=function(t){this._precisionModel=t};he.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var r=arguments[0],n=0;n<this._result;n++)if(!(t._intPt[n].equals2D(t._inputLines[r][0])||t._intPt[n].equals2D(t._inputLines[r][1])))return!0;return!1}};he.prototype.getIntersection=function(t){return this._intPt[t]};he.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};he.prototype.hasIntersection=function(){return this._result!==he.NO_INTERSECTION};he.prototype.getEdgeDistance=function(t,r){var n=he.computeEdgeDistance(this._intPt[r],this._inputLines[t][0],this._inputLines[t][1]);return n};he.prototype.isCollinear=function(){return this._result===he.COLLINEAR_INTERSECTION};he.prototype.toString=function(){return $r.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+$r.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};he.prototype.getEndpoint=function(t,r){return this._inputLines[t][r]};he.prototype.isIntersection=function(t){for(var r=this,n=0;n<this._result;n++)if(r._intPt[n].equals2D(t))return!0;return!1};he.prototype.getIntersectionAlongSegment=function(t,r){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][r]]};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.computeEdgeDistance=function(t,r,n){var i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y),s=-1;if(t.equals(r))s=0;else if(t.equals(n))i>o?s=i:s=o;else{var a=Math.abs(t.x-r.x),u=Math.abs(t.y-r.y);i>o?s=a:s=u,s===0&&!t.equals(r)&&(s=Math.max(a,u))}return ut.isTrue(!(s===0&&!t.equals(r)),"Bad distance calculation"),s};he.nonRobustComputeEdgeDistance=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=Math.sqrt(i*i+o*o);return ut.isTrue(!(s===0&&!t.equals(r)),"Invalid distance calculation"),s};go.DONT_INTERSECT.get=function(){return 0};go.DO_INTERSECT.get=function(){return 1};go.COLLINEAR.get=function(){return 2};go.NO_INTERSECTION.get=function(){return 0};go.POINT_INTERSECTION.get=function(){return 1};go.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(he,go);var Yi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var i=new W(this._inputLines[0][0],this._inputLines[0][1]),o=new W(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&o.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,W.intersects(i,o,n)&&G.orientationIndex(i,o,n)===0&&G.orientationIndex(o,i,n)===0)return this._isProper=!0,(n.equals(i)||n.equals(o))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,i,o,s,a){a.x=this.smallestInAbsValue(n.x,i.x,o.x,s.x),a.y=this.smallestInAbsValue(n.y,i.y,o.y,s.y),n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,o.x-=a.x,o.y-=a.y,s.x-=a.x,s.y-=a.y},t.prototype.safeHCoordinateIntersection=function(n,i,o,s){var a=null;try{a=Jr.intersection(n,i,o,s)}catch(u){if(u instanceof us)a=t.nearestEndpoint(n,i,o,s);else throw u}finally{}return a},t.prototype.intersection=function(n,i,o,s){var a=this.intersectionWithNormalization(n,i,o,s);return this.isInSegmentEnvelopes(a)||(a=new P(t.nearestEndpoint(n,i,o,s))),this._precisionModel!==null&&this._precisionModel.makePrecise(a),a},t.prototype.smallestInAbsValue=function(n,i,o,s){var a=n,u=Math.abs(a);return Math.abs(i)<u&&(a=i,u=Math.abs(i)),Math.abs(o)<u&&(a=o,u=Math.abs(o)),Math.abs(s)<u&&(a=s),a},t.prototype.checkDD=function(n,i,o,s,a){var u=gr.intersection(n,i,o,s),f=this.isInSegmentEnvelopes(u);ke.out.println("DD in env = "+f+"  --------------------- "+u),a.distance(u)>1e-4&&ke.out.println("Distance = "+a.distance(u))},t.prototype.intersectionWithNormalization=function(n,i,o,s){var a=new P(n),u=new P(i),f=new P(o),l=new P(s),c=new P;this.normalizeToEnvCentre(a,u,f,l,c);var h=this.safeHCoordinateIntersection(a,u,f,l);return h.x+=c.x,h.y+=c.y,h},t.prototype.computeCollinearIntersection=function(n,i,o,s){var a=W.intersects(n,i,o),u=W.intersects(n,i,s),f=W.intersects(o,s,n),l=W.intersects(o,s,i);return a&&u?(this._intPt[0]=o,this._intPt[1]=s,e.COLLINEAR_INTERSECTION):f&&l?(this._intPt[0]=n,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):a&&f?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!u&&!f?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&f?(this._intPt[0]=s,this._intPt[1]=n,s.equals(n)&&!a&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=s,this._intPt[1]=i,s.equals(i)&&!a&&!f?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,i,o,s,a){var u=n.x<i.x?n.x:i.x,f=n.y<i.y?n.y:i.y,l=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,h=o.x<s.x?o.x:s.x,p=o.y<s.y?o.y:s.y,d=o.x>s.x?o.x:s.x,m=o.y>s.y?o.y:s.y,x=u>h?u:h,_=l<d?l:d,g=f>p?f:p,v=c<m?c:m,y=(x+_)/2,E=(g+v)/2;a.x=y,a.y=E,n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,o.x-=a.x,o.y-=a.y,s.x-=a.x,s.y-=a.y},t.prototype.computeIntersect=function(n,i,o,s){if(this._isProper=!1,!W.intersects(n,i,o,s))return e.NO_INTERSECTION;var a=G.orientationIndex(n,i,o),u=G.orientationIndex(n,i,s);if(a>0&&u>0||a<0&&u<0)return e.NO_INTERSECTION;var f=G.orientationIndex(o,s,n),l=G.orientationIndex(o,s,i);if(f>0&&l>0||f<0&&l<0)return e.NO_INTERSECTION;var c=a===0&&u===0&&f===0&&l===0;return c?this.computeCollinearIntersection(n,i,o,s):(a===0||u===0||f===0||l===0?(this._isProper=!1,n.equals2D(o)||n.equals2D(s)?this._intPt[0]=n:i.equals2D(o)||i.equals2D(s)?this._intPt[0]=i:a===0?this._intPt[0]=new P(o):u===0?this._intPt[0]=new P(s):f===0?this._intPt[0]=new P(n):l===0&&(this._intPt[0]=new P(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,o,s)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,i,o,s){var a=n,u=G.distancePointLine(n,o,s),f=G.distancePointLine(i,o,s);return f<u&&(u=f,a=i),f=G.distancePointLine(o,n,i),f<u&&(u=f,a=o),f=G.distancePointLine(s,n,i),f<u&&(u=f,a=s),a},t}(he),to=function(){};to.prototype.interfaces_=function(){return[]};to.prototype.getClass=function(){return to};to.orientationIndex=function(t,r,n){var i=r.x-t.x,o=r.y-t.y,s=n.x-r.x,a=n.y-r.y;return to.signOfDet2x2(i,o,s,a)};to.signOfDet2x2=function(t,r,n,i){var o=null,s=null,a=null;if(o=1,t===0||i===0)return r===0||n===0?0:r>0?n>0?-o:o:n>0?o:-o;if(r===0||n===0)return i>0?t>0?o:-o:t>0?-o:o;if(r>0?i>0?r<=i||(o=-o,s=t,t=n,n=s,s=r,r=i,i=s):r<=-i?(o=-o,n=-n,i=-i):(s=t,t=-n,n=s,s=r,r=-i,i=s):i>0?-r<=i?(o=-o,t=-t,r=-r):(s=-t,t=n,n=s,s=-r,r=i,i=s):r>=i?(t=-t,r=-r,n=-n,i=-i):(o=-o,s=-t,t=-n,n=s,s=-r,r=-i,i=s),t>0)if(n>0){if(!(t<=n))return o}else return o;else{if(n>0)return-o;if(t>=n)o=-o,t=-t,n=-n;else return-o}for(;;){if(a=Math.floor(n/t),n=n-a*t,i=i-a*r,i<0)return-o;if(i>r)return o;if(t>n+n){if(r<i+i)return o}else{if(r>i+i)return-o;n=t-n,i=r-i,o=-o}if(i===0)return n===0?0:-o;if(n===0||(a=Math.floor(t/n),t=t-a*n,r=r-a*i,r<0))return o;if(r>i)return-o;if(n>t+t){if(i<r+r)return-o}else{if(i>r+r)return o;t=n-t,r=i-r,o=-o}if(r===0)return t===0?0:o;if(t===0)return-o}};var pn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};pn.prototype.countSegment=function(t,r){if(t.x<this._p.x&&r.x<this._p.x)return null;if(this._p.x===r.x&&this._p.y===r.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&r.y===this._p.y){var n=t.x,i=r.x;return n>i&&(n=r.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&r.y<=this._p.y||r.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,s=t.y-this._p.y,a=r.x-this._p.x,u=r.y-this._p.y,f=to.signOfDet2x2(o,s,a,u);if(f===0)return this._isPointOnSegment=!0,null;u<s&&(f=-f),f>0&&this._crossingCount++}};pn.prototype.isPointInPolygon=function(){return this.getLocation()!==L.EXTERIOR};pn.prototype.getLocation=function(){return this._isPointOnSegment?L.BOUNDARY:this._crossingCount%2===1?L.INTERIOR:L.EXTERIOR};pn.prototype.isOnSegment=function(){return this._isPointOnSegment};pn.prototype.interfaces_=function(){return[]};pn.prototype.getClass=function(){return pn};pn.locatePointInRing=function(){if(arguments[0]instanceof P&&tt(arguments[1],yt)){for(var t=arguments[0],r=arguments[1],n=new pn(t),i=new P,o=new P,s=1;s<r.size();s++)if(r.getCoordinate(s,i),r.getCoordinate(s-1,o),n.countSegment(i,o),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof P&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],f=new pn(a),l=1;l<u.length;l++){var c=u[l],h=u[l-1];if(f.countSegment(c,h),f.isOnSegment())return f.getLocation()}return f.getLocation()}};var G=function(){},vo={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};G.prototype.interfaces_=function(){return[]};G.prototype.getClass=function(){return G};G.orientationIndex=function(t,r,n){return gr.orientationIndex(t,r,n)};G.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var r=0,n=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-n,s=t[i+1].y,a=t[i-1].y;r+=o*(a-s)}return r/2}else if(tt(arguments[0],yt)){var u=arguments[0],f=u.size();if(f<3)return 0;var l=new P,c=new P,h=new P;u.getCoordinate(0,c),u.getCoordinate(1,h);var p=c.x;h.x-=p;for(var d=0,m=1;m<f-1;m++)l.y=c.y,c.x=h.x,c.y=h.y,u.getCoordinate(m+1,h),h.x-=p,d+=c.x*(l.y-h.y);return d/2}};G.distanceLineLine=function(t,r,n,i){if(t.equals(r))return G.distancePointLine(t,n,i);if(n.equals(i))return G.distancePointLine(i,t,r);var o=!1;if(!W.intersects(t,r,n,i))o=!0;else{var s=(r.x-t.x)*(i.y-n.y)-(r.y-t.y)*(i.x-n.x);if(s===0)o=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),u=(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y),f=u/s,l=a/s;(l<0||l>1||f<0||f>1)&&(o=!0)}}return o?Lr.min(G.distancePointLine(t,n,i),G.distancePointLine(r,n,i),G.distancePointLine(n,t,r),G.distancePointLine(i,t,r)):0};G.isPointInRing=function(t,r){return G.locatePointInRing(t,r)!==L.EXTERIOR};G.computeLength=function(t){var r=t.size();if(r<=1)return 0;var n=0,i=new P;t.getCoordinate(0,i);for(var o=i.x,s=i.y,a=1;a<r;a++){t.getCoordinate(a,i);var u=i.x,f=i.y,l=u-o,c=f-s;n+=Math.sqrt(l*l+c*c),o=u,s=f}return n};G.isCCW=function(t){var r=t.length-1;if(r<3)throw new le("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,o=1;o<=r;o++){var s=t[o];s.y>n.y&&(n=s,i=o)}var a=i;do a=a-1,a<0&&(a=r);while(t[a].equals2D(n)&&a!==i);var u=i;do u=(u+1)%r;while(t[u].equals2D(n)&&u!==i);var f=t[a],l=t[u];if(f.equals2D(n)||l.equals2D(n)||f.equals2D(l))return!1;var c=G.computeOrientation(f,n,l),h=!1;return c===0?h=f.x>l.x:h=c>0,h};G.locatePointInRing=function(t,r){return pn.locatePointInRing(t,r)};G.distancePointLinePerpendicular=function(t,r,n){var i=(n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y),o=((r.y-t.y)*(n.x-r.x)-(r.x-t.x)*(n.y-r.y))/i;return Math.abs(o)*Math.sqrt(i)};G.computeOrientation=function(t,r,n){return G.orientationIndex(t,r,n)};G.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];if(r.length===0)throw new le("Line array must contain at least one vertex");for(var n=t.distance(r[0]),i=0;i<r.length-1;i++){var o=G.distancePointLine(t,r[i],r[i+1]);o<n&&(n=o)}return n}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return s.distance(a);var f=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),l=((s.x-a.x)*(u.x-a.x)+(s.y-a.y)*(u.y-a.y))/f;if(l<=0)return s.distance(a);if(l>=1)return s.distance(u);var c=((a.y-s.y)*(u.x-a.x)-(a.x-s.x)*(u.y-a.y))/f;return Math.abs(c)*Math.sqrt(f)}};G.isOnLine=function(t,r){for(var n=new Yi,i=1;i<r.length;i++){var o=r[i-1],s=r[i];if(n.computeIntersection(t,o,s),n.hasIntersection())return!0}return!1};vo.CLOCKWISE.get=function(){return-1};vo.RIGHT.get=function(){return G.CLOCKWISE};vo.COUNTERCLOCKWISE.get=function(){return 1};vo.LEFT.get=function(){return G.COUNTERCLOCKWISE};vo.COLLINEAR.get=function(){return 0};vo.STRAIGHT.get=function(){return G.COLLINEAR};Object.defineProperties(G,vo);var ti=function(){};ti.prototype.filter=function(t){};ti.prototype.interfaces_=function(){return[]};ti.prototype.getClass=function(){return ti};var j=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Un={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};j.prototype.isGeometryCollection=function(){return this.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION};j.prototype.getFactory=function(){return this._factory};j.prototype.getGeometryN=function(t){return this};j.prototype.getArea=function(){return 0};j.prototype.isRectangle=function(){return!1};j.prototype.equals=function(){if(arguments[0]instanceof j){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var r=arguments[0];if(!(r instanceof j))return!1;var n=r;return this.equalsExact(n)}};j.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};j.prototype.geometryChanged=function(){this.apply(j.geometryChangedFilter)};j.prototype.geometryChangedAction=function(){this._envelope=null};j.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};j.prototype.getLength=function(){return 0};j.prototype.getNumGeometries=function(){return 1};j.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],r=t;return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}};j.prototype.getUserData=function(){return this._userData};j.prototype.getSRID=function(){return this._SRID};j.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};j.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION)throw new le("This method does not support GeometryCollection arguments")};j.prototype.equal=function(t,r,n){return n===0?t.equals(r):t.distance(r)<=n};j.prototype.norm=function(){var t=this.copy();return t.normalize(),t};j.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};j.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)};j.prototype.setSRID=function(t){this._SRID=t};j.prototype.setUserData=function(t){this._userData=t};j.prototype.compare=function(t,r){for(var n=t.iterator(),i=r.iterator();n.hasNext()&&i.hasNext();){var o=n.next(),s=i.next(),a=o.compareTo(s);if(a!==0)return a}return n.hasNext()?1:i.hasNext()?-1:0};j.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};j.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===j.SORTINDEX_MULTIPOINT||this.getSortIndex()===j.SORTINDEX_MULTILINESTRING||this.getSortIndex()===j.SORTINDEX_MULTIPOLYGON};j.prototype.interfaces_=function(){return[pu,Xr,Ur]};j.prototype.getClass=function(){return j};j.hasNonEmptyElements=function(t){for(var r=0;r<t.length;r++)if(!t[r].isEmpty())return!0;return!1};j.hasNullElements=function(t){for(var r=0;r<t.length;r++)if(t[r]===null)return!0;return!1};Un.serialVersionUID.get=function(){return 8763622679187377e3};Un.SORTINDEX_POINT.get=function(){return 0};Un.SORTINDEX_MULTIPOINT.get=function(){return 1};Un.SORTINDEX_LINESTRING.get=function(){return 2};Un.SORTINDEX_LINEARRING.get=function(){return 3};Un.SORTINDEX_MULTILINESTRING.get=function(){return 4};Un.SORTINDEX_POLYGON.get=function(){return 5};Un.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Un.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Un.geometryChangedFilter.get=function(){return cl};Object.defineProperties(j,Un);var cl=function(){};cl.interfaces_=function(){return[ti]};cl.filter=function(t){t.geometryChangedAction()};var Dn=function(){};Dn.prototype.filter=function(t){};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};var kr=function(){},si={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};kr.prototype.isInBoundary=function(t){};kr.prototype.interfaces_=function(){return[]};kr.prototype.getClass=function(){return kr};si.Mod2BoundaryNodeRule.get=function(){return zo};si.EndPointBoundaryNodeRule.get=function(){return Xo};si.MultiValentEndPointBoundaryNodeRule.get=function(){return Uo};si.MonoValentEndPointBoundaryNodeRule.get=function(){return Yo};si.MOD2_BOUNDARY_RULE.get=function(){return new zo};si.ENDPOINT_BOUNDARY_RULE.get=function(){return new Xo};si.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Uo};si.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Yo};si.OGC_SFS_BOUNDARY_RULE.get=function(){return kr.MOD2_BOUNDARY_RULE};Object.defineProperties(kr,si);var zo=function(){};zo.prototype.isInBoundary=function(t){return t%2===1};zo.prototype.interfaces_=function(){return[kr]};zo.prototype.getClass=function(){return zo};var Xo=function(){};Xo.prototype.isInBoundary=function(t){return t>0};Xo.prototype.interfaces_=function(){return[kr]};Xo.prototype.getClass=function(){return Xo};var Uo=function(){};Uo.prototype.isInBoundary=function(t){return t>1};Uo.prototype.interfaces_=function(){return[kr]};Uo.prototype.getClass=function(){return Uo};var Yo=function(){};Yo.prototype.isInBoundary=function(t){return t===1};Yo.prototype.interfaces_=function(){return[kr]};Yo.prototype.getClass=function(){return Yo};var Ce=function(){};Ce.prototype.add=function(){};Ce.prototype.addAll=function(){};Ce.prototype.isEmpty=function(){};Ce.prototype.iterator=function(){};Ce.prototype.size=function(){};Ce.prototype.toArray=function(){};Ce.prototype.remove=function(){};function hl(e){this.message=e||""}hl.prototype=new Error;hl.prototype.name="IndexOutOfBoundsException";var fs=function(){};fs.prototype.hasNext=function(){};fs.prototype.next=function(){};fs.prototype.remove=function(){};var Kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Ce);function ls(e){this.message=e||""}ls.prototype=new Error;ls.prototype.name="NoSuchElementException";var B=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Ce&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Ce]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.set=function(n,i){var o=this.array_[n];return this.array_[n]=i,o},t.prototype.iterator=function(){return new dx(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new hl;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,i=[],o=0,s=this.array_.length;o<s;o++)i.push(n.array_[o]);return i},t.prototype.remove=function(n){for(var i=this,o=!1,s=0,a=this.array_.length;s<a;s++)if(i.array_[s]===n){i.array_.splice(s,1),o=!0;break}return o},t}(Kr),dx=function(e){function t(r){e.call(this),this.arrayList_=r,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ls;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(fs),ua=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var n=arguments[0];this.ensureCapacity(n.length),this.add(n,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(i){return this.get(i)},t.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],s=arguments[1],a=!1,u=o.iterator();u.hasNext();)i.add(u.next(),s),a=!0;return a}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=this,o=e.prototype.clone.call(this),s=0;s<this.size();s++)o.add(s,i.get(s).copy());return o},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];e.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var s=arguments[0],a=arguments[1];return this.add(s,a,!0),!0}else if(arguments[0]instanceof P&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1];if(!f&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(u))return null}e.prototype.add.call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],h=arguments[1];return this.add(c,h),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var p=arguments[0],d=arguments[1],m=arguments[2];if(m)for(var x=0;x<p.length;x++)i.add(p[x],d);else for(var _=p.length-1;_>=0;_--)i.add(p[_],d);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof P){var g=arguments[0],v=arguments[1],y=arguments[2];if(!y){var E=this.size();if(E>0){if(g>0){var S=this.get(g-1);if(S.equals2D(v))return null}if(g<E){var C=this.get(g);if(C.equals2D(v))return null}}}e.prototype.add.call(this,g,v)}}else if(arguments.length===4){var N=arguments[0],I=arguments[1],b=arguments[2],M=arguments[3],A=1;b>M&&(A=-1);for(var D=b;D!==M;D+=A)i.add(N[D],I);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new P(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,r),t}(B),ct=function(){},vu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};vu.ForwardComparator.get=function(){return Us};vu.BidirectionalComparator.get=function(){return Vo};vu.coordArrayType.get=function(){return new Array(0).fill(null)};ct.prototype.interfaces_=function(){return[]};ct.prototype.getClass=function(){return ct};ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};ct.ptNotInList=function(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(ct.indexOf(i,r)<0)return i}return null};ct.scroll=function(t,r){var n=ct.indexOf(r,t);if(n<0)return null;var i=new Array(t.length).fill(null);ke.arraycopy(t,n,i,0,t.length-n),ke.arraycopy(t,0,i,t.length-n,n),ke.arraycopy(i,0,t,0,t.length)};ct.equals=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];if(t===r)return!0;if(t===null||r===null||t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(r[n]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(s.compare(i[a],o[a])!==0)return!1;return!0}};ct.intersection=function(t,r){for(var n=new ua,i=0;i<t.length;i++)r.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()};ct.hasRepeatedPoints=function(t){for(var r=1;r<t.length;r++)if(t[r-1].equals(t[r]))return!0;return!1};ct.removeRepeatedPoints=function(t){if(!ct.hasRepeatedPoints(t))return t;var r=new ua(t,!1);return r.toCoordinateArray()};ct.reverse=function(t){for(var r=t.length-1,n=Math.trunc(r/2),i=0;i<=n;i++){var o=t[i];t[i]=t[r-i],t[r-i]=o}};ct.removeNull=function(t){for(var r=0,n=0;n<t.length;n++)t[n]!==null&&r++;var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=0;s<t.length;s++)t[s]!==null&&(i[o++]=t[s]);return i};ct.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],r=new Array(t.length).fill(null),n=0;n<t.length;n++)r[n]=new P(t[n]);return r}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],f=0;f<u;f++)s[a+f]=new P(i[o+f])};ct.isEqualReversed=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[t.length-n-1];if(i.compareTo(o)!==0)return!1}return!0};ct.envelope=function(t){for(var r=new W,n=0;n<t.length;n++)r.expandToInclude(t[n]);return r};ct.toCoordinateArray=function(t){return t.toArray(ct.coordArrayType)};ct.atLeastNCoordinatesOrNothing=function(t,r){return r.length>=t?r:[]};ct.indexOf=function(t,r){for(var n=0;n<r.length;n++)if(t.equals(r[n]))return n;return-1};ct.increasingDirection=function(t){for(var r=0;r<Math.trunc(t.length/2);r++){var n=t.length-1-r,i=t[r].compareTo(t[n]);if(i!==0)return i}return 1};ct.compare=function(t,r){for(var n=0;n<t.length&&n<r.length;){var i=t[n].compareTo(r[n]);if(i!==0)return i;n++}return n<r.length?-1:n<t.length?1:0};ct.minCoordinate=function(t){for(var r=null,n=0;n<t.length;n++)(r===null||r.compareTo(t[n])>0)&&(r=t[n]);return r};ct.extract=function(t,r,n){r=Lr.clamp(r,0,t.length),n=Lr.clamp(n,-1,t.length);var i=n-r+1;n<0&&(i=0),r>=t.length&&(i=0),n<r&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var s=0,a=r;a<=n;a++)o[s++]=t[a];return o};Object.defineProperties(ct,vu);var Us=function(){};Us.prototype.compare=function(t,r){var n=t,i=r;return ct.compare(n,i)};Us.prototype.interfaces_=function(){return[ko]};Us.prototype.getClass=function(){return Us};var Vo=function(){};Vo.prototype.compare=function(t,r){var n=t,i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var o=ct.compare(n,i),s=ct.isEqualReversed(n,i);return s?0:o};Vo.prototype.OLDcompare=function(t,r){var n=t,i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;for(var o=ct.increasingDirection(n),s=ct.increasingDirection(i),a=o>0?0:n.length-1,u=s>0?0:n.length-1,f=0;f<n.length;f++){var l=n[a].compareTo(i[u]);if(l!==0)return l;a+=o,u+=s}return 0};Vo.prototype.interfaces_=function(){return[ko]};Vo.prototype.getClass=function(){return Vo};var yo=function(){};yo.prototype.get=function(){};yo.prototype.put=function(){};yo.prototype.size=function(){};yo.prototype.values=function(){};yo.prototype.entrySet=function(){};var yx=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(yo);function fa(e){this.message=e||""}fa.prototype=new Error;fa.prototype.name="OperationNotSupported";function du(){}du.prototype=new Ce;du.prototype.contains=function(){};var pl=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Ce&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var i=this,o=0,s=this.array_.length;o<s;o++){var a=i.array_[o];if(a===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,i=[],o=0,s=this.array_.length;o<s;o++)i.push(n.array_[o]);return i},t.prototype.iterator=function(){return new mx(this)},t}(du),mx=function(e){function t(r){e.call(this),this.hashSet_=r,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ls;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new fa},t}(fs),Qn=0,Ci=1;function Sh(e){return e===null?Qn:e.color}function ie(e){return e===null?null:e.parent}function Hn(e,t){e!==null&&(e.color=t)}function Ku(e){return e===null?null:e.left}function Nh(e){return e===null?null:e.right}function Je(){this.root_=null,this.size_=0}Je.prototype=new yx;Je.prototype.get=function(e){for(var t=this.root_;t!==null;){var r=e.compareTo(t.key);if(r<0)t=t.left;else if(r>0)t=t.right;else return t.value}return null};Je.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Qn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r=this.root_,n,i;do if(n=r,i=e.compareTo(r.key),i<0)r=r.left;else if(i>0)r=r.right;else{var o=r.value;return r.value=t,o}while(r!==null);var s={key:e,left:null,right:null,value:t,parent:n,color:Qn,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null};Je.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=Ci;e!=null&&e!==this.root_&&e.parent.color===Ci;)if(ie(e)===Ku(ie(ie(e)))){var r=Nh(ie(ie(e)));Sh(r)===Ci?(Hn(ie(e),Qn),Hn(r,Qn),Hn(ie(ie(e)),Ci),e=ie(ie(e))):(e===Nh(ie(e))&&(e=ie(e),t.rotateLeft(e)),Hn(ie(e),Qn),Hn(ie(ie(e)),Ci),t.rotateRight(ie(ie(e))))}else{var n=Ku(ie(ie(e)));Sh(n)===Ci?(Hn(ie(e),Qn),Hn(n,Qn),Hn(ie(ie(e)),Ci),e=ie(ie(e))):(e===Ku(ie(e))&&(e=ie(e),t.rotateRight(e)),Hn(ie(e),Qn),Hn(ie(ie(e)),Ci),t.rotateLeft(ie(ie(e))))}this.root_.color=Qn};Je.prototype.values=function(){var e=new B,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Je.successor(t))!==null;)e.add(t.value);return e};Je.prototype.entrySet=function(){var e=new pl,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Je.successor(t))!==null;)e.add(t);return e};Je.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Je.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Je.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Je.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var r=e.parent,n=e;r!==null&&n===r.right;)n=r,r=r.parent;return r}};Je.prototype.size=function(){return this.size_};var Ys=function(){};Ys.prototype.interfaces_=function(){return[]};Ys.prototype.getClass=function(){return Ys};function bg(){}bg.prototype=new du;function dn(){this.array_=[],arguments[0]instanceof Ce&&this.addAll(arguments[0])}dn.prototype=new bg;dn.prototype.contains=function(e){for(var t=this,r=0,n=this.array_.length;r<n;r++){var i=t.array_[r];if(i.compareTo(e)===0)return!0}return!1};dn.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var r=0,n=this.array_.length;r<n;r++){var i=t.array_[r];if(i.compareTo(e)===1)return t.array_.splice(r,0,e),!0}return this.array_.push(e),!0};dn.prototype.addAll=function(e){for(var t=this,r=e.iterator();r.hasNext();)t.add(r.next());return!0};dn.prototype.remove=function(e){throw new fa};dn.prototype.size=function(){return this.array_.length};dn.prototype.isEmpty=function(){return this.array_.length===0};dn.prototype.toArray=function(){for(var e=this,t=[],r=0,n=this.array_.length;r<n;r++)t.push(e.array_[r]);return t};dn.prototype.iterator=function(){return new yu(this)};var yu=function(e){this.treeSet_=e,this.position_=0};yu.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ls;return this.treeSet_.array_[this.position_++]};yu.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};yu.prototype.remove=function(){throw new fa};var Li=function(){};Li.sort=function(){var t=arguments[0],r,n,i,o;if(arguments.length===1)o=function(a,u){return a.compareTo(u)},t.sort(o);else if(arguments.length===2)i=arguments[1],o=function(a,u){return i.compare(a,u)},t.sort(o);else if(arguments.length===3){n=t.slice(arguments[1],arguments[2]),n.sort();var s=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));for(t.splice(0,t.length),r=0;r<s.length;r++)t.push(s[r])}else if(arguments.length===4)for(n=t.slice(arguments[1],arguments[2]),i=arguments[3],o=function(a,u){return i.compare(a,u)},n.sort(o),s=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length)),t.splice(0,t.length),r=0;r<s.length;r++)t.push(s[r])};Li.asList=function(t){for(var r=new B,n=0,i=t.length;n<i;n++)r.add(t[n]);return r};var Yt=function(){},an={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};an.P.get=function(){return 0};an.L.get=function(){return 1};an.A.get=function(){return 2};an.FALSE.get=function(){return-1};an.TRUE.get=function(){return-2};an.DONTCARE.get=function(){return-3};an.SYM_FALSE.get=function(){return"F"};an.SYM_TRUE.get=function(){return"T"};an.SYM_DONTCARE.get=function(){return"*"};an.SYM_P.get=function(){return"0"};an.SYM_L.get=function(){return"1"};an.SYM_A.get=function(){return"2"};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.toDimensionSymbol=function(t){switch(t){case Yt.FALSE:return Yt.SYM_FALSE;case Yt.TRUE:return Yt.SYM_TRUE;case Yt.DONTCARE:return Yt.SYM_DONTCARE;case Yt.P:return Yt.SYM_P;case Yt.L:return Yt.SYM_L;case Yt.A:return Yt.SYM_A}throw new le("Unknown dimension value: "+t)};Yt.toDimensionValue=function(t){switch(Xs.toUpperCase(t)){case Yt.SYM_FALSE:return Yt.FALSE;case Yt.SYM_TRUE:return Yt.TRUE;case Yt.SYM_DONTCARE:return Yt.DONTCARE;case Yt.SYM_P:return Yt.P;case Yt.SYM_L:return Yt.L;case Yt.SYM_A:return Yt.A}throw new le("Unknown dimension symbol: "+t)};Object.defineProperties(Yt,an);var yn=function(){};yn.prototype.filter=function(t){};yn.prototype.interfaces_=function(){return[]};yn.prototype.getClass=function(){return yn};var jr=function(){};jr.prototype.filter=function(t,r){};jr.prototype.isDone=function(){};jr.prototype.isGeometryChanged=function(){};jr.prototype.interfaces_=function(){return[]};jr.prototype.getClass=function(){return jr};var sr=function(e){function t(n,i){if(e.call(this,i),this._geometries=n||[],e.hasNullElements(this._geometries))throw new le("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new W,s=0;s<this._geometries.length;s++)o.expandToInclude(i._geometries[s].getEnvelopeInternal());return o},t.prototype.getGeometryN=function(i){return this._geometries[i]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),s=-1,a=0;a<this._geometries.length;a++)for(var u=i._geometries[a].getCoordinates(),f=0;f<u.length;f++)s++,o[s]=u[f];return o},t.prototype.getArea=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getArea();return o},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o;if(this._geometries.length!==a._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!i._geometries[u].equalsExact(a._geometries[u],s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();Li.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,o=Yt.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,i._geometries[s].getBoundaryDimension());return o},t.prototype.getDimension=function(){for(var i=this,o=Yt.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,i._geometries[s].getDimension());return o},t.prototype.getLength=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getNumPoints();return o},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[a]=i._geometries[a].reverse();return this.getFactory().createGeometryCollection(s)},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],s=new dn(Li.asList(this._geometries)),a=new dn(Li.asList(o._geometries));return this.compare(s,a)}else if(arguments.length===2){for(var u=arguments[0],f=arguments[1],l=u,c=this.getNumGeometries(),h=l.getNumGeometries(),p=0;p<c&&p<h;){var d=i.getGeometryN(p),m=l.getGeometryN(p),x=d.compareToSameClass(m,f);if(x!==0)return x;p++}return p<c?1:p<h?-1:0}},t.prototype.apply=function(){var i=this;if(tt(arguments[0],Dn))for(var o=arguments[0],s=0;s<this._geometries.length;s++)i._geometries[s].apply(o);else if(tt(arguments[0],jr)){var a=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(i._geometries[u].apply(a),!a.isDone());u++);a.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],yn)){var f=arguments[0];f.filter(this);for(var l=0;l<this._geometries.length;l++)i._geometries[l].apply(f)}else if(tt(arguments[0],ti)){var c=arguments[0];c.filter(this);for(var h=0;h<this._geometries.length;h++)i._geometries[h].apply(c)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ut.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var s=0;s<this._geometries.length;s++)o._geometries[s]=i._geometries[s].clone();return o},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,r),t}(j),Ai=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return j.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Yt.FALSE:0},t.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[o-1-a]=i._geometries[a].reverse();return this.getFactory().createMultiLineString(s)},t.prototype.getBoundary=function(){return new Tr(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Ys]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,r),t}(sr),Tr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],r=kr.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=r}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Tr.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var r=this.computeBoundaryCoordinates(t);return r.length===1?this._geomFact.createPoint(r[0]):this._geomFact.createMultiPointFromCoords(r)};Tr.prototype.getBoundary=function(){return this._geom instanceof ve?this.boundaryLineString(this._geom):this._geom instanceof Ai?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Tr.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var r=this._bnRule.isInBoundary(2);return r?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};Tr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Tr.prototype.computeBoundaryCoordinates=function(t){var r=this,n=new B;this._endpointMap=new Je;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getNumPoints()!==0&&(r.addEndpoint(o.getCoordinateN(0)),r.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var s=this._endpointMap.entrySet().iterator();s.hasNext();){var a=s.next(),u=a.getValue(),f=u.count;r._bnRule.isInBoundary(f)&&n.add(a.getKey())}return ct.toCoordinateArray(n)};Tr.prototype.addEndpoint=function(t){var r=this._endpointMap.get(t);r===null&&(r=new Xa,this._endpointMap.put(t,r)),r.count++};Tr.prototype.interfaces_=function(){return[]};Tr.prototype.getClass=function(){return Tr};Tr.getBoundary=function(){if(arguments.length===1){var t=arguments[0],r=new Tr(t);return r.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Tr(n,i);return o.getBoundary()}};var Xa=function(){this.count=null};Xa.prototype.interfaces_=function(){return[]};Xa.prototype.getClass=function(){return Xa};function _x(){}function Ex(){}var xx=function(){};function wx(){}function Ix(){}function Cx(){}var Fr=function(){},gl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};Fr.chars=function(t,r){for(var n=new Array(r).fill(null),i=0;i<r;i++)n[i]=t;return String(n)};Fr.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],r=new wx,n=new _x;return t.printStackTrace(n),r.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s="";new Ex(Fr.getStackTrace(i));for(var a=new Cx,u=0;u<o;u++)try{s+=a.readLine()+Fr.NEWLINE}catch(f){if(f instanceof Ix)ut.shouldNeverReachHere();else throw f}finally{}return s}};Fr.split=function(t,r){for(var n=r.length,i=new B,o=""+t,s=o.indexOf(r);s>=0;){var a=o.substring(0,s);i.add(a),o=o.substring(s+n),s=o.indexOf(r)}o.length>0&&i.add(o);for(var u=new Array(i.size()).fill(null),f=0;f<u.length;f++)u[f]=i.get(f);return u};Fr.toString=function(){if(arguments.length===1){var t=arguments[0];return Fr.SIMPLE_ORDINATE_FORMAT.format(t)}};Fr.spaces=function(t){return Fr.chars(" ",t)};gl.NEWLINE.get=function(){return ke.getProperty("line.separator")};gl.SIMPLE_ORDINATE_FORMAT.get=function(){return new xx};Object.defineProperties(Fr,gl);var _e=function(){};_e.prototype.interfaces_=function(){return[]};_e.prototype.getClass=function(){return _e};_e.copyCoord=function(t,r,n,i){for(var o=Math.min(t.getDimension(),n.getDimension()),s=0;s<o;s++)n.setOrdinate(i,s,t.getOrdinate(r,s))};_e.isRing=function(t){var r=t.size();return r===0?!0:r<=3?!1:t.getOrdinate(0,yt.X)===t.getOrdinate(r-1,yt.X)&&t.getOrdinate(0,yt.Y)===t.getOrdinate(r-1,yt.Y)};_e.isEqual=function(t,r){var n=t.size(),i=r.size();if(n!==i)return!1;for(var o=Math.min(t.getDimension(),r.getDimension()),s=0;s<n;s++)for(var a=0;a<o;a++){var u=t.getOrdinate(s,a),f=r.getOrdinate(s,a);if(t.getOrdinate(s,a)!==r.getOrdinate(s,a)&&!(st.isNaN(u)&&st.isNaN(f)))return!1}return!0};_e.extend=function(t,r,n){var i=t.create(n,r.getDimension()),o=r.size();if(_e.copy(r,0,i,0,o),o>0)for(var s=o;s<n;s++)_e.copy(r,o-1,i,s,1);return i};_e.reverse=function(t){for(var r=t.size()-1,n=Math.trunc(r/2),i=0;i<=n;i++)_e.swap(t,i,r-i)};_e.swap=function(t,r,n){if(r===n)return null;for(var i=0;i<t.getDimension();i++){var o=t.getOrdinate(r,i);t.setOrdinate(r,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,o)}};_e.copy=function(t,r,n,i,o){for(var s=0;s<o;s++)_e.copyCoord(t,r+s,n,i+s)};_e.toString=function(){if(arguments.length===1){var t=arguments[0],r=t.size();if(r===0)return"()";var n=t.getDimension(),i=new Nn;i.append("(");for(var o=0;o<r;o++){o>0&&i.append(" ");for(var s=0;s<n;s++)s>0&&i.append(","),i.append(Fr.toString(t.getOrdinate(o,s)))}return i.append(")"),i.toString()}};_e.ensureValidRing=function(t,r){var n=r.size();if(n===0)return r;if(n<=3)return _e.createClosedRing(t,r,4);var i=r.getOrdinate(0,yt.X)===r.getOrdinate(n-1,yt.X)&&r.getOrdinate(0,yt.Y)===r.getOrdinate(n-1,yt.Y);return i?r:_e.createClosedRing(t,r,n+1)};_e.createClosedRing=function(t,r,n){var i=t.create(n,r.getDimension()),o=r.size();_e.copy(r,0,i,0,o);for(var s=o;s<n;s++)_e.copy(r,0,i,s,1);return i};var ve=function(e){function t(n,i){e.call(this,i),this._points=null,this.init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o;if(this._points.size()!==a._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!i.equal(i._points.getCoordinate(u),a._points.getCoordinate(u),s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var s=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(s)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(s))>0&&_e.reverse(i._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Yt.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return G.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var i=this._points.copy();_e.reverse(i);var o=this.getFactory().createLineString(i);return o},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],s=o,a=0,u=0;a<this._points.size()&&u<s._points.size();){var f=i._points.getCoordinate(a).compareTo(s._points.getCoordinate(u));if(f!==0)return f;a++,u++}return a<this._points.size()?1:u<s._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],h=l;return c.compare(this._points,h._points)}},t.prototype.apply=function(){var i=this;if(tt(arguments[0],Dn))for(var o=arguments[0],s=0;s<this._points.size();s++)o.filter(i._points.getCoordinate(s));else if(tt(arguments[0],jr)){var a=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(a.filter(i._points,u),!a.isDone());u++);a.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],yn)){var f=arguments[0];f.filter(this)}else if(tt(arguments[0],ti)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return new Tr(this).getBoundary()},t.prototype.isEquivalentClass=function(i){return i instanceof t},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._points=this._points.clone(),i},t.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new le("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},t.prototype.isCoordinate=function(i){for(var o=this,s=0;s<this._points.size();s++)if(o._points.getCoordinate(s).equals(i))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},t.prototype.interfaces_=function(){return[Ys]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,r),t}(j),Vs=function(){};Vs.prototype.interfaces_=function(){return[]};Vs.prototype.getClass=function(){return Vs};var wr=function(e){function t(n,i){e.call(this,i),this._coordinates=n||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var i=new W;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._coordinates,u._coordinates)}},t.prototype.apply=function(){if(tt(arguments[0],Dn)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(tt(arguments[0],jr)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],yn)){var s=arguments[0];s.filter(this)}else if(tt(arguments[0],ti)){var a=arguments[0];a.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),ut.isTrue(i.size()<=1),this._coordinates=i},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Vs]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,r),t}(j),pi=function(){};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};var be=function(e){function t(n,i,o){if(e.call(this,o),this._shell=null,this._holes=null,n===null&&(n=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new le("holes must not contain null elements");if(n.isEmpty()&&e.hasNonEmptyElements(i))throw new le("shell is empty but holes are not");this._shell=n,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),s=-1,a=this._shell.getCoordinates(),u=0;u<a.length;u++)s++,o[s]=a[u];for(var f=0;f<this._holes.length;f++)for(var l=i._holes[f].getCoordinates(),c=0;c<l.length;c++)s++,o[s]=l[c];return o},t.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(G.signedArea(this._shell.getCoordinateSequence()));for(var s=0;s<this._holes.length;s++)o-=Math.abs(G.signedArea(i._holes[s].getCoordinateSequence()));return o},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),s=0;s<5;s++){var a=i.getX(s);if(!(a===o.getMinX()||a===o.getMaxX()))return!1;var u=i.getY(s);if(!(u===o.getMinY()||u===o.getMaxY()))return!1}for(var f=i.getX(0),l=i.getY(0),c=1;c<=4;c++){var h=i.getX(c),p=i.getY(c),d=h!==f,m=p!==l;if(d===m)return!1;f=h,l=p}return!0},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o,u=this._shell,f=a._shell;if(!u.equalsExact(f,s)||this._holes.length!==a._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!i._holes[l].equalsExact(a._holes[l],s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);Li.sort(this._holes)}else if(arguments.length===2){var s=arguments[0],a=arguments[1];if(s.isEmpty())return null;var u=new Array(s.getCoordinates().length-1).fill(null);ke.arraycopy(s.getCoordinates(),0,u,0,u.length);var f=ct.minCoordinate(s.getCoordinates());ct.scroll(u,f),ke.arraycopy(u,0,s.getCoordinates(),0,u.length),s.getCoordinates()[u.length]=u[0],G.isCCW(s.getCoordinates())===a&&ct.reverse(s.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var s=0;s<this._holes.length;s++)o+=i._holes[s].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),s=0;s<this._holes.length;s++)o+=i._holes[s].getNumPoints();return o},t.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=i._holes[s].copy().reverse();return o},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],s=this._shell,a=o._shell;return s.compareToSameClass(a)}else if(arguments.length===2){var u=arguments[0],f=arguments[1],l=u,c=this._shell,h=l._shell,p=c.compareToSameClass(h,f);if(p!==0)return p;for(var d=this.getNumInteriorRing(),m=l.getNumInteriorRing(),x=0;x<d&&x<m;){var _=i.getInteriorRingN(x),g=l.getInteriorRingN(x),v=_.compareToSameClass(g,f);if(v!==0)return v;x++}return x<d?1:x<m?-1:0}},t.prototype.apply=function(i){var o=this;if(tt(i,Dn)){this._shell.apply(i);for(var s=0;s<this._holes.length;s++)o._holes[s].apply(i)}else if(tt(i,jr)){if(this._shell.apply(i),!i.isDone())for(var a=0;a<this._holes.length&&(o._holes[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else if(tt(i,yn))i.filter(this);else if(tt(i,ti)){i.filter(this),this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var s=0;s<this._holes.length;s++)o[s+1]=i._holes[s];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=i._holes[s].clone();return o},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var i=this,o=this._shell.copy(),s=new Array(this._holes.length).fill(null),a=0;a<s.length;a++)s[a]=i._holes[a].copy();return new t(o,s,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(i){return this._holes[i]},t.prototype.interfaces_=function(){return[pi]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,r),t}(j),Ho=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return j.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Vs]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,r),t}(sr),Tn=function(e){function t(n,i){n instanceof P&&i instanceof lt&&(n=i.getCoordinateSequenceFactory().create(n)),e.call(this,n,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return j.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var i=this._points.copy();_e.reverse(i);var o=this.getFactory().createLinearRing(i);return o},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new le("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new le("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,r),t}(ve),Rn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return j.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[a]=i._geometries[a].reverse();return this.getFactory().createMultiPolygon(s)},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new B,s=0;s<this._geometries.length;s++)for(var a=i._geometries[s],u=a.getBoundary(),f=0;f<u.getNumGeometries();f++)o.add(u.getGeometryN(f));var l=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(l))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[pi]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,r),t}(sr),qr=function(t){this._factory=t||null,this._isUserDataCopied=!1},mu={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};qr.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};qr.prototype.edit=function(t,r){if(t===null)return null;var n=this.editInternal(t,r);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n};qr.prototype.editInternal=function(t,r){return this._factory===null&&(this._factory=t.getFactory()),t instanceof sr?this.editGeometryCollection(t,r):t instanceof be?this.editPolygon(t,r):t instanceof wr?r.edit(t,this._factory):t instanceof ve?r.edit(t,this._factory):(ut.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};qr.prototype.editGeometryCollection=function(t,r){for(var n=this,i=r.edit(t,this._factory),o=new B,s=0;s<i.getNumGeometries();s++){var a=n.edit(i.getGeometryN(s),r);a===null||a.isEmpty()||o.add(a)}return i.getClass()===Ho?this._factory.createMultiPoint(o.toArray([])):i.getClass()===Ai?this._factory.createMultiLineString(o.toArray([])):i.getClass()===Rn?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};qr.prototype.editPolygon=function(t,r){var n=this,i=r.edit(t,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),r);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var s=new B,a=0;a<i.getNumInteriorRing();a++){var u=n.edit(i.getInteriorRingN(a),r);u===null||u.isEmpty()||s.add(u)}return this._factory.createPolygon(o,s.toArray([]))};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};qr.GeometryEditorOperation=function(){};mu.NoOpGeometryOperation.get=function(){return Hs};mu.CoordinateOperation.get=function(){return Ws};mu.CoordinateSequenceOperation.get=function(){return Js};Object.defineProperties(qr,mu);var Hs=function(){};Hs.prototype.edit=function(t,r){return t};Hs.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]};Hs.prototype.getClass=function(){return Hs};var Ws=function(){};Ws.prototype.edit=function(t,r){var n=this.editCoordinates(t.getCoordinates(),t);return n===null?t:t instanceof Tn?r.createLinearRing(n):t instanceof ve?r.createLineString(n):t instanceof wr?n.length>0?r.createPoint(n[0]):r.createPoint():t};Ws.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]};Ws.prototype.getClass=function(){return Ws};var Js=function(){};Js.prototype.edit=function(t,r){return t instanceof Tn?r.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ve?r.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof wr?r.createPoint(this.edit(t.getCoordinateSequence(),t)):t};Js.prototype.interfaces_=function(){return[qr.GeometryEditorOperation]};Js.prototype.getClass=function(){return Js};var ye=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var r=arguments[0];this._coordinates=new Array(r).fill(null);for(var n=0;n<r;n++)t._coordinates[n]=new P}else if(tt(arguments[0],yt)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=s,this._dimension=a,s===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],f=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=f;for(var l=0;l<u;l++)t._coordinates[l]=new P}}},Rg={serialVersionUID:{configurable:!0}};ye.prototype.setOrdinate=function(t,r,n){switch(r){case yt.X:this._coordinates[t].x=n;break;case yt.Y:this._coordinates[t].y=n;break;case yt.Z:this._coordinates[t].z=n;break;default:throw new le("invalid ordinateIndex")}};ye.prototype.size=function(){return this._coordinates.length};ye.prototype.getOrdinate=function(t,r){switch(r){case yt.X:return this._coordinates[t].x;case yt.Y:return this._coordinates[t].y;case yt.Z:return this._coordinates[t].z}return st.NaN};ye.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var r=arguments[0],n=arguments[1];n.x=this._coordinates[r].x,n.y=this._coordinates[r].y,n.z=this._coordinates[r].z}};ye.prototype.getCoordinateCopy=function(t){return new P(this._coordinates[t])};ye.prototype.getDimension=function(){return this._dimension};ye.prototype.getX=function(t){return this._coordinates[t].x};ye.prototype.clone=function(){for(var t=this,r=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)r[n]=t._coordinates[n].clone();return new ye(r,this._dimension)};ye.prototype.expandEnvelope=function(t){for(var r=this,n=0;n<this._coordinates.length;n++)t.expandToInclude(r._coordinates[n]);return t};ye.prototype.copy=function(){for(var t=this,r=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)r[n]=t._coordinates[n].copy();return new ye(r,this._dimension)};ye.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var r=new Nn(17*this._coordinates.length);r.append("("),r.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)r.append(", "),r.append(t._coordinates[n]);return r.append(")"),r.toString()}else return"()"};ye.prototype.getY=function(t){return this._coordinates[t].y};ye.prototype.toCoordinateArray=function(){return this._coordinates};ye.prototype.interfaces_=function(){return[yt,Ur]};ye.prototype.getClass=function(){return ye};Rg.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(ye,Rg);var Fn=function(){},vl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Fn.prototype.readResolve=function(){return Fn.instance()};Fn.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new ye(t)}else if(tt(arguments[0],yt)){var r=arguments[0];return new ye(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new ye(n):new ye(n,i)}};Fn.prototype.interfaces_=function(){return[qo,Ur]};Fn.prototype.getClass=function(){return Fn};Fn.instance=function(){return Fn.instanceObject};vl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};vl.instanceObject.get=function(){return new Fn};Object.defineProperties(Fn,vl);var Ag=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,i){return this.map_.set(n,i),i},t.prototype.values=function(){for(var n=new B,i=this.map_.values(),o=i.next();!o.done;)n.add(o.value),o=i.next();return n},t.prototype.entrySet=function(){var n=new pl;return this.map_.entries().forEach(function(i){return n.add(i)}),n},t.prototype.size=function(){return this.map_.size()},t}(yo),Ht=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof mn){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var r=arguments[0];this._modelType=e.FIXED,this.setScale(r)}else if(arguments[0]instanceof e){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},dl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ht.prototype.equals=function(t){if(!(t instanceof Ht))return!1;var r=t;return this._modelType===r._modelType&&this._scale===r._scale};Ht.prototype.compareTo=function(t){var r=t,n=this.getMaximumSignificantDigits(),i=r.getMaximumSignificantDigits();return new vn(n).compareTo(new vn(i))};Ht.prototype.getScale=function(){return this._scale};Ht.prototype.isFloating=function(){return this._modelType===Ht.FLOATING||this._modelType===Ht.FLOATING_SINGLE};Ht.prototype.getType=function(){return this._modelType};Ht.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Ht.FLOATING?t="Floating":this._modelType===Ht.FLOATING_SINGLE?t="Floating-Single":this._modelType===Ht.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};Ht.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(st.isNaN(t))return t;if(this._modelType===Ht.FLOATING_SINGLE){var r=t;return r}return this._modelType===Ht.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof P){var n=arguments[0];if(this._modelType===Ht.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Ht.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Ht.FLOATING?t=16:this._modelType===Ht.FLOATING_SINGLE?t=6:this._modelType===Ht.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};Ht.prototype.setScale=function(t){this._scale=Math.abs(t)};Ht.prototype.interfaces_=function(){return[Ur,Xr]};Ht.prototype.getClass=function(){return Ht};Ht.mostPrecise=function(t,r){return t.compareTo(r)>=0?t:r};dl.serialVersionUID.get=function(){return 7777263578777804e3};dl.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Ht,dl);var mn=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},yl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};mn.prototype.readResolve=function(){return mn.nameToTypeMap.get(this._name)};mn.prototype.toString=function(){return this._name};mn.prototype.interfaces_=function(){return[Ur]};mn.prototype.getClass=function(){return mn};yl.serialVersionUID.get=function(){return-552860263173159e4};yl.nameToTypeMap.get=function(){return new Ag};Object.defineProperties(mn,yl);Ht.Type=mn;Ht.FIXED=new mn("FIXED");Ht.FLOATING=new mn("FLOATING");Ht.FLOATING_SINGLE=new mn("FLOATING SINGLE");var lt=function e(){this._precisionModel=new Ht,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?tt(arguments[0],qo)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ht&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Dg={serialVersionUID:{configurable:!0}};lt.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new P(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new P(t.getMinX(),t.getMinY()),new P(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new P(t.getMinX(),t.getMinY()),new P(t.getMinX(),t.getMaxY()),new P(t.getMaxX(),t.getMaxY()),new P(t.getMaxX(),t.getMinY()),new P(t.getMinX(),t.getMinY())]),null)};lt.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new ve(this.getCoordinateSequenceFactory().create(t),this);if(tt(t,yt))return new ve(t,this)}else return new ve(this.getCoordinateSequenceFactory().create([]),this)};lt.prototype.createMultiLineString=function(){if(arguments.length===0)return new Ai(null,this);if(arguments.length===1){var t=arguments[0];return new Ai(t,this)}};lt.prototype.buildGeometry=function(t){for(var r=null,n=!1,i=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getClass();r===null&&(r=a),a!==r&&(n=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(r===null)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(lt.toGeometryArray(t));var u=t.iterator().next(),f=t.size()>1;if(f){if(u instanceof be)return this.createMultiPolygon(lt.toPolygonArray(t));if(u instanceof ve)return this.createMultiLineString(lt.toLineStringArray(t));if(u instanceof wr)return this.createMultiPoint(lt.toPointArray(t));ut.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u};lt.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};lt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(tt(arguments[0],yt)){var r=arguments[0];return new wr(r,this)}}};lt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};lt.prototype.createPolygon=function(){if(arguments.length===0)return new be(null,null,this);if(arguments.length===1){if(tt(arguments[0],yt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createPolygon(this.createLinearRing(r))}else if(arguments[0]instanceof Tn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new be(i,o,this)}};lt.prototype.getSRID=function(){return this._SRID};lt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new sr(null,this);if(arguments.length===1){var t=arguments[0];return new sr(t,this)}};lt.prototype.createGeometry=function(t){var r=new qr(this);return r.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};lt.prototype.getPrecisionModel=function(){return this._precisionModel};lt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(tt(arguments[0],yt)){var r=arguments[0];return new Tn(r,this)}}};lt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Rn(null,this);if(arguments.length===1){var t=arguments[0];return new Rn(t,this)}};lt.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new Ho(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];return new Ho(r,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(tt(arguments[0],yt)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),s=0;s<i.size();s++){var a=t.getCoordinateSequenceFactory().create(1,i.getDimension());_e.copy(i,s,a,0,1),o[s]=t.createPoint(a)}return this.createMultiPoint(o)}}};lt.prototype.interfaces_=function(){return[Ur]};lt.prototype.getClass=function(){return lt};lt.toMultiPolygonArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toGeometryArray=function(t){if(t===null)return null;var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.getDefaultCoordinateSequenceFactory=function(){return Fn.instance()};lt.toMultiLineStringArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toLineStringArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toMultiPointArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toLinearRingArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toPointArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toPolygonArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.createPointFromInternalCoord=function(t,r){return r.getPrecisionModel().makePrecise(t),r.getFactory().createPoint(t)};Dg.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(lt,Dg);var Sx=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_u=function(t){this.geometryFactory=t||new lt};_u.prototype.read=function(t){var r;typeof t=="string"?r=JSON.parse(t):r=t;var n=r.type;if(!ln[n])throw new Error("Unknown GeoJSON type: "+r.type);return Sx.indexOf(n)!==-1?ln[n].apply(this,[r.coordinates]):n==="GeometryCollection"?ln[n].apply(this,[r.geometries]):ln[n].apply(this,[r])};_u.prototype.write=function(t){var r=t.getGeometryType();if(!Jn[r])throw new Error("Geometry is not supported");return Jn[r].apply(this,[t])};var ln={Feature:function(e){var t={};for(var r in e)t[r]=e[r];if(e.geometry){var n=e.geometry.type;if(!ln[n])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=ln.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,r={};if(e.features){r.features=[];for(var n=0;n<e.features.length;++n)r.features.push(t.read(e.features[n]))}return e.bbox&&(r.bbox=this.parse.bbox.apply(this,[e.bbox])),r},coordinates:function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];t.push(new P(n[0],n[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new P(e[0],e[1]),new P(e[2],e[1]),new P(e[2],e[3]),new P(e[0],e[3]),new P(e[0],e[1])])},Point:function(e){var t=new P(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,r=[],n=0;n<e.length;++n)r.push(ln.Point.apply(t,[e[n]]));return this.geometryFactory.createMultiPoint(r)},LineString:function(e){var t=ln.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,r=[],n=0;n<e.length;++n)r.push(ln.LineString.apply(t,[e[n]]));return this.geometryFactory.createMultiLineString(r)},Polygon:function(e){for(var t=this,r=ln.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(r),i=[],o=1;o<e.length;++o){var s=e[o],a=ln.coordinates.apply(t,[s]),u=t.geometryFactory.createLinearRing(a);i.push(u)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(e){for(var t=this,r=[],n=0;n<e.length;++n){var i=e[n];r.push(ln.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(r)},GeometryCollection:function(e){for(var t=this,r=[],n=0;n<e.length;++n){var i=e[n];r.push(t.read(i))}return this.geometryFactory.createGeometryCollection(r)}},Jn={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Jn.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Jn.Point.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiPoint",coordinates:r}},LineString:function(e){for(var t=this,r=[],n=e.getCoordinates(),i=0;i<n.length;++i){var o=n[i];r.push(Jn.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:r}},MultiLineString:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Jn.LineString.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiLineString",coordinates:r}},Polygon:function(e){var t=this,r=[],n=Jn.LineString.apply(this,[e._shell]);r.push(n.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],s=Jn.LineString.apply(t,[o]);r.push(s.coordinates)}return{type:"Polygon",coordinates:r}},MultiPolygon:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Jn.Polygon.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiPolygon",coordinates:r}},GeometryCollection:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=i.getGeometryType();r.push(Jn[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:r}}},ml=function(t){this.geometryFactory=t||new lt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _u(this.geometryFactory)};ml.prototype.read=function(t){var r=this.parser.read(t);return this.precisionModel.getType()===Ht.FIXED&&this.reducePrecision(r),r};ml.prototype.reducePrecision=function(t){var r=this,n,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(n=0,i=t.points.length;n<i;n++)r.precisionModel.makePrecise(t.points[n]);else if(t.geometries)for(n=0,i=t.geometries.length;n<i;n++)r.reducePrecision(t.geometries[n])};var Tg=function(){this.parser=new _u(this.geometryFactory)};Tg.prototype.write=function(t){return this.parser.write(t)};var T=function(){},Eu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};T.prototype.interfaces_=function(){return[]};T.prototype.getClass=function(){return T};T.opposite=function(t){return t===T.LEFT?T.RIGHT:t===T.RIGHT?T.LEFT:t};Eu.ON.get=function(){return 0};Eu.LEFT.get=function(){return 1};Eu.RIGHT.get=function(){return 2};Object.defineProperties(T,Eu);function xu(e){this.message=e||""}xu.prototype=new Error;xu.prototype.name="EmptyStackException";function Pn(){this.array_=[]}Pn.prototype=new Kr;Pn.prototype.add=function(e){return this.array_.push(e),!0};Pn.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};Pn.prototype.push=function(e){return this.array_.push(e),e};Pn.prototype.pop=function(e){if(this.array_.length===0)throw new xu;return this.array_.pop()};Pn.prototype.peek=function(){if(this.array_.length===0)throw new xu;return this.array_[this.array_.length-1]};Pn.prototype.empty=function(){return this.array_.length===0};Pn.prototype.isEmpty=function(){return this.empty()};Pn.prototype.search=function(e){return this.array_.indexOf(e)};Pn.prototype.size=function(){return this.array_.length};Pn.prototype.toArray=function(){for(var e=this,t=[],r=0,n=this.array_.length;r<n;r++)t.push(e.array_[r]);return t};var _n=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};_n.prototype.getCoordinate=function(){return this._minCoord};_n.prototype.getRightmostSide=function(t,r){var n=this.getRightmostSideOfSegment(t,r);return n<0&&(n=this.getRightmostSideOfSegment(t,r-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n};_n.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();ut.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var r=t[this._minIndex-1],n=t[this._minIndex+1],i=G.computeOrientation(this._minCoord,n,r),o=!1;(r.y<this._minCoord.y&&n.y<this._minCoord.y&&i===G.COUNTERCLOCKWISE||r.y>this._minCoord.y&&n.y>this._minCoord.y&&i===G.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};_n.prototype.getRightmostSideOfSegment=function(t,r){var n=t.getEdge(),i=n.getCoordinates();if(r<0||r+1>=i.length||i[r].y===i[r+1].y)return-1;var o=T.LEFT;return i[r].y<i[r+1].y&&(o=T.RIGHT),o};_n.prototype.getEdge=function(){return this._orientedDe};_n.prototype.checkForRightmostCoordinate=function(t){for(var r=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(r._minCoord===null||n[i].x>r._minCoord.x)&&(r._minDe=t,r._minIndex=i,r._minCoord=n[i])};_n.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),r=t.getEdges();this._minDe=r.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};_n.prototype.findEdge=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next();i.isForward()&&r.checkForRightmostCoordinate(i)}ut.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===T.LEFT&&(this._orientedDe=this._minDe.getSym())};_n.prototype.interfaces_=function(){return[]};_n.prototype.getClass=function(){return _n};var ei=function(e){function t(r,n){e.call(this,t.msgWithCoord(r,n)),this.pt=n?new P(n):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,i){return i?n:n+" [ "+i+" ]"},t}(jn),wu=function(){this.array_=[]};wu.prototype.addLast=function(t){this.array_.push(t)};wu.prototype.removeFirst=function(){return this.array_.shift()};wu.prototype.isEmpty=function(){return this.array_.length===0};var ar=function(){this._finder=null,this._dirEdgeList=new B,this._nodes=new B,this._rightMostCoord=null,this._env=null,this._finder=new _n};ar.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var r=t.next();r.setVisited(!1)}};ar.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};ar.prototype.computeNodeDepth=function(t){for(var r=this,n=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){n=o;break}}if(n===null)throw new ei("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(n);for(var s=t.getEdges().iterator();s.hasNext();){var a=s.next();a.setVisited(!0),r.copySymDepths(a)}};ar.prototype.computeDepth=function(t){this.clearVisitedEdges();var r=this._finder.getEdge();r.setEdgeDepths(T.RIGHT,t),this.copySymDepths(r),this.computeDepths(r)};ar.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};ar.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var r=t.next();r.getDepth(T.RIGHT)>=1&&r.getDepth(T.LEFT)<=0&&!r.isInteriorAreaEdge()&&r.setInResult(!0)}};ar.prototype.computeDepths=function(t){var r=this,n=new pl,i=new wu,o=t.getNode();for(i.addLast(o),n.add(o),t.setVisited(!0);!i.isEmpty();){var s=i.removeFirst();n.add(s),r.computeNodeDepth(s);for(var a=s.getEdges().iterator();a.hasNext();){var u=a.next(),f=u.getSym();if(!f.isVisited()){var l=f.getNode();n.contains(l)||(i.addLast(l),n.add(l))}}}};ar.prototype.compareTo=function(t){var r=t;return this._rightMostCoord.x<r._rightMostCoord.x?-1:this._rightMostCoord.x>r._rightMostCoord.x?1:0};ar.prototype.getEnvelope=function(){if(this._env===null){for(var t=new W,r=this._dirEdgeList.iterator();r.hasNext();)for(var n=r.next(),i=n.getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env};ar.prototype.addReachable=function(t){var r=this,n=new Pn;for(n.add(t);!n.empty();){var i=n.pop();r.add(i,n)}};ar.prototype.copySymDepths=function(t){var r=t.getSym();r.setDepth(T.LEFT,t.getDepth(T.RIGHT)),r.setDepth(T.RIGHT,t.getDepth(T.LEFT))};ar.prototype.add=function(t,r){var n=this;t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();n._dirEdgeList.add(o);var s=o.getSym(),a=s.getNode();a.isVisited()||r.push(a)}};ar.prototype.getNodes=function(){return this._nodes};ar.prototype.getDirectedEdges=function(){return this._dirEdgeList};ar.prototype.interfaces_=function(){return[Xr]};ar.prototype.getClass=function(){return ar};var oe=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[T.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[T.ON]=s,this.location[T.LEFT]=a,this.location[T.RIGHT]=u}};oe.prototype.setAllLocations=function(t){for(var r=this,n=0;n<this.location.length;n++)r.location[n]=t};oe.prototype.isNull=function(){for(var t=this,r=0;r<this.location.length;r++)if(t.location[r]!==L.NONE)return!1;return!0};oe.prototype.setAllLocationsIfNull=function(t){for(var r=this,n=0;n<this.location.length;n++)r.location[n]===L.NONE&&(r.location[n]=t)};oe.prototype.isLine=function(){return this.location.length===1};oe.prototype.merge=function(t){var r=this;if(t.location.length>this.location.length){var n=new Array(3).fill(null);n[T.ON]=this.location[T.ON],n[T.LEFT]=L.NONE,n[T.RIGHT]=L.NONE,this.location=n}for(var i=0;i<this.location.length;i++)r.location[i]===L.NONE&&i<t.location.length&&(r.location[i]=t.location[i])};oe.prototype.getLocations=function(){return this.location};oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[T.LEFT];this.location[T.LEFT]=this.location[T.RIGHT],this.location[T.RIGHT]=t};oe.prototype.toString=function(){var t=new Nn;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[T.LEFT])),t.append(L.toLocationSymbol(this.location[T.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[T.RIGHT])),t.toString()};oe.prototype.setLocations=function(t,r,n){this.location[T.ON]=t,this.location[T.LEFT]=r,this.location[T.RIGHT]=n};oe.prototype.get=function(t){return t<this.location.length?this.location[t]:L.NONE};oe.prototype.isArea=function(){return this.location.length>1};oe.prototype.isAnyNull=function(){for(var t=this,r=0;r<this.location.length;r++)if(t.location[r]===L.NONE)return!0;return!1};oe.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(T.ON,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.location[r]=n}};oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)};oe.prototype.isEqualOnSide=function(t,r){return this.location[r]===t.location[r]};oe.prototype.allPositionsEqual=function(t){for(var r=this,n=0;n<this.location.length;n++)if(r.location[n]!==t)return!1;return!0};oe.prototype.interfaces_=function(){return[]};oe.prototype.getClass=function(){return oe};var Kt=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new oe(t),this.elt[1]=new oe(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.elt[0]=new oe(r.elt[0]),this.elt[1]=new oe(r.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new oe(L.NONE),this.elt[1]=new oe(L.NONE),this.elt[n].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new oe(o,s,a),this.elt[1]=new oe(o,s,a)}else if(arguments.length===4){var u=arguments[0],f=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new oe(L.NONE,L.NONE,L.NONE),this.elt[1]=new oe(L.NONE,L.NONE,L.NONE),this.elt[u].setLocations(f,l,c)}};Kt.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};Kt.prototype.setAllLocations=function(t,r){this.elt[t].setAllLocations(r)};Kt.prototype.isNull=function(t){return this.elt[t].isNull()};Kt.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.elt[r].setAllLocationsIfNull(n)}};Kt.prototype.isLine=function(t){return this.elt[t].isLine()};Kt.prototype.merge=function(t){for(var r=this,n=0;n<2;n++)r.elt[n]===null&&t.elt[n]!==null?r.elt[n]=new oe(t.elt[n]):r.elt[n].merge(t.elt[n])};Kt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Kt.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(T.ON)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return this.elt[r].get(n)}};Kt.prototype.toString=function(){var t=new Nn;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};Kt.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};Kt.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};Kt.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];this.elt[t].setLocation(T.ON,r)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this.elt[n].setLocation(i,o)}};Kt.prototype.isEqualOnSide=function(t,r){return this.elt[0].isEqualOnSide(t.elt[0],r)&&this.elt[1].isEqualOnSide(t.elt[1],r)};Kt.prototype.allPositionsEqual=function(t,r){return this.elt[t].allPositionsEqual(r)};Kt.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new oe(this.elt[t].location[0]))};Kt.prototype.interfaces_=function(){return[]};Kt.prototype.getClass=function(){return Kt};Kt.toLineLabel=function(t){for(var r=new Kt(L.NONE),n=0;n<2;n++)r.setLocation(n,t.getLocation(n));return r};var Ie=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new B,this._pts=new B,this._label=new Kt(L.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new B,this._geometryFactory=null;var t=arguments[0],r=arguments[1];this._geometryFactory=r,this.computePoints(t),this.computeRing()};Ie.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var r=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)r[n]=t._pts.get(n);this._ring=this._geometryFactory.createLinearRing(r),this._isHole=G.isCCW(this._ring.getCoordinates())};Ie.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Ie.prototype.computePoints=function(t){var r=this;this._startDe=t;var n=t,i=!0;do{if(n===null)throw new ei("Found null DirectedEdge");if(n.getEdgeRing()===r)throw new ei("Directed Edge visited twice during ring-building at "+n.getCoordinate());r._edges.add(n);var o=n.getLabel();ut.isTrue(o.isArea()),r.mergeLabel(o),r.addPoints(n.getEdge(),n.isForward(),i),i=!1,r.setEdgeRing(n,r),n=r.getNext(n)}while(n!==this._startDe)};Ie.prototype.getLinearRing=function(){return this._ring};Ie.prototype.getCoordinate=function(t){return this._pts.get(t)};Ie.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var r=this._startDe;do{var n=r.getNode(),i=n.getEdges().getOutgoingDegree(t);i>t._maxNodeDegree&&(t._maxNodeDegree=i),r=t.getNext(r)}while(r!==this._startDe);this._maxNodeDegree*=2};Ie.prototype.addPoints=function(t,r,n){var i=this,o=t.getCoordinates();if(r){var s=1;n&&(s=0);for(var a=s;a<o.length;a++)i._pts.add(o[a])}else{var u=o.length-2;n&&(u=o.length-1);for(var f=u;f>=0;f--)i._pts.add(o[f])}};Ie.prototype.isHole=function(){return this._isHole};Ie.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};Ie.prototype.containsPoint=function(t){var r=this.getLinearRing(),n=r.getEnvelopeInternal();if(!n.contains(t)||!G.isPointInRing(t,r.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(t))return!1}return!0};Ie.prototype.addHole=function(t){this._holes.add(t)};Ie.prototype.isShell=function(){return this._shell===null};Ie.prototype.getLabel=function(){return this._label};Ie.prototype.getEdges=function(){return this._edges};Ie.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Ie.prototype.getShell=function(){return this._shell};Ie.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=r.getLocation(n,T.RIGHT);if(i===L.NONE)return null;if(this._label.getLocation(n)===L.NONE)return this._label.setLocation(n,i),null}};Ie.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};Ie.prototype.toPolygon=function(t){for(var r=this,n=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)n[i]=r._holes.get(i).getLinearRing();var o=t.createPolygon(this.getLinearRing(),n);return o};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};var Nx=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,i){n.setMinEdgeRing(i)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ie),Px=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,i=new B,o=this._startDe;do{if(o.getMinEdgeRing()===null){var s=new Nx(o,n._geometryFactory);i.add(s)}o=o.getNext()}while(o!==this._startDe);return i},t.prototype.setEdgeRing=function(n,i){n.setEdgeRing(i)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(n),i=i.getNext()}while(i!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ie),Or=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};Or.prototype.setVisited=function(t){this._isVisited=t};Or.prototype.setInResult=function(t){this._isInResult=t};Or.prototype.isCovered=function(){return this._isCovered};Or.prototype.isCoveredSet=function(){return this._isCoveredSet};Or.prototype.setLabel=function(t){this._label=t};Or.prototype.getLabel=function(){return this._label};Or.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};Or.prototype.updateIM=function(t){ut.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};Or.prototype.isInResult=function(){return this._isInResult};Or.prototype.isVisited=function(){return this._isVisited};Or.prototype.interfaces_=function(){return[]};Or.prototype.getClass=function(){return Or};var Iu=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var r=arguments[0],n=arguments[1];this._coord=r,this._edges=n,this._label=new Kt(0,L.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,i){var o=L.NONE;if(o=this._label.getLocation(i),!n.isNull(i)){var s=n.getLocation(i);o!==L.BOUNDARY&&(o=s)}return o},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];this._label===null?this._label=new Kt(n,i):this._label.setLocation(n,i)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Kt)for(var o=arguments[0],s=0;s<2;s++){var a=n.computeMergedLocation(o,s),u=n._label.getLocation(s);u===L.NONE&&n._label.setLocation(s,a)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var i=L.NONE;this._label!==null&&(i=this._label.getLocation(n));var o=null;switch(i){case L.BOUNDARY:o=L.INTERIOR;break;case L.INTERIOR:o=L.BOUNDARY;break;default:o=L.BOUNDARY;break}this._label.setLocation(n,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Or),En=function(){this.nodeMap=new Je,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};En.prototype.find=function(t){return this.nodeMap.get(t)};En.prototype.addNode=function(){if(arguments[0]instanceof P){var t=arguments[0],r=this.nodeMap.get(t);return r===null&&(r=this.nodeFact.createNode(t),this.nodeMap.put(t,r)),r}else if(arguments[0]instanceof Iu){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return i===null?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}};En.prototype.print=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};En.prototype.iterator=function(){return this.nodeMap.values().iterator()};En.prototype.values=function(){return this.nodeMap.values()};En.prototype.getBoundaryNodes=function(t){for(var r=new B,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&r.add(i)}return r};En.prototype.add=function(t){var r=t.getCoordinate(),n=this.addNode(r);n.add(t)};En.prototype.interfaces_=function(){return[]};En.prototype.getClass=function(){return En};var Zt=function(){},la={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Zt.prototype.interfaces_=function(){return[]};Zt.prototype.getClass=function(){return Zt};Zt.isNorthern=function(t){return t===Zt.NE||t===Zt.NW};Zt.isOpposite=function(t,r){if(t===r)return!1;var n=(t-r+4)%4;return n===2};Zt.commonHalfPlane=function(t,r){if(t===r)return t;var n=(t-r+4)%4;if(n===2)return-1;var i=t<r?t:r,o=t>r?t:r;return i===0&&o===3?3:i};Zt.isInHalfPlane=function(t,r){return r===Zt.SE?t===Zt.SE||t===Zt.SW:t===r||t===r+1};Zt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];if(t===0&&r===0)throw new le("Cannot compute the quadrant for point ( "+t+", "+r+" )");return t>=0?r>=0?Zt.NE:Zt.SE:r>=0?Zt.NW:Zt.SW}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new le("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Zt.NE:Zt.SE:i.y>=n.y?Zt.NW:Zt.SW}};la.NE.get=function(){return 0};la.NW.get=function(){return 1};la.SW.get=function(){return 2};la.SE.get=function(){return 3};Object.defineProperties(Zt,la);var Ke=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2],o=null;this._edge=r,this.init(n,i),this._label=o}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],f=arguments[3];this._edge=s,this.init(a,u),this._label=f}};Ke.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:G.computeOrientation(t._p0,t._p1,this._p1)};Ke.prototype.getDy=function(){return this._dy};Ke.prototype.getCoordinate=function(){return this._p0};Ke.prototype.setNode=function(t){this._node=t};Ke.prototype.print=function(t){var r=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),o=n.substring(i+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+r+"   "+this._label)};Ke.prototype.compareTo=function(t){var r=t;return this.compareDirection(r)};Ke.prototype.getDirectedCoordinate=function(){return this._p1};Ke.prototype.getDx=function(){return this._dx};Ke.prototype.getLabel=function(){return this._label};Ke.prototype.getEdge=function(){return this._edge};Ke.prototype.getQuadrant=function(){return this._quadrant};Ke.prototype.getNode=function(){return this._node};Ke.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};Ke.prototype.computeLabel=function(t){};Ke.prototype.init=function(t,r){this._p0=t,this._p1=r,this._dx=r.x-t.x,this._dy=r.y-t.y,this._quadrant=Zt.quadrant(this._dx,this._dy),ut.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Ke.prototype.interfaces_=function(){return[Xr]};Ke.prototype.getClass=function(){return Ke};var Sf=function(e){function t(){var r=arguments[0],n=arguments[1];if(e.call(this,r),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(r.getCoordinate(0),r.getCoordinate(1));else{var i=r.getNumPoints()-1;this.init(r.getCoordinate(i),r.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new Kt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,i){if(this._depth[n]!==-999&&this._depth[n]!==i)throw new ei("assigned depths do not match",this.getCoordinate());this._depth[n]=i},t.prototype.isInteriorAreaEdge=function(){for(var n=this,i=!0,o=0;o<2;o++)n._label.isArea(o)&&n._label.getLocation(o,T.LEFT)===L.INTERIOR&&n._label.getLocation(o,T.RIGHT)===L.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[T.LEFT]+"/"+this._depth[T.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,L.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,L.EXTERIOR);return n&&i&&o},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var s=1;n===T.LEFT&&(s=-1);var a=T.opposite(n),u=o*s,f=i+u;this.setDepth(n,i),this.setDepth(a,f)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,i){return n===L.EXTERIOR&&i===L.INTERIOR?1:n===L.INTERIOR&&i===L.EXTERIOR?-1:0},t}(Ke),Wo=function(){};Wo.prototype.createNode=function(t){return new Iu(t,null)};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var pe=function(){if(this._edges=new B,this._nodes=null,this._edgeEndList=new B,arguments.length===0)this._nodes=new En(new Wo);else if(arguments.length===1){var t=arguments[0];this._nodes=new En(t)}};pe.prototype.printEdges=function(t){var r=this;t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var i=r._edges.get(n);i.print(t),i.eiList.print(t)}};pe.prototype.find=function(t){return this._nodes.find(t)};pe.prototype.addNode=function(){if(arguments[0]instanceof Iu){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof P){var r=arguments[0];return this._nodes.addNode(r)}};pe.prototype.getNodeIterator=function(){return this._nodes.iterator()};pe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var r=t.next();r.getEdges().linkResultDirectedEdges()}};pe.prototype.debugPrintln=function(t){ke.out.println(t)};pe.prototype.isBoundaryNode=function(t,r){var n=this._nodes.find(r);if(n===null)return!1;var i=n.getLabel();return i!==null&&i.getLocation(t)===L.BOUNDARY};pe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var r=t.next();r.getEdges().linkAllDirectedEdges()}};pe.prototype.matchInSameDirection=function(t,r,n,i){return t.equals(n)?G.computeOrientation(t,r,i)===G.COLLINEAR&&Zt.quadrant(t,r)===Zt.quadrant(n,i):!1};pe.prototype.getEdgeEnds=function(){return this._edgeEndList};pe.prototype.debugPrint=function(t){ke.out.print(t)};pe.prototype.getEdgeIterator=function(){return this._edges.iterator()};pe.prototype.findEdgeInSameDirection=function(t,r){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),s=o.getCoordinates();if(n.matchInSameDirection(t,r,s[0],s[1])||n.matchInSameDirection(t,r,s[s.length-1],s[s.length-2]))return o}return null};pe.prototype.insertEdge=function(t){this._edges.add(t)};pe.prototype.findEdgeEnd=function(t){for(var r=this.getEdgeEnds().iterator();r.hasNext();){var n=r.next();if(n.getEdge()===t)return n}return null};pe.prototype.addEdges=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next();r._edges.add(i);var o=new Sf(i,!0),s=new Sf(i,!1);o.setSym(s),s.setSym(o),r.add(o),r.add(s)}};pe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};pe.prototype.getNodes=function(){return this._nodes.values()};pe.prototype.findEdge=function(t,r){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),s=o.getCoordinates();if(t.equals(s[0])&&r.equals(s[1]))return o}return null};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};pe.linkResultDirectedEdges=function(t){for(var r=t.iterator();r.hasNext();){var n=r.next();n.getEdges().linkResultDirectedEdges()}};var Ir=function(){this._geometryFactory=null,this._shellList=new B;var t=arguments[0];this._geometryFactory=t};Ir.prototype.sortShellsAndHoles=function(t,r,n){for(var i=t.iterator();i.hasNext();){var o=i.next();o.isHole()?n.add(o):r.add(o)}};Ir.prototype.computePolygons=function(t){for(var r=this,n=new B,i=t.iterator();i.hasNext();){var o=i.next(),s=o.toPolygon(r._geometryFactory);n.add(s)}return n};Ir.prototype.placeFreeHoles=function(t,r){for(var n=this,i=r.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var s=n.findEdgeRingContaining(o,t);if(s===null)throw new ei("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(s)}}};Ir.prototype.buildMinimalEdgeRings=function(t,r,n){for(var i=this,o=new B,s=t.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var u=a.buildMinimalRings(),f=i.findShell(u);f!==null?(i.placePolygonHoles(f,u),r.add(f)):n.addAll(u)}else o.add(a)}return o};Ir.prototype.containsPoint=function(t){for(var r=this._shellList.iterator();r.hasNext();){var n=r.next();if(n.containsPoint(t))return!0}return!1};Ir.prototype.buildMaximalEdgeRings=function(t){for(var r=this,n=new B,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var s=new Px(o,r._geometryFactory);n.add(s),s.setInResult()}}return n};Ir.prototype.placePolygonHoles=function(t,r){for(var n=r.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}};Ir.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};Ir.prototype.findEdgeRingContaining=function(t,r){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),s=null,a=null,u=r.iterator();u.hasNext();){var f=u.next(),l=f.getLinearRing(),c=l.getEnvelopeInternal();s!==null&&(a=s.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&G.isPointInRing(o,l.getCoordinates())&&(h=!0),h&&(s===null||a.contains(c))&&(s=f)}return s};Ir.prototype.findShell=function(t){for(var r=0,n=null,i=t.iterator();i.hasNext();){var o=i.next();o.isHole()||(n=o,r++)}return ut.isTrue(r<=1,"found two shells in MinimalEdgeRing list"),n};Ir.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var r=arguments[0],n=arguments[1];pe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(r),o=new B,s=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(s,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};var Jo=function(){};Jo.prototype.getBounds=function(){};Jo.prototype.interfaces_=function(){return[]};Jo.prototype.getClass=function(){return Jo};var tn=function(){this._bounds=null,this._item=null;var t=arguments[0],r=arguments[1];this._bounds=t,this._item=r};tn.prototype.getItem=function(){return this._item};tn.prototype.getBounds=function(){return this._bounds};tn.prototype.interfaces_=function(){return[Jo,Ur]};tn.prototype.getClass=function(){return tn};var ri=function(){this._size=null,this._items=null,this._size=0,this._items=new B,this._items.add(null)};ri.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};ri.prototype.size=function(){return this._size};ri.prototype.reorder=function(t){for(var r=this,n=null,i=this._items.get(t);t*2<=this._size&&(n=t*2,n!==r._size&&r._items.get(n+1).compareTo(r._items.get(n))<0&&n++,r._items.get(n).compareTo(i)<0);t=n)r._items.set(t,r._items.get(n));this._items.set(t,i)};ri.prototype.clear=function(){this._size=0,this._items.clear()};ri.prototype.isEmpty=function(){return this._size===0};ri.prototype.add=function(t){var r=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)r._items.set(n,r._items.get(Math.trunc(n/2)));this._items.set(n,t)};ri.prototype.interfaces_=function(){return[]};ri.prototype.getClass=function(){return ri};var gi=function(){};gi.prototype.visitItem=function(t){};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};var eo=function(){};eo.prototype.insert=function(t,r){};eo.prototype.remove=function(t,r){};eo.prototype.query=function(){};eo.prototype.interfaces_=function(){return[]};eo.prototype.getClass=function(){return eo};var Me=function(){if(this._childBoundables=new B,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},Fg={serialVersionUID:{configurable:!0}};Me.prototype.getLevel=function(){return this._level};Me.prototype.size=function(){return this._childBoundables.size()};Me.prototype.getChildBoundables=function(){return this._childBoundables};Me.prototype.addChildBoundable=function(t){ut.isTrue(this._bounds===null),this._childBoundables.add(t)};Me.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Me.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Me.prototype.interfaces_=function(){return[Jo,Ur]};Me.prototype.getClass=function(){return Me};Fg.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Me,Fg);var en=function(){};en.reverseOrder=function(){return{compare:function(r,n){return n.compareTo(r)}}};en.min=function(t){return en.sort(t),t.get(0)};en.sort=function(t,r){var n=t.toArray();r?Li.sort(n,r):Li.sort(n);for(var i=t.iterator(),o=0,s=n.length;o<s;o++)i.next(),i.set(n[o])};en.singletonList=function(t){var r=new B;return r.add(t),r};var xe=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],r=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=r,this._itemDistance=n,this._distance=this.distance()};xe.prototype.expandToQueue=function(t,r){var n=xe.isComposite(this._boundable1),i=xe.isComposite(this._boundable2);if(n&&i)return xe.area(this._boundable1)>xe.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,r),null):(this.expand(this._boundable2,this._boundable1,t,r),null);if(n)return this.expand(this._boundable1,this._boundable2,t,r),null;if(i)return this.expand(this._boundable2,this._boundable1,t,r),null;throw new le("neither boundable is composite")};xe.prototype.isLeaves=function(){return!(xe.isComposite(this._boundable1)||xe.isComposite(this._boundable2))};xe.prototype.compareTo=function(t){var r=t;return this._distance<r._distance?-1:this._distance>r._distance?1:0};xe.prototype.expand=function(t,r,n,i){for(var o=this,s=t.getChildBoundables(),a=s.iterator();a.hasNext();){var u=a.next(),f=new xe(u,r,o._itemDistance);f.getDistance()<i&&n.add(f)}};xe.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};xe.prototype.getDistance=function(){return this._distance};xe.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};xe.prototype.interfaces_=function(){return[Xr]};xe.prototype.getClass=function(){return xe};xe.area=function(t){return t.getBounds().getArea()};xe.isComposite=function(t){return t instanceof Me};var Ae=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new B,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var r=arguments[0];ut.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},Cu={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ae.prototype.getNodeCapacity=function(){return this._nodeCapacity};Ae.prototype.lastNode=function(t){return t.get(t.size()-1)};Ae.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var r=arguments[0],n=0,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Me?n+=t.size(o):o instanceof tn&&(n+=1)}return n}};Ae.prototype.removeItem=function(t,r){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof tn&&o.getItem()===r&&(n=o)}return n!==null?(t.getChildBoundables().remove(n),!0):!1};Ae.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var r=this.itemsTree(this._root);return r===null?new B:r}else if(arguments.length===1){for(var n=arguments[0],i=new B,o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof Me){var a=t.itemsTree(s);a!==null&&i.add(a)}else s instanceof tn?i.add(s.getItem()):ut.shouldNeverReachHere()}return i.size()<=0?null:i}};Ae.prototype.insert=function(t,r){ut.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new tn(t,r))};Ae.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var r=arguments[0],n=new B;return this.boundablesAtLevel(r,this._root,n),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];if(ut.isTrue(i>-2),o.getLevel()===i)return s.add(o),null;for(var a=o.getChildBoundables().iterator();a.hasNext();){var u=a.next();u instanceof Me?t.boundablesAtLevel(i,u,s):(ut.isTrue(u instanceof tn),i===-1&&s.add(u))}return null}};Ae.prototype.query=function(){var t=this;if(arguments.length===1){var r=arguments[0];this.build();var n=new B;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,n),n}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(tt(arguments[2],gi)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var s=arguments[0],a=arguments[1],u=arguments[2],f=a.getChildBoundables(),l=0;l<f.size();l++){var c=f.get(l);t.getIntersectsOp().intersects(c.getBounds(),s)&&(c instanceof Me?t.query(s,c,u):c instanceof tn?u.visitItem(c.getItem()):ut.shouldNeverReachHere())}else if(tt(arguments[2],Kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var h=arguments[0],p=arguments[1],d=arguments[2],m=p.getChildBoundables(),x=0;x<m.size();x++){var _=m.get(x);t.getIntersectsOp().intersects(_.getBounds(),h)&&(_ instanceof Me?t.query(h,_,d):_ instanceof tn?d.add(_.getItem()):ut.shouldNeverReachHere())}}};Ae.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Ae.prototype.getRoot=function(){return this.build(),this._root};Ae.prototype.remove=function(){var t=this;if(arguments.length===2){var r=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),r)?this.remove(r,this._root,n):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=this.removeItem(o,s);if(a)return!0;for(var u=null,f=o.getChildBoundables().iterator();f.hasNext();){var l=f.next();if(t.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Me&&(a=t.remove(i,l,s),a)){u=l;break}}return u!==null&&u.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(u),a}};Ae.prototype.createHigherLevels=function(t,r){ut.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,r+1);return n.size()===1?n.get(0):this.createHigherLevels(n,r+1)};Ae.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var r=arguments[0],n=0,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Me){var s=t.depth(o);s>n&&(n=s)}}return n+1}};Ae.prototype.createParentBoundables=function(t,r){var n=this;ut.isTrue(!t.isEmpty());var i=new B;i.add(this.createNode(r));var o=new B(t);en.sort(o,this.getComparator());for(var s=o.iterator();s.hasNext();){var a=s.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(r)),n.lastNode(i).addChildBoundable(a)}return i};Ae.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Ae.prototype.interfaces_=function(){return[Ur]};Ae.prototype.getClass=function(){return Ae};Ae.compareDoubles=function(t,r){return t>r?1:t<r?-1:0};Cu.IntersectsOp.get=function(){return Mx};Cu.serialVersionUID.get=function(){return-3886435814360241e3};Cu.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Ae,Cu);var Mx=function(){},Ko=function(){};Ko.prototype.distance=function(t,r){};Ko.prototype.interfaces_=function(){return[]};Ko.prototype.getClass=function(){return Ko};var Bg=function(e){function t(n){n=n||t.DEFAULT_NODE_CAPACITY,e.call(this,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var s=this;ut.isTrue(i.length>0);for(var a=new B,u=0;u<i.length;u++)a.addAll(s.createParentBoundablesFromVerticalSlice(i[u],o));return a},t.prototype.createNode=function(i){return new Ph(i)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;e.prototype.insert.call(this,i,o)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(i,o){for(var s=Math.trunc(Math.ceil(i.size()/o)),a=new Array(o).fill(null),u=i.iterator(),f=0;f<o;f++){a[f]=new B;for(var l=0;u.hasNext()&&l<s;){var c=u.next();a[f].add(c),l++}}return a},t.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return e.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];e.prototype.query.call(this,o,s)}else if(arguments.length===3){if(tt(arguments[2],gi)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var a=arguments[0],u=arguments[1],f=arguments[2];e.prototype.query.call(this,a,u,f)}else if(tt(arguments[2],Kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var l=arguments[0],c=arguments[1],h=arguments[2];e.prototype.query.call(this,l,c,h)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return e.prototype.createParentBoundables.call(this,i,o)},t.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return e.prototype.remove.call(this,i,o)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(i,o){ut.isTrue(!i.isEmpty());var s=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),a=new B(i);en.sort(a,t.xComparator);var u=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(s))));return this.createParentBoundablesFromVerticalSlices(u,o)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(tt(arguments[0],Ko)){var i=arguments[0],o=new xe(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof xe){var s=arguments[0];return this.nearestNeighbour(s,st.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&tt(arguments[1],Ko)){var a=arguments[0],u=arguments[1],f=new xe(this.getRoot(),a.getRoot(),u);return this.nearestNeighbour(f)}else if(arguments[0]instanceof xe&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],h=c,p=null,d=new ri;for(d.add(l);!d.isEmpty()&&h>0;){var m=d.poll(),x=m.getDistance();if(x>=h)break;m.isLeaves()?(h=x,p=m):m.expandToQueue(d,h)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(arguments.length===3){var _=arguments[0],g=arguments[1],v=arguments[2],y=new tn(_,g),E=new xe(this.getRoot(),y,v);return this.nearestNeighbour(E)[0]}},t.prototype.interfaces_=function(){return[eo,Ur]},t.prototype.getClass=function(){return t},t.centreX=function(i){return t.avg(i.getMinX(),i.getMaxX())},t.avg=function(i,o){return(i+o)/2},t.centreY=function(i){return t.avg(i.getMinY(),i.getMaxY())},r.STRtreeNode.get=function(){return Ph},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[ko]},compare:function(n,i){return e.compareDoubles(t.centreX(n.getBounds()),t.centreX(i.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[ko]},compare:function(n,i){return e.compareDoubles(t.centreY(n.getBounds()),t.centreY(i.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(n,i){return n.intersects(i)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,r),t}(Ae),Ph=function(e){function t(){var r=arguments[0];e.call(this,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();n===null?n=new W(o.getBounds()):n.expandToInclude(o.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Me),hr=function(){};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};hr.relativeSign=function(t,r){return t<r?-1:t>r?1:0};hr.compare=function(t,r,n){if(r.equals2D(n))return 0;var i=hr.relativeSign(r.x,n.x),o=hr.relativeSign(r.y,n.y);switch(t){case 0:return hr.compareValue(i,o);case 1:return hr.compareValue(o,i);case 2:return hr.compareValue(o,-i);case 3:return hr.compareValue(-i,o);case 4:return hr.compareValue(-i,-o);case 5:return hr.compareValue(-o,-i);case 6:return hr.compareValue(-o,i);case 7:return hr.compareValue(i,-o)}return ut.shouldNeverReachHere("invalid octant value"),0};hr.compareValue=function(t,r){return t<0?-1:t>0?1:r<0?-1:r>0?1:0};var vi=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new P(r),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!r.equals2D(t.getCoordinate(n))};vi.prototype.getCoordinate=function(){return this.coord};vi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};vi.prototype.compareTo=function(t){var r=t;return this.segmentIndex<r.segmentIndex?-1:this.segmentIndex>r.segmentIndex?1:this.coord.equals2D(r.coord)?0:hr.compare(this._segmentOctant,this.coord,r.coord)};vi.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};vi.prototype.isInterior=function(){return this._isInterior};vi.prototype.interfaces_=function(){return[Xr]};vi.prototype.getClass=function(){return vi};var ur=function(){this._nodeMap=new Je,this._edge=null;var t=arguments[0];this._edge=t};ur.prototype.getSplitCoordinates=function(){var t=this,r=new ua;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next();t.addEdgeCoordinates(i,o,r),i=o}return r.toCoordinateArray()};ur.prototype.addCollapsedNodes=function(){var t=this,r=new B;this.findCollapsesFromInsertedNodes(r),this.findCollapsesFromExistingVertices(r);for(var n=r.iterator();n.hasNext();){var i=n.next().intValue();t.add(t._edge.getCoordinate(i),i)}};ur.prototype.print=function(t){t.println("Intersections:");for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};ur.prototype.findCollapsesFromExistingVertices=function(t){for(var r=this,n=0;n<this._edge.size()-2;n++){var i=r._edge.getCoordinate(n),o=r._edge.getCoordinate(n+2);i.equals2D(o)&&t.add(new vn(n+1))}};ur.prototype.addEdgeCoordinates=function(t,r,n){var i=this,o=this._edge.getCoordinate(r.segmentIndex),s=r.isInterior()||!r.coord.equals2D(o);n.add(new P(t.coord),!1);for(var a=t.segmentIndex+1;a<=r.segmentIndex;a++)n.add(i._edge.getCoordinate(a));s&&n.add(new P(r.coord))};ur.prototype.iterator=function(){return this._nodeMap.values().iterator()};ur.prototype.addSplitEdges=function(t){var r=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=r.createSplitEdge(i,o);t.add(s),i=o}};ur.prototype.findCollapseIndex=function(t,r,n){if(!t.coord.equals2D(r.coord))return!1;var i=r.segmentIndex-t.segmentIndex;return r.isInterior()||i--,i===1?(n[0]=t.segmentIndex+1,!0):!1};ur.prototype.findCollapsesFromInsertedNodes=function(t){for(var r=this,n=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var s=i.next(),a=r.findCollapseIndex(o,s,n);a&&t.add(new vn(n[0])),o=s}};ur.prototype.getEdge=function(){return this._edge};ur.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};ur.prototype.createSplitEdge=function(t,r){var n=this,i=r.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(r.segmentIndex),s=r.isInterior()||!r.coord.equals2D(o);s||i--;var a=new Array(i).fill(null),u=0;a[u++]=new P(t.coord);for(var f=t.segmentIndex+1;f<=r.segmentIndex;f++)a[u++]=n._edge.getCoordinate(f);return s&&(a[u]=new P(r.coord)),new Ee(a,this._edge.getData())};ur.prototype.add=function(t,r){var n=new vi(this._edge,t,r,this._edge.getSegmentOctant(r)),i=this._nodeMap.get(n);return i!==null?(ut.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)};ur.prototype.checkSplitEdgesCorrectness=function(t){var r=this._edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(r[0]))throw new jn("bad split edge start point at "+i);var o=t.get(t.size()-1),s=o.getCoordinates(),a=s[s.length-1];if(!a.equals2D(r[r.length-1]))throw new jn("bad split edge end point at "+a)};ur.prototype.interfaces_=function(){return[]};ur.prototype.getClass=function(){return ur};var ro=function(){};ro.prototype.interfaces_=function(){return[]};ro.prototype.getClass=function(){return ro};ro.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];if(t===0&&r===0)throw new le("Cannot compute the octant for point ( "+t+", "+r+" )");var n=Math.abs(t),i=Math.abs(r);return t>=0?r>=0?n>=i?0:1:n>=i?7:6:r>=0?n>=i?3:2:n>=i?4:5}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(a===0&&u===0)throw new le("Cannot compute the octant for two identical points "+o);return ro.octant(a,u)}};var Bn=function(){};Bn.prototype.getCoordinates=function(){};Bn.prototype.size=function(){};Bn.prototype.getCoordinate=function(t){};Bn.prototype.isClosed=function(){};Bn.prototype.setData=function(t){};Bn.prototype.getData=function(){};Bn.prototype.interfaces_=function(){return[]};Bn.prototype.getClass=function(){return Bn};var Ks=function(){};Ks.prototype.addIntersection=function(t,r){};Ks.prototype.interfaces_=function(){return[Bn]};Ks.prototype.getClass=function(){return Ks};var Ee=function(){this._nodeList=new ur(this),this._pts=null,this._data=null;var t=arguments[0],r=arguments[1];this._pts=t,this._data=r};Ee.prototype.getCoordinates=function(){return this._pts};Ee.prototype.size=function(){return this._pts.length};Ee.prototype.getCoordinate=function(t){return this._pts[t]};Ee.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ee.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};Ee.prototype.setData=function(t){this._data=t};Ee.prototype.safeOctant=function(t,r){return t.equals2D(r)?0:ro.octant(t,r)};Ee.prototype.getData=function(){return this._data};Ee.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];this.addIntersectionNode(t,r)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[3],s=new P(n.getIntersection(o));this.addIntersection(s,i)}};Ee.prototype.toString=function(){return $r.toLineString(new ye(this._pts))};Ee.prototype.getNodeList=function(){return this._nodeList};Ee.prototype.addIntersectionNode=function(t,r){var n=r,i=n+1;if(i<this._pts.length){var o=this._pts[i];t.equals2D(o)&&(n=i)}var s=this._nodeList.add(t,n);return s};Ee.prototype.addIntersections=function(t,r,n){for(var i=this,o=0;o<t.getIntersectionNum();o++)i.addIntersection(t,r,n,o)};Ee.prototype.interfaces_=function(){return[Ks]};Ee.prototype.getClass=function(){return Ee};Ee.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],r=new B;return Ee.getNodedSubstrings(t,r),r}else if(arguments.length===2)for(var n=arguments[0],i=arguments[1],o=n.iterator();o.hasNext();){var s=o.next();s.getNodeList().addSplitEdges(i)}};var K=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new P,this.p1=new P;else if(arguments.length===1){var t=arguments[0];this.p0=new P(t.p0),this.p1=new P(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this.p0=new P(r,n),this.p1=new P(i,o)}},Gg={serialVersionUID:{configurable:!0}};K.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};K.prototype.orientationIndex=function(){if(arguments[0]instanceof K){var t=arguments[0],r=G.orientationIndex(this.p0,this.p1,t.p0),n=G.orientationIndex(this.p0,this.p1,t.p1);return r>=0&&n>=0||r<=0&&n<=0?Math.max(r,n):0}else if(arguments[0]instanceof P){var i=arguments[0];return G.orientationIndex(this.p0,this.p1,i)}};K.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};K.prototype.isVertical=function(){return this.p0.x===this.p1.x};K.prototype.equals=function(t){if(!(t instanceof K))return!1;var r=t;return this.p0.equals(r.p0)&&this.p1.equals(r.p1)};K.prototype.intersection=function(t){var r=new Yi;return r.computeIntersection(this.p0,this.p1,t.p0,t.p1),r.hasIntersection()?r.getIntersection(0):null};K.prototype.project=function(){if(arguments[0]instanceof P){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new P(t);var r=this.projectionFactor(t),n=new P;return n.x=this.p0.x+r*(this.p1.x-this.p0.x),n.y=this.p0.y+r*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof K){var i=arguments[0],o=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(o>=1&&s>=1||o<=0&&s<=0)return null;var a=this.project(i.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(i.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new K(a,u)}};K.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};K.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};K.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};K.prototype.distancePerpendicular=function(t){return G.distancePointLinePerpendicular(t,this.p0,this.p1)};K.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};K.prototype.midPoint=function(){return K.midPoint(this.p0,this.p1)};K.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var r=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=r*r+n*n;if(i<=0)return st.NaN;var o=((t.x-this.p0.x)*r+(t.y-this.p0.y)*n)/i;return o};K.prototype.closestPoints=function(t){var r=this.intersection(t);if(r!==null)return[r,r];var n=new Array(2).fill(null),i=st.MAX_VALUE,o=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);o=a.distance(t.p1),o<i&&(i=o,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var f=t.closestPoint(this.p1);return o=f.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=f),n};K.prototype.closestPoint=function(t){var r=this.projectionFactor(t);if(r>0&&r<1)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return n<i?this.p0:this.p1};K.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};K.prototype.getLength=function(){return this.p0.distance(this.p1)};K.prototype.compareTo=function(t){var r=t,n=this.p0.compareTo(r.p0);return n!==0?n:this.p1.compareTo(r.p1)};K.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};K.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};K.prototype.lineIntersection=function(t){try{var r=Jr.intersection(this.p0,this.p1,t.p0,t.p1);return r}catch(n){if(!(n instanceof us))throw n}finally{}return null};K.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};K.prototype.pointAlongOffset=function(t,r){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,a=Math.sqrt(o*o+s*s),u=0,f=0;if(r!==0){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");u=r*o/a,f=r*s/a}var l=n-f,c=i+u,h=new P(l,c);return h};K.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.p0.x=r.x,this.p0.y=r.y,this.p1.x=n.x,this.p1.y=n.y}};K.prototype.segmentFraction=function(t){var r=this.projectionFactor(t);return r<0?r=0:(r>1||st.isNaN(r))&&(r=1),r};K.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};K.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};K.prototype.distance=function(){if(arguments[0]instanceof K){var t=arguments[0];return G.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof P){var r=arguments[0];return G.distancePointLine(r,this.p0,this.p1)}};K.prototype.pointAlong=function(t){var r=new P;return r.x=this.p0.x+t*(this.p1.x-this.p0.x),r.y=this.p0.y+t*(this.p1.y-this.p0.y),r};K.prototype.hashCode=function(){var t=st.doubleToLongBits(this.p0.x);t^=st.doubleToLongBits(this.p0.y)*31;var r=Math.trunc(t)^Math.trunc(t>>32),n=st.doubleToLongBits(this.p1.x);n^=st.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(n)^Math.trunc(n>>32);return r^i};K.prototype.interfaces_=function(){return[Xr,Ur]};K.prototype.getClass=function(){return K};K.midPoint=function(t,r){return new P((t.x+r.x)/2,(t.y+r.y)/2)};Gg.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(K,Gg);var Qs=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new K,this._overlapSeg2=new K};Qs.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(r,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};Qs.prototype.interfaces_=function(){return[]};Qs.prototype.getClass=function(){return Qs};var Cr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=r,this._end=n,this._context=i};Cr.prototype.getLineSegment=function(t,r){r.p0=this._pts[t],r.p1=this._pts[t+1]};Cr.prototype.computeSelect=function(t,r,n,i){var o=this._pts[r],s=this._pts[n];if(i.tempEnv1.init(o,s),n-r===1)return i.select(this,r),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((r+n)/2);r<a&&this.computeSelect(t,r,a,i),a<n&&this.computeSelect(t,a,n,i)};Cr.prototype.getCoordinates=function(){for(var t=this,r=new Array(this._end-this._start+1).fill(null),n=0,i=this._start;i<=this._end;i++)r[n++]=t._pts[i];return r};Cr.prototype.computeOverlaps=function(t,r){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,r)};Cr.prototype.setId=function(t){this._id=t};Cr.prototype.select=function(t,r){this.computeSelect(t,this._start,this._end,r)};Cr.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],r=this._pts[this._end];this._env=new W(t,r)}return this._env};Cr.prototype.getEndIndex=function(){return this._end};Cr.prototype.getStartIndex=function(){return this._start};Cr.prototype.getContext=function(){return this._context};Cr.prototype.getId=function(){return this._id};Cr.prototype.computeOverlapsInternal=function(t,r,n,i,o,s){var a=this._pts[t],u=this._pts[r],f=n._pts[i],l=n._pts[o];if(r-t===1&&o-i===1)return s.overlap(this,t,n,i),null;if(s.tempEnv1.init(a,u),s.tempEnv2.init(f,l),!s.tempEnv1.intersects(s.tempEnv2))return null;var c=Math.trunc((t+r)/2),h=Math.trunc((i+o)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,s),h<o&&this.computeOverlapsInternal(t,c,n,h,o,s)),c<r&&(i<h&&this.computeOverlapsInternal(c,r,n,i,h,s),h<o&&this.computeOverlapsInternal(c,r,n,h,o,s))};Cr.prototype.interfaces_=function(){return[]};Cr.prototype.getClass=function(){return Cr};var gn=function(){};gn.prototype.interfaces_=function(){return[]};gn.prototype.getClass=function(){return gn};gn.getChainStartIndices=function(t){var r=0,n=new B;n.add(new vn(r));do{var i=gn.findChainEnd(t,r);n.add(new vn(i)),r=i}while(r<t.length-1);var o=gn.toIntArray(n);return o};gn.findChainEnd=function(t,r){for(var n=r;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Zt.quadrant(t[n],t[n+1]),o=r+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var s=Zt.quadrant(t[o-1],t[o]);if(s!==i)break}o++}return o-1};gn.getChains=function(){if(arguments.length===1){var t=arguments[0];return gn.getChains(t,null)}else if(arguments.length===2){for(var r=arguments[0],n=arguments[1],i=new B,o=gn.getChainStartIndices(r),s=0;s<o.length-1;s++){var a=new Cr(r,o[s],o[s+1],n);i.add(a)}return i}};gn.toIntArray=function(t){for(var r=new Array(t.size()).fill(null),n=0;n<r.length;n++)r[n]=t.get(n).intValue();return r};var Di=function(){};Di.prototype.computeNodes=function(t){};Di.prototype.getNodedSubstrings=function(){};Di.prototype.interfaces_=function(){return[]};Di.prototype.getClass=function(){return Di};var Zs=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};Zs.prototype.setSegmentIntersector=function(t){this._segInt=t};Zs.prototype.interfaces_=function(){return[Di]};Zs.prototype.getClass=function(){return Zs};var _l=function(e){function t(n){n?e.call(this,n):e.call(this),this._monoChains=new B,this._index=new Bg,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ee.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(i){for(var o=this,s=gn.getChains(i.getCoordinates(),i),a=s.iterator();a.hasNext();){var u=a.next();u.setId(o._idCounter++),o._index.insert(u.getEnvelope(),u),o._monoChains.add(u)}},t.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var s=i.iterator();s.hasNext();)o.add(s.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var i=this,o=new Mh(this._segInt),s=this._monoChains.iterator();s.hasNext();)for(var a=s.next(),u=i._index.query(a.getEnvelope()),f=u.iterator();f.hasNext();){var l=f.next();if(l.getId()>a.getId()&&(a.computeOverlaps(l,o),i._nOverlaps++),i._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.SegmentOverlapAction.get=function(){return Mh},Object.defineProperties(t,r),t}(Zs),Mh=function(e){function t(){e.call(this),this._si=null;var r=arguments[0];this._si=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=n.getContext(),u=o.getContext();this._si.processIntersections(a,i,u,s)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Qs),Vt=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},ai={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Vt.prototype.getEndCapStyle=function(){return this._endCapStyle};Vt.prototype.isSingleSided=function(){return this._isSingleSided};Vt.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Vt.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Vt.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Vt.JOIN_ROUND&&(this._quadrantSegments=Vt.DEFAULT_QUADRANT_SEGMENTS)};Vt.prototype.getJoinStyle=function(){return this._joinStyle};Vt.prototype.setJoinStyle=function(t){this._joinStyle=t};Vt.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Vt.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Vt.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Vt.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Vt.prototype.getMitreLimit=function(){return this._mitreLimit};Vt.prototype.setMitreLimit=function(t){this._mitreLimit=t};Vt.prototype.setSingleSided=function(t){this._isSingleSided=t};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.bufferDistanceError=function(t){var r=Math.PI/2/t;return 1-Math.cos(r/2)};ai.CAP_ROUND.get=function(){return 1};ai.CAP_FLAT.get=function(){return 2};ai.CAP_SQUARE.get=function(){return 3};ai.JOIN_ROUND.get=function(){return 1};ai.JOIN_MITRE.get=function(){return 2};ai.JOIN_BEVEL.get=function(){return 3};ai.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};ai.DEFAULT_MITRE_LIMIT.get=function(){return 5};ai.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Vt,ai);var de=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=G.COUNTERCLOCKWISE,this._inputLine=t||null},ca={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};de.prototype.isDeletable=function(t,r,n,i){var o=this._inputLine[t],s=this._inputLine[r],a=this._inputLine[n];return!this.isConcave(o,s,a)||!this.isShallow(o,s,a,i)?!1:this.isShallowSampled(o,s,t,n,i)};de.prototype.deleteShallowConcavities=function(){for(var t=this,r=1,n=this.findNextNonDeletedIndex(r),i=this.findNextNonDeletedIndex(n),o=!1;i<this._inputLine.length;){var s=!1;t.isDeletable(r,n,i,t._distanceTol)&&(t._isDeleted[n]=de.DELETE,s=!0,o=!0),s?r=i:r=n,n=t.findNextNonDeletedIndex(r),i=t.findNextNonDeletedIndex(n)}return o};de.prototype.isShallowConcavity=function(t,r,n,i){var o=G.computeOrientation(t,r,n),s=o===this._angleOrientation;if(!s)return!1;var a=G.distancePointLine(r,t,n);return a<i};de.prototype.isShallowSampled=function(t,r,n,i,o){var s=this,a=Math.trunc((i-n)/de.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var u=n;u<i;u+=a)if(!s.isShallow(t,r,s._inputLine[u],o))return!1;return!0};de.prototype.isConcave=function(t,r,n){var i=G.computeOrientation(t,r,n),o=i===this._angleOrientation;return o};de.prototype.simplify=function(t){var r=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=G.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=r.deleteShallowConcavities();while(n);return this.collapseLine()};de.prototype.findNextNonDeletedIndex=function(t){for(var r=t+1;r<this._inputLine.length&&this._isDeleted[r]===de.DELETE;)r++;return r};de.prototype.isShallow=function(t,r,n,i){var o=G.distancePointLine(r,t,n);return o<i};de.prototype.collapseLine=function(){for(var t=this,r=new ua,n=0;n<this._inputLine.length;n++)t._isDeleted[n]!==de.DELETE&&r.add(t._inputLine[n]);return r.toCoordinateArray()};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};de.simplify=function(t,r){var n=new de(t);return n.simplify(r)};ca.INIT.get=function(){return 0};ca.DELETE.get=function(){return 1};ca.KEEP.get=function(){return 1};ca.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(de,ca);var br=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new B},kg={COORDINATE_ARRAY_TYPE:{configurable:!0}};br.prototype.getCoordinates=function(){var t=this._ptList.toArray(br.COORDINATE_ARRAY_TYPE);return t};br.prototype.setPrecisionModel=function(t){this._precisionModel=t};br.prototype.addPt=function(t){var r=new P(t);if(this._precisionModel.makePrecise(r),this.isRedundant(r))return null;this._ptList.add(r)};br.prototype.revere=function(){};br.prototype.addPts=function(t,r){var n=this;if(r)for(var i=0;i<t.length;i++)n.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)n.addPt(t[o])};br.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var r=this._ptList.get(this._ptList.size()-1),n=t.distance(r);return n<this._minimimVertexDistance};br.prototype.toString=function(){var t=new lt,r=t.createLineString(this.getCoordinates());return r.toString()};br.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new P(this._ptList.get(0)),r=this._ptList.get(this._ptList.size()-1);if(t.equals(r))return null;this._ptList.add(t)};br.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};kg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(br,kg);var vt=function(){},mo={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};vt.prototype.interfaces_=function(){return[]};vt.prototype.getClass=function(){return vt};vt.toDegrees=function(t){return t*180/Math.PI};vt.normalize=function(t){for(;t>Math.PI;)t-=vt.PI_TIMES_2;for(;t<=-Math.PI;)t+=vt.PI_TIMES_2;return t};vt.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=n.x-r.x,o=n.y-r.y;return Math.atan2(o,i)}};vt.isAcute=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=n.x-r.x,a=n.y-r.y,u=i*s+o*a;return u>0};vt.isObtuse=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=n.x-r.x,a=n.y-r.y,u=i*s+o*a;return u<0};vt.interiorAngle=function(t,r,n){var i=vt.angle(r,t),o=vt.angle(r,n);return Math.abs(o-i)};vt.normalizePositive=function(t){if(t<0){for(;t<0;)t+=vt.PI_TIMES_2;t>=vt.PI_TIMES_2&&(t=0)}else{for(;t>=vt.PI_TIMES_2;)t-=vt.PI_TIMES_2;t<0&&(t=0)}return t};vt.angleBetween=function(t,r,n){var i=vt.angle(r,t),o=vt.angle(r,n);return vt.diff(i,o)};vt.diff=function(t,r){var n=null;return t<r?n=r-t:n=t-r,n>Math.PI&&(n=2*Math.PI-n),n};vt.toRadians=function(t){return t*Math.PI/180};vt.getTurn=function(t,r){var n=Math.sin(r-t);return n>0?vt.COUNTERCLOCKWISE:n<0?vt.CLOCKWISE:vt.NONE};vt.angleBetweenOriented=function(t,r,n){var i=vt.angle(r,t),o=vt.angle(r,n),s=o-i;return s<=-Math.PI?s+vt.PI_TIMES_2:s>Math.PI?s-vt.PI_TIMES_2:s};mo.PI_TIMES_2.get=function(){return 2*Math.PI};mo.PI_OVER_2.get=function(){return Math.PI/2};mo.PI_OVER_4.get=function(){return Math.PI/4};mo.COUNTERCLOCKWISE.get=function(){return G.COUNTERCLOCKWISE};mo.CLOCKWISE.get=function(){return G.CLOCKWISE};mo.NONE.get=function(){return G.COLLINEAR};Object.defineProperties(vt,mo);var ae=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new K,this._seg1=new K,this._offset0=new K,this._offset1=new K,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=r,this._li=new Yi,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Vt.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},ha={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ae.prototype.addNextSegment=function(t,r){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=G.computeOrientation(this._s0,this._s1,this._s2),i=n===G.CLOCKWISE&&this._side===T.LEFT||n===G.COUNTERCLOCKWISE&&this._side===T.RIGHT;n===0?this.addCollinear(r):i?this.addOutsideTurn(n,r):this.addInsideTurn(n,r)};ae.prototype.addLineEndCap=function(t,r){var n=new K(t,r),i=new K;this.computeOffsetSegment(n,T.LEFT,this._distance,i);var o=new K;this.computeOffsetSegment(n,T.RIGHT,this._distance,o);var s=r.x-t.x,a=r.y-t.y,u=Math.atan2(a,s);switch(this._bufParams.getEndCapStyle()){case Vt.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(r,u+Math.PI/2,u-Math.PI/2,G.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Vt.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Vt.CAP_SQUARE:var f=new P;f.x=Math.abs(this._distance)*Math.cos(u),f.y=Math.abs(this._distance)*Math.sin(u);var l=new P(i.p1.x+f.x,i.p1.y+f.y),c=new P(o.p1.x+f.x,o.p1.y+f.y);this._segList.addPt(l),this._segList.addPt(c);break}};ae.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};ae.prototype.addMitreJoin=function(t,r,n,i){var o=!0,s=null;try{s=Jr.intersection(r.p0,r.p1,n.p0,n.p1);var a=i<=0?1:s.distance(t)/Math.abs(i);a>this._bufParams.getMitreLimit()&&(o=!1)}catch(u){if(u instanceof us)s=new P(0,0),o=!1;else throw u}finally{}o?this._segList.addPt(s):this.addLimitedMitreJoin(r,n,i,this._bufParams.getMitreLimit())};ae.prototype.addFilletCorner=function(t,r,n,i,o){var s=r.x-t.x,a=r.y-t.y,u=Math.atan2(a,s),f=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,f);i===G.CLOCKWISE?u<=c&&(u+=2*Math.PI):u>=c&&(u-=2*Math.PI),this._segList.addPt(r),this.addFilletArc(t,u,c,i,o),this._segList.addPt(n)};ae.prototype.addOutsideTurn=function(t,r){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ae.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Vt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Vt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(r&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};ae.prototype.createSquare=function(t){this._segList.addPt(new P(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new P(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};ae.prototype.addSegments=function(t,r){this._segList.addPts(t,r)};ae.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};ae.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};ae.prototype.initSideSegments=function(t,r,n){this._s1=t,this._s2=r,this._side=n,this._seg1.setCoordinates(t,r),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};ae.prototype.addLimitedMitreJoin=function(t,r,n,i){var o=this._seg0.p1,s=vt.angle(o,this._seg0.p0),a=vt.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),u=a/2,f=vt.normalize(s+u),l=vt.normalize(f+Math.PI),c=i*n,h=c*Math.abs(Math.sin(u)),p=n-h,d=o.x+c*Math.cos(l),m=o.y+c*Math.sin(l),x=new P(d,m),_=new K(o,x),g=_.pointAlongOffset(1,p),v=_.pointAlongOffset(1,-p);this._side===T.LEFT?(this._segList.addPt(g),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(g))};ae.prototype.computeOffsetSegment=function(t,r,n,i){var o=r===T.LEFT?1:-1,s=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,u=Math.sqrt(s*s+a*a),f=o*n*s/u,l=o*n*a/u;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+f,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+f};ae.prototype.addFilletArc=function(t,r,n,i,o){var s=this,a=i===G.CLOCKWISE?-1:1,u=Math.abs(r-n),f=Math.trunc(u/this._filletAngleQuantum+.5);if(f<1)return null;for(var l=0,c=u/f,h=l,p=new P;h<u;){var d=r+a*h;p.x=t.x+o*Math.cos(d),p.y=t.y+o*Math.sin(d),s._segList.addPt(p),h+=c}};ae.prototype.addInsideTurn=function(t,r){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ae.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new P((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new P((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};ae.prototype.createCircle=function(t){var r=new P(t.x+this._distance,t.y);this._segList.addPt(r),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};ae.prototype.addBevelJoin=function(t,r){this._segList.addPt(t.p1),this._segList.addPt(r.p0)};ae.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new br,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ae.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};ae.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var r=this._li.getIntersectionNum();r>=2&&(this._bufParams.getJoinStyle()===Vt.JOIN_BEVEL||this._bufParams.getJoinStyle()===Vt.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,G.CLOCKWISE,this._distance))};ae.prototype.closeRing=function(){this._segList.closeRing()};ae.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};ae.prototype.interfaces_=function(){return[]};ae.prototype.getClass=function(){return ae};ha.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};ha.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};ha.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};ha.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(ae,ha);var dr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],r=arguments[1];this._precisionModel=t,this._bufParams=r};dr.prototype.getOffsetCurve=function(t,r){if(this._distance=r,r===0)return null;var n=r<0,i=Math.abs(r),o=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,n,o);var s=o.getCoordinates();return n&&ct.reverse(s),s};dr.prototype.computeSingleSidedBufferCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);if(r){n.addSegments(t,!0);var o=de.simplify(t,-i),s=o.length-1;n.initSideSegments(o[s],o[s-1],T.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(o[a],!0)}else{n.addSegments(t,!1);var u=de.simplify(t,i),f=u.length-1;n.initSideSegments(u[0],u[1],T.LEFT),n.addFirstSegment();for(var l=2;l<=f;l++)n.addNextSegment(u[l],!0)}n.addLastSegment(),n.closeRing()};dr.prototype.computeRingBufferCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);r===T.RIGHT&&(i=-i);var o=de.simplify(t,i),s=o.length-1;n.initSideSegments(o[s-1],o[0],r);for(var a=1;a<=s;a++){var u=a!==1;n.addNextSegment(o[a],u)}n.closeRing()};dr.prototype.computeLineBufferCurve=function(t,r){var n=this.simplifyTolerance(this._distance),i=de.simplify(t,n),o=i.length-1;r.initSideSegments(i[0],i[1],T.LEFT);for(var s=2;s<=o;s++)r.addNextSegment(i[s],!0);r.addLastSegment(),r.addLineEndCap(i[o-1],i[o]);var a=de.simplify(t,-n),u=a.length-1;r.initSideSegments(a[u],a[u-1],T.LEFT);for(var f=u-2;f>=0;f--)r.addNextSegment(a[f],!0);r.addLastSegment(),r.addLineEndCap(a[1],a[0]),r.closeRing()};dr.prototype.computePointCurve=function(t,r){switch(this._bufParams.getEndCapStyle()){case Vt.CAP_ROUND:r.createCircle(t);break;case Vt.CAP_SQUARE:r.createSquare(t);break}};dr.prototype.getLineCurve=function(t,r){if(this._distance=r,r<0&&!this._bufParams.isSingleSided()||r===0)return null;var n=Math.abs(r),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var o=r<0;this.computeSingleSidedBufferCurve(t,o,i)}else this.computeLineBufferCurve(t,i);var s=i.getCoordinates();return s};dr.prototype.getBufferParameters=function(){return this._bufParams};dr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};dr.prototype.getRingCurve=function(t,r,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return dr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,r,i),i.getCoordinates()};dr.prototype.computeOffsetCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);if(r){var o=de.simplify(t,-i),s=o.length-1;n.initSideSegments(o[s],o[s-1],T.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(o[a],!0)}else{var u=de.simplify(t,i),f=u.length-1;n.initSideSegments(u[0],u[1],T.LEFT),n.addFirstSegment();for(var l=2;l<=f;l++)n.addNextSegment(u[l],!0)}n.addLastSegment()};dr.prototype.getSegGen=function(t){return new ae(this._precisionModel,this._bufParams,t)};dr.prototype.interfaces_=function(){return[]};dr.prototype.getClass=function(){return dr};dr.copyCoordinates=function(t){for(var r=new Array(t.length).fill(null),n=0;n<r.length;n++)r[n]=new P(t[n]);return r};var no=function(){this._subgraphs=null,this._seg=new K,this._cga=new G;var t=arguments[0];this._subgraphs=t},qg={DepthSegment:{configurable:!0}};no.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var r=arguments[0],n=new B,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),s=o.getEnvelope();r.y<s.getMinY()||r.y>s.getMaxY()||t.findStabbedSegments(r,o.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(tt(arguments[2],Kr)&&arguments[0]instanceof P&&arguments[1]instanceof Sf)for(var a=arguments[0],u=arguments[1],f=arguments[2],l=u.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!t._seg.isHorizontal()&&!(a.y<t._seg.p0.y||a.y>t._seg.p1.y)&&G.computeOrientation(t._seg.p0,t._seg.p1,a)!==G.RIGHT){var p=u.getDepth(T.LEFT);t._seg.p0.equals(l[c])||(p=u.getDepth(T.RIGHT));var d=new Ti(t._seg,p);f.add(d)}}else if(tt(arguments[2],Kr)&&arguments[0]instanceof P&&tt(arguments[1],Kr))for(var m=arguments[0],x=arguments[1],_=arguments[2],g=x.iterator();g.hasNext();){var v=g.next();v.isForward()&&t.findStabbedSegments(m,v,_)}}};no.prototype.getDepth=function(t){var r=this.findStabbedSegments(t);if(r.size()===0)return 0;var n=en.min(r);return n._leftDepth};no.prototype.interfaces_=function(){return[]};no.prototype.getClass=function(){return no};qg.DepthSegment.get=function(){return Ti};Object.defineProperties(no,qg);var Ti=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],r=arguments[1];this._upwardSeg=new K(t),this._leftDepth=r};Ti.prototype.compareTo=function(t){var r=t;if(this._upwardSeg.minX()>=r._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=r._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(r._upwardSeg);return n!==0||(n=-1*r._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(r._upwardSeg)};Ti.prototype.compareX=function(t,r){var n=t.p0.compareTo(r.p0);return n!==0?n:t.p1.compareTo(r.p1)};Ti.prototype.toString=function(){return this._upwardSeg.toString()};Ti.prototype.interfaces_=function(){return[Xr]};Ti.prototype.getClass=function(){return Ti};var Wt=function(t,r,n){this.p0=t||null,this.p1=r||null,this.p2=n||null};Wt.prototype.area=function(){return Wt.area(this.p0,this.p1,this.p2)};Wt.prototype.signedArea=function(){return Wt.signedArea(this.p0,this.p1,this.p2)};Wt.prototype.interpolateZ=function(t){if(t===null)throw new le("Supplied point is null.");return Wt.interpolateZ(t,this.p0,this.p1,this.p2)};Wt.prototype.longestSideLength=function(){return Wt.longestSideLength(this.p0,this.p1,this.p2)};Wt.prototype.isAcute=function(){return Wt.isAcute(this.p0,this.p1,this.p2)};Wt.prototype.circumcentre=function(){return Wt.circumcentre(this.p0,this.p1,this.p2)};Wt.prototype.area3D=function(){return Wt.area3D(this.p0,this.p1,this.p2)};Wt.prototype.centroid=function(){return Wt.centroid(this.p0,this.p1,this.p2)};Wt.prototype.inCentre=function(){return Wt.inCentre(this.p0,this.p1,this.p2)};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.area=function(t,r,n){return Math.abs(((n.x-t.x)*(r.y-t.y)-(r.x-t.x)*(n.y-t.y))/2)};Wt.signedArea=function(t,r,n){return((n.x-t.x)*(r.y-t.y)-(r.x-t.x)*(n.y-t.y))/2};Wt.det=function(t,r,n,i){return t*i-r*n};Wt.interpolateZ=function(t,r,n,i){var o=r.x,s=r.y,a=n.x-o,u=i.x-o,f=n.y-s,l=i.y-s,c=a*l-u*f,h=t.x-o,p=t.y-s,d=(l*h-u*p)/c,m=(-f*h+a*p)/c,x=r.z+d*(n.z-r.z)+m*(i.z-r.z);return x};Wt.longestSideLength=function(t,r,n){var i=t.distance(r),o=r.distance(n),s=n.distance(t),a=i;return o>a&&(a=o),s>a&&(a=s),a};Wt.isAcute=function(t,r,n){return!(!vt.isAcute(t,r,n)||!vt.isAcute(r,n,t)||!vt.isAcute(n,t,r))};Wt.circumcentre=function(t,r,n){var i=n.x,o=n.y,s=t.x-i,a=t.y-o,u=r.x-i,f=r.y-o,l=2*Wt.det(s,a,u,f),c=Wt.det(a,s*s+a*a,f,u*u+f*f),h=Wt.det(s,s*s+a*a,u,u*u+f*f),p=i-c/l,d=o+h/l;return new P(p,d)};Wt.perpendicularBisector=function(t,r){var n=r.x-t.x,i=r.y-t.y,o=new Jr(t.x+n/2,t.y+i/2,1),s=new Jr(t.x-i+n/2,t.y+n+i/2,1);return new Jr(o,s)};Wt.angleBisector=function(t,r,n){var i=r.distance(t),o=r.distance(n),s=i/(i+o),a=n.x-t.x,u=n.y-t.y,f=new P(t.x+s*a,t.y+s*u);return f};Wt.area3D=function(t,r,n){var i=r.x-t.x,o=r.y-t.y,s=r.z-t.z,a=n.x-t.x,u=n.y-t.y,f=n.z-t.z,l=o*f-s*u,c=s*a-i*f,h=i*u-o*a,p=l*l+c*c+h*h,d=Math.sqrt(p)/2;return d};Wt.centroid=function(t,r,n){var i=(t.x+r.x+n.x)/3,o=(t.y+r.y+n.y)/3;return new P(i,o)};Wt.inCentre=function(t,r,n){var i=r.distance(n),o=t.distance(n),s=t.distance(r),a=i+o+s,u=(i*t.x+o*r.x+s*n.x)/a,f=(i*t.y+o*r.y+s*n.y)/a;return new P(u,f)};var zr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new B;var t=arguments[0],r=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=r,this._curveBuilder=n};zr.prototype.addPoint=function(t){if(this._distance<=0)return null;var r=t.getCoordinates(),n=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)};zr.prototype.addPolygon=function(t){var r=this,n=this._distance,i=T.LEFT;this._distance<0&&(n=-this._distance,i=T.RIGHT);var o=t.getExteriorRing(),s=ct.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&s.length<3)return null;this.addPolygonRing(s,n,i,L.EXTERIOR,L.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var u=t.getInteriorRingN(a),f=ct.removeRepeatedPoints(u.getCoordinates());r._distance>0&&r.isErodedCompletely(u,-r._distance)||r.addPolygonRing(f,n,T.opposite(i),L.INTERIOR,L.EXTERIOR)}};zr.prototype.isTriangleErodedCompletely=function(t,r){var n=new Wt(t[0],t[1],t[2]),i=n.inCentre(),o=G.distancePointLine(i,n.p0,n.p1);return o<Math.abs(r)};zr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var r=ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)};zr.prototype.addCurve=function(t,r,n){if(t===null||t.length<2)return null;var i=new Ee(t,new Kt(0,L.BOUNDARY,r,n));this._curveList.add(i)};zr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};zr.prototype.addPolygonRing=function(t,r,n,i,o){if(r===0&&t.length<Tn.MINIMUM_VALID_SIZE)return null;var s=i,a=o;t.length>=Tn.MINIMUM_VALID_SIZE&&G.isCCW(t)&&(s=o,a=i,n=T.opposite(n));var u=this._curveBuilder.getRingCurve(t,n,r);this.addCurve(u,s,a)};zr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof be?this.addPolygon(t):t instanceof ve?this.addLineString(t):t instanceof wr?this.addPoint(t):t instanceof Ho?this.addCollection(t):t instanceof Ai?this.addCollection(t):t instanceof Rn?this.addCollection(t):t instanceof sr&&this.addCollection(t)};zr.prototype.isErodedCompletely=function(t,r){var n=t.getCoordinates();if(n.length<4)return r<0;if(n.length===4)return this.isTriangleErodedCompletely(n,r);var i=t.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return r<0&&2*Math.abs(r)>o};zr.prototype.addCollection=function(t){for(var r=this,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);r.add(i)}};zr.prototype.interfaces_=function(){return[]};zr.prototype.getClass=function(){return zr};var Qo=function(){};Qo.prototype.locate=function(t){};Qo.prototype.interfaces_=function(){return[]};Qo.prototype.getClass=function(){return Qo};var An=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};An.prototype.next=function(){if(this._atStart)return this._atStart=!1,An.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ls;var t=this._parent.getGeometryN(this._index++);return t instanceof sr?(this._subcollectionIterator=new An(t),this._subcollectionIterator.next()):t};An.prototype.remove=function(){throw new Error(this.getClass().getName())};An.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};An.prototype.interfaces_=function(){return[fs]};An.prototype.getClass=function(){return An};An.isAtomic=function(t){return!(t instanceof sr)};var Pr=function(){this._geom=null;var t=arguments[0];this._geom=t};Pr.prototype.locate=function(t){return Pr.locate(t,this._geom)};Pr.prototype.interfaces_=function(){return[Qo]};Pr.prototype.getClass=function(){return Pr};Pr.isPointInRing=function(t,r){return r.getEnvelopeInternal().intersects(t)?G.isPointInRing(t,r.getCoordinates()):!1};Pr.containsPointInPolygon=function(t,r){if(r.isEmpty())return!1;var n=r.getExteriorRing();if(!Pr.isPointInRing(t,n))return!1;for(var i=0;i<r.getNumInteriorRing();i++){var o=r.getInteriorRingN(i);if(Pr.isPointInRing(t,o))return!1}return!0};Pr.containsPoint=function(t,r){if(r instanceof be)return Pr.containsPointInPolygon(t,r);if(r instanceof sr)for(var n=new An(r);n.hasNext();){var i=n.next();if(i!==r&&Pr.containsPoint(t,i))return!0}return!1};Pr.locate=function(t,r){return r.isEmpty()?L.EXTERIOR:Pr.containsPoint(t,r)?L.INTERIOR:L.EXTERIOR};var Qe=function(){this._edgeMap=new Je,this._edgeList=null,this._ptInAreaLocation=[L.NONE,L.NONE]};Qe.prototype.getNextCW=function(t){this.getEdges();var r=this._edgeList.indexOf(t),n=r-1;return r===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Qe.prototype.propagateSideLabels=function(t){for(var r=L.NONE,n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.isArea(t)&&o.getLocation(t,T.LEFT)!==L.NONE&&(r=o.getLocation(t,T.LEFT))}if(r===L.NONE)return null;for(var s=r,a=this.iterator();a.hasNext();){var u=a.next(),f=u.getLabel();if(f.getLocation(t,T.ON)===L.NONE&&f.setLocation(t,T.ON,s),f.isArea(t)){var l=f.getLocation(t,T.LEFT),c=f.getLocation(t,T.RIGHT);if(c!==L.NONE){if(c!==s)throw new ei("side location conflict",u.getCoordinate());l===L.NONE&&ut.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),s=l}else ut.isTrue(f.getLocation(t,T.LEFT)===L.NONE,"found single null side"),f.setLocation(t,T.RIGHT,s),f.setLocation(t,T.LEFT,s)}}};Qe.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var r=t.next();return r.getCoordinate()};Qe.prototype.print=function(t){ke.out.println("EdgeEndStar:   "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};Qe.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Qe.prototype.checkAreaLabelsConsistent=function(t){var r=this.getEdges();if(r.size()<=0)return!0;var n=r.size()-1,i=r.get(n).getLabel(),o=i.getLocation(t,T.LEFT);ut.isTrue(o!==L.NONE,"Found unlabelled area edge");for(var s=o,a=this.iterator();a.hasNext();){var u=a.next(),f=u.getLabel();ut.isTrue(f.isArea(t),"Found non-area edge");var l=f.getLocation(t,T.LEFT),c=f.getLocation(t,T.RIGHT);if(l===c||c!==s)return!1;s=l}return!0};Qe.prototype.findIndex=function(t){var r=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var i=r._edgeList.get(n);if(i===t)return n}return-1};Qe.prototype.iterator=function(){return this.getEdges().iterator()};Qe.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new B(this._edgeMap.values())),this._edgeList};Qe.prototype.getLocation=function(t,r,n){return this._ptInAreaLocation[t]===L.NONE&&(this._ptInAreaLocation[t]=Pr.locate(r,n[t].getGeometry())),this._ptInAreaLocation[t]};Qe.prototype.toString=function(){var t=new Nn;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var r=this.iterator();r.hasNext();){var n=r.next();t.append(n),t.append(`
`)}return t.toString()};Qe.prototype.computeEdgeEndLabels=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();n.computeLabel(t)}};Qe.prototype.computeLabelling=function(t){var r=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel(),a=0;a<2;a++)s.isLine(a)&&s.getLocation(a)===L.BOUNDARY&&(n[a]=!0);for(var u=this.iterator();u.hasNext();)for(var f=u.next(),l=f.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var h=L.NONE;if(n[c])h=L.EXTERIOR;else{var p=f.getCoordinate();h=r.getLocation(c,p,t)}l.setAllLocationsIfNull(c,h)}};Qe.prototype.getDegree=function(){return this._edgeMap.size()};Qe.prototype.insertEdgeEnd=function(t,r){this._edgeMap.put(t,r),this._edgeList=null};Qe.prototype.interfaces_=function(){return[]};Qe.prototype.getClass=function(){return Qe};var Lx=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=0;a<this._resultAreaEdgeList.size();a++){var u=n._resultAreaEdgeList.get(a),f=u.getSym();if(u.getLabel().isArea())switch(i===null&&u.isInResult()&&(i=u),s){case n._SCANNING_FOR_INCOMING:if(!f.isInResult())continue;o=f,s=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!u.isInResult())continue;o.setNext(u),s=n._SCANNING_FOR_INCOMING;break}}if(s===this._LINKING_TO_OUTGOING){if(i===null)throw new ei("no outgoing dirEdge found",this.getCoordinate());ut.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},t.prototype.insert=function(n){var i=n;this.insertEdgeEnd(i,i)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var o=n.get(0);if(i===1)return o;var s=n.get(i-1),a=o.getQuadrant(),u=s.getQuadrant();return Zt.isNorthern(a)&&Zt.isNorthern(u)?o:!Zt.isNorthern(a)&&!Zt.isNorthern(u)?s:o.getDy()!==0?o:s.getDy()!==0?s:(ut.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){ke.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();n.print("out "),o.print(n),n.println(),n.print("in "),o.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new B;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&n._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var i=this.iterator();i.hasNext();){var o=i.next(),s=o.getLabel();s.setAllLocationsIfNull(0,n.getLocation(0)),s.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var i=null,o=null,s=this._edgeList.size()-1;s>=0;s--){var a=n._edgeList.get(s),u=a.getSym();o===null&&(o=u),i!==null&&u.setNext(i),i=a}o.setNext(i)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),s=i.getDepth(T.LEFT),a=i.getDepth(T.RIGHT),u=this.computeDepths(o+1,this._edgeList.size(),s),f=this.computeDepths(0,o,u);if(f!==a)throw new ei("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],h=arguments[2],p=h,d=l;d<c;d++){var m=n._edgeList.get(d);m.setEdgeDepths(T.RIGHT,p),p=m.getDepth(T.LEFT)}return p}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var i=this,o=null,s=null,a=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var f=i._resultAreaEdgeList.get(u),l=f.getSym();switch(o===null&&f.getEdgeRing()===n&&(o=f),a){case i._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;s=l,a=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(f.getEdgeRing()!==n)continue;s.setNextMin(f),a=i._SCANNING_FOR_INCOMING;break}}a===this._LINKING_TO_OUTGOING&&(ut.isTrue(o!==null,"found null for first outgoing dirEdge"),ut.isTrue(o.getEdgeRing()===n,"unable to link last incoming dirEdge"),s.setNextMin(o))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&n++}return n}else if(arguments.length===1){for(var s=arguments[0],a=0,u=this.iterator();u.hasNext();){var f=u.next();f.getEdgeRing()===s&&a++}return a}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=L.NONE,i=this.iterator();i.hasNext();){var o=i.next(),s=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){n=L.INTERIOR;break}if(s.isInResult()){n=L.EXTERIOR;break}}}if(n===L.NONE)return null;for(var a=n,u=this.iterator();u.hasNext();){var f=u.next(),l=f.getSym();f.isLineEdge()?f.getEdge().setCovered(a===L.INTERIOR):(f.isInResult()&&(a=L.EXTERIOR),l.isInResult()&&(a=L.INTERIOR))}},t.prototype.computeLabelling=function(n){var i=this;e.prototype.computeLabelling.call(this,n),this._label=new Kt(L.NONE);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getEdge(),u=a.getLabel(),f=0;f<2;f++){var l=u.getLocation(f);(l===L.INTERIOR||l===L.BOUNDARY)&&i._label.setLocation(f,L.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Qe),zg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new Iu(n,new Lx)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Wo),di=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};di.prototype.compareTo=function(t){var r=t,n=di.compareOriented(this._pts,this._orientation,r._pts,r._orientation);return n};di.prototype.interfaces_=function(){return[Xr]};di.prototype.getClass=function(){return di};di.orientation=function(t){return ct.increasingDirection(t)===1};di.compareOriented=function(t,r,n,i){for(var o=r?1:-1,s=i?1:-1,a=r?t.length:-1,u=i?n.length:-1,f=r?0:t.length-1,l=i?0:n.length-1;;){var c=t[f].compareTo(n[l]);if(c!==0)return c;f+=o,l+=s;var h=f===a,p=l===u;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var rn=function(){this._edges=new B,this._ocaMap=new Je};rn.prototype.print=function(t){var r=this;t.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=r._edges.get(n);n>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),s=0;s<o.length;s++)s>0&&t.print(","),t.print(o[s].x+" "+o[s].y);t.println(")")}t.print(")  ")};rn.prototype.addAll=function(t){for(var r=this,n=t.iterator();n.hasNext();)r.add(n.next())};rn.prototype.findEdgeIndex=function(t){for(var r=this,n=0;n<this._edges.size();n++)if(r._edges.get(n).equals(t))return n;return-1};rn.prototype.iterator=function(){return this._edges.iterator()};rn.prototype.getEdges=function(){return this._edges};rn.prototype.get=function(t){return this._edges.get(t)};rn.prototype.findEqualEdge=function(t){var r=new di(t.getCoordinates()),n=this._ocaMap.get(r);return n};rn.prototype.add=function(t){this._edges.add(t);var r=new di(t.getCoordinates());this._ocaMap.put(r,t)};rn.prototype.interfaces_=function(){return[]};rn.prototype.getClass=function(){return rn};var Fi=function(){};Fi.prototype.processIntersections=function(t,r,n,i){};Fi.prototype.isDone=function(){};Fi.prototype.interfaces_=function(){return[]};Fi.prototype.getClass=function(){return Fi};var Rr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Rr.prototype.isTrivialIntersection=function(t,r,n,i){if(t===n&&this._li.getIntersectionNum()===1){if(Rr.isAdjacentSegments(r,i))return!0;if(t.isClosed()){var o=t.size()-1;if(r===0&&i===o||i===0&&r===o)return!0}}return!1};Rr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Rr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Rr.prototype.getLineIntersector=function(){return this._li};Rr.prototype.hasProperIntersection=function(){return this._hasProper};Rr.prototype.processIntersections=function(t,r,n,i){if(t===n&&r===i)return null;this.numTests++;var o=t.getCoordinates()[r],s=t.getCoordinates()[r+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,r,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Rr.prototype.hasIntersection=function(){return this._hasIntersection};Rr.prototype.isDone=function(){return!1};Rr.prototype.hasInteriorIntersection=function(){return this._hasInterior};Rr.prototype.interfaces_=function(){return[Fi]};Rr.prototype.getClass=function(){return Rr};Rr.isAdjacentSegments=function(t,r){return Math.abs(t-r)===1};var xn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],r=arguments[1],n=arguments[2];this.coord=new P(t),this.segmentIndex=r,this.dist=n};xn.prototype.getSegmentIndex=function(){return this.segmentIndex};xn.prototype.getCoordinate=function(){return this.coord};xn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};xn.prototype.compareTo=function(t){var r=t;return this.compare(r.segmentIndex,r.dist)};xn.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};xn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};xn.prototype.getDistance=function(){return this.dist};xn.prototype.compare=function(t,r){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<r?-1:this.dist>r?1:0};xn.prototype.interfaces_=function(){return[Xr]};xn.prototype.getClass=function(){return xn};var Gn=function(){this._nodeMap=new Je,this.edge=null;var t=arguments[0];this.edge=t};Gn.prototype.print=function(t){t.println("Intersections:");for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};Gn.prototype.iterator=function(){return this._nodeMap.values().iterator()};Gn.prototype.addSplitEdges=function(t){var r=this;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=r.createSplitEdge(i,o);t.add(s),i=o}};Gn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};Gn.prototype.createSplitEdge=function(t,r){var n=this,i=r.segmentIndex-t.segmentIndex+2,o=this.edge.pts[r.segmentIndex],s=r.dist>0||!r.coord.equals2D(o);s||i--;var a=new Array(i).fill(null),u=0;a[u++]=new P(t.coord);for(var f=t.segmentIndex+1;f<=r.segmentIndex;f++)a[u++]=n.edge.pts[f];return s&&(a[u]=r.coord),new Ua(a,new Kt(this.edge._label))};Gn.prototype.add=function(t,r,n){var i=new xn(t,r,n),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};Gn.prototype.isIntersection=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();if(n.coord.equals(t))return!0}return!1};Gn.prototype.interfaces_=function(){return[]};Gn.prototype.getClass=function(){return Gn};var Bi=function(){};Bi.prototype.getChainStartIndices=function(t){var r=this,n=0,i=new B;i.add(new vn(n));do{var o=r.findChainEnd(t,n);i.add(new vn(o)),n=o}while(n<t.length-1);var s=Bi.toIntArray(i);return s};Bi.prototype.findChainEnd=function(t,r){for(var n=Zt.quadrant(t[r],t[r+1]),i=r+1;i<t.length;){var o=Zt.quadrant(t[i-1],t[i]);if(o!==n)break;i++}return i-1};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};Bi.toIntArray=function(t){for(var r=new Array(t.size()).fill(null),n=0;n<r.length;n++)r[n]=t.get(n).intValue();return r};var ni=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var r=new Bi;this.startIndex=r.getChainStartIndices(this.pts)};ni.prototype.getCoordinates=function(){return this.pts};ni.prototype.getMaxX=function(t){var r=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return r>n?r:n};ni.prototype.getMinX=function(t){var r=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return r<n?r:n};ni.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],r,r.startIndex[n],r.startIndex[n+1],i)}else if(arguments.length===6){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],f=arguments[4],l=arguments[5],c=this.pts[o],h=this.pts[s],p=a.pts[u],d=a.pts[f];if(s-o===1&&f-u===1)return l.addIntersections(this.e,o,a.e,u),null;if(this.env1.init(c,h),this.env2.init(p,d),!this.env1.intersects(this.env2))return null;var m=Math.trunc((o+s)/2),x=Math.trunc((u+f)/2);o<m&&(u<x&&this.computeIntersectsForChain(o,m,a,u,x,l),x<f&&this.computeIntersectsForChain(o,m,a,x,f,l)),m<s&&(u<x&&this.computeIntersectsForChain(m,s,a,u,x,l),x<f&&this.computeIntersectsForChain(m,s,a,x,f,l))}};ni.prototype.getStartIndexes=function(){return this.startIndex};ni.prototype.computeIntersects=function(t,r){for(var n=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)n.computeIntersectsForChain(i,t,o,r)};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};var Ge=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var r=0;r<2;r++)for(var n=0;n<3;n++)t._depth[r][n]=e.NULL_VALUE},Xg={NULL_VALUE:{configurable:!0}};Ge.prototype.getDepth=function(t,r){return this._depth[t][r]};Ge.prototype.setDepth=function(t,r,n){this._depth[t][r]=n};Ge.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var r=0;r<2;r++)for(var n=0;n<3;n++)if(t._depth[r][n]!==Ge.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===Ge.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return this._depth[o][s]===Ge.NULL_VALUE}};Ge.prototype.normalize=function(){for(var t=this,r=0;r<2;r++)if(!t.isNull(r)){var n=t._depth[r][1];t._depth[r][2]<n&&(n=t._depth[r][2]),n<0&&(n=0);for(var i=1;i<3;i++){var o=0;t._depth[r][i]>n&&(o=1),t._depth[r][i]=o}}};Ge.prototype.getDelta=function(t){return this._depth[t][T.RIGHT]-this._depth[t][T.LEFT]};Ge.prototype.getLocation=function(t,r){return this._depth[t][r]<=0?L.EXTERIOR:L.INTERIOR};Ge.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Ge.prototype.add=function(){var t=this;if(arguments.length===1)for(var r=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var o=r.getLocation(n,i);(o===L.EXTERIOR||o===L.INTERIOR)&&(t.isNull(n,i)?t._depth[n][i]=Ge.depthAtLocation(o):t._depth[n][i]+=Ge.depthAtLocation(o))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];u===L.INTERIOR&&this._depth[s][a]++}};Ge.prototype.interfaces_=function(){return[]};Ge.prototype.getClass=function(){return Ge};Ge.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:Ge.NULL_VALUE};Xg.NULL_VALUE.get=function(){return-1};Object.defineProperties(Ge,Xg);var Ua=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Gn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ge,this._depthDelta=0,arguments.length===1){var r=arguments[0];t.call(this,r,null)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var i=new t(n,Kt.toLineLabel(this._label));return i},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var i=this;if(!(n instanceof t))return!1;var o=n;if(this.pts.length!==o.pts.length)return!1;for(var s=!0,a=!0,u=this.pts.length,f=0;f<this.pts.length;f++)if(i.pts[f].equals2D(o.pts[f])||(s=!1),i.pts[f].equals2D(o.pts[--u])||(a=!1),!s&&!a)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var i=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&n.print(","),n.print(i.pts[o].x+" "+i.pts[o].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var i=this;n.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)n.print(i.pts[o]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ni(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new W;for(var i=0;i<this.pts.length;i++)n._env.expandToInclude(n.pts[i])}return this._env},t.prototype.addIntersection=function(n,i,o,s){var a=new P(n.getIntersection(s)),u=i,f=n.getEdgeDistance(o,s),l=u+1;if(l<this.pts.length){var c=this.pts[l];a.equals2D(c)&&(u=l,f=0)}this.eiList.add(a,u,f)},t.prototype.toString=function(){var n=this,i=new Nn;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(n.pts[o].x+" "+n.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},t.prototype.isPointwiseEqual=function(n){var i=this;if(this.pts.length!==n.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(n.pts[o]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,i,o){for(var s=this,a=0;a<n.getIntersectionNum();a++)s.addIntersection(n,i,o,a)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,T.ON),n.getLocation(1,T.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,T.LEFT),n.getLocation(1,T.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,T.RIGHT),n.getLocation(1,T.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Or),ir=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new rn,this._bufParams=t||null};ir.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};ir.prototype.insertUniqueEdge=function(t){var r=this._edgeList.findEqualEdge(t);if(r!==null){var n=r.getLabel(),i=t.getLabel();r.isPointwiseEqual(t)||(i=new Kt(t.getLabel()),i.flip()),n.merge(i);var o=ir.depthDelta(i),s=r.getDepthDelta(),a=s+o;r.setDepthDelta(a)}else this._edgeList.add(t),t.setDepthDelta(ir.depthDelta(t.getLabel()))};ir.prototype.buildSubgraphs=function(t,r){for(var n=new B,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getRightmostCoordinate(),a=new no(n),u=a.getDepth(s);o.computeDepth(u),o.findResultEdges(),n.add(o),r.add(o.getDirectedEdges(),o.getNodes())}};ir.prototype.createSubgraphs=function(t){for(var r=new B,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var o=new ar;o.create(i),r.add(o)}}return en.sort(r,en.reverseOrder()),r};ir.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};ir.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var r=new _l,n=new Yi;return n.setPrecisionModel(t),r.setSegmentIntersector(new Rr(n)),r};ir.prototype.buffer=function(t,r){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new dr(n,this._bufParams),o=new zr(t,r,i),s=o.getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this._graph=new pe(new zg),this._graph.addEdges(this._edgeList.getEdges());var a=this.createSubgraphs(this._graph),u=new Ir(this._geomFact);this.buildSubgraphs(a,u);var f=u.getPolygons();if(f.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(f);return l};ir.prototype.computeNodedEdges=function(t,r){var n=this,i=this.getNoder(r);i.computeNodes(t);for(var o=i.getNodedSubstrings(),s=o.iterator();s.hasNext();){var a=s.next(),u=a.getCoordinates();if(!(u.length===2&&u[0].equals2D(u[1]))){var f=a.getData(),l=new Ua(a.getCoordinates(),new Kt(f));n.insertUniqueEdge(l)}}};ir.prototype.setNoder=function(t){this._workingNoder=t};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};ir.depthDelta=function(t){var r=t.getLocation(0,T.LEFT),n=t.getLocation(0,T.RIGHT);return r===L.INTERIOR&&n===L.EXTERIOR?1:r===L.EXTERIOR&&n===L.INTERIOR?-1:0};ir.convertSegStrings=function(t){for(var r=new lt,n=new B;t.hasNext();){var i=t.next(),o=r.createLineString(i.getCoordinates());n.add(o)}return r.buildGeometry(n)};var yi=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],r=arguments[1];this._noder=t,this._scaleFactor=r,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=o,this._offsetY=s,this._isScaled=!this.isIntegerPrecision()}};yi.prototype.rescale=function(){var t=this;if(tt(arguments[0],Ce))for(var r=arguments[0],n=r.iterator();n.hasNext();){var i=n.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=0;s<o.length;s++)o[s].x=o[s].x/t._scaleFactor+t._offsetX,o[s].y=o[s].y/t._scaleFactor+t._offsetY;o.length===2&&o[0].equals2D(o[1])&&ke.out.println(o)}};yi.prototype.scale=function(){var t=this;if(tt(arguments[0],Ce)){for(var r=arguments[0],n=new B,i=r.iterator();i.hasNext();){var o=i.next();n.add(new Ee(t.scale(o.getCoordinates()),o.getData()))}return n}else if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),u=0;u<s.length;u++)a[u]=new P(Math.round((s[u].x-t._offsetX)*t._scaleFactor),Math.round((s[u].y-t._offsetY)*t._scaleFactor),s[u].z);var f=ct.removeRepeatedPoints(a);return f}};yi.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};yi.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};yi.prototype.computeNodes=function(t){var r=t;this._isScaled&&(r=this.scale(t)),this._noder.computeNodes(r)};yi.prototype.interfaces_=function(){return[Di]};yi.prototype.getClass=function(){return yi};var wn=function(){this._li=new Yi,this._segStrings=null;var t=arguments[0];this._segStrings=t},Ug={fact:{configurable:!0}};wn.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var n=r.next(),i=n.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(arguments.length===2){for(var o=arguments[0],s=arguments[1],a=s.iterator();a.hasNext();)for(var u=a.next(),f=u.getCoordinates(),l=1;l<f.length-1;l++)if(f[l].equals(o))throw new jn("found endpt/interior pt intersection at index "+l+" :pt "+o)}};wn.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();)for(var n=r.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();t.checkInteriorIntersections(n,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.getCoordinates(),f=a.getCoordinates(),l=0;l<u.length-1;l++)for(var c=0;c<f.length-1;c++)t.checkInteriorIntersections(s,l,a,c);else if(arguments.length===4){var h=arguments[0],p=arguments[1],d=arguments[2],m=arguments[3];if(h===d&&p===m)return null;var x=h.getCoordinates()[p],_=h.getCoordinates()[p+1],g=d.getCoordinates()[m],v=d.getCoordinates()[m+1];if(this._li.computeIntersection(x,_,g,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,x,_)||this.hasInteriorIntersection(this._li,g,v)))throw new jn("found non-noded intersection at "+x+"-"+_+" and "+g+"-"+v)}};wn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};wn.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var n=r.next();t.checkCollapses(n)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length-2;s++)t.checkCollapse(o[s],o[s+1],o[s+2])};wn.prototype.hasInteriorIntersection=function(t,r,n){for(var i=0;i<t.getIntersectionNum();i++){var o=t.getIntersection(i);if(!(o.equals(r)||o.equals(n)))return!0}return!1};wn.prototype.checkCollapse=function(t,r,n){if(t.equals(n))throw new jn("found non-noded collapse at "+wn.fact.createLineString([t,r,n]))};wn.prototype.interfaces_=function(){return[]};wn.prototype.getClass=function(){return wn};Ug.fact.get=function(){return new lt};Object.defineProperties(wn,Ug);var yr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],r=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=r,this._li=n,r<=0)throw new le("Scale factor must be non-zero");r!==1&&(this._pt=new P(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new P,this._p1Scaled=new P),this.initCorners(this._pt)},Yg={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};yr.prototype.intersectsScaled=function(t,r){var n=Math.min(t.x,r.x),i=Math.max(t.x,r.x),o=Math.min(t.y,r.y),s=Math.max(t.y,r.y),a=this._maxx<n||this._minx>i||this._maxy<o||this._miny>s;if(a)return!1;var u=this.intersectsToleranceSquare(t,r);return ut.isTrue(!(a&&u),"Found bad envelope test"),u};yr.prototype.initCorners=function(t){var r=.5;this._minx=t.x-r,this._maxx=t.x+r,this._miny=t.y-r,this._maxy=t.y+r,this._corner[0]=new P(this._maxx,this._maxy),this._corner[1]=new P(this._minx,this._maxy),this._corner[2]=new P(this._minx,this._miny),this._corner[3]=new P(this._maxx,this._miny)};yr.prototype.intersects=function(t,r){return this._scaleFactor===1?this.intersectsScaled(t,r):(this.copyScaled(t,this._p0Scaled),this.copyScaled(r,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};yr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};yr.prototype.getCoordinate=function(){return this._originalPt};yr.prototype.copyScaled=function(t,r){r.x=this.scale(t.x),r.y=this.scale(t.y)};yr.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=yr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};yr.prototype.intersectsPixelClosure=function(t,r){return this._li.computeIntersection(t,r,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,r,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,r,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,r,this._corner[3],this._corner[0]),this._li.hasIntersection()))};yr.prototype.intersectsToleranceSquare=function(t,r){var n=!1,i=!1;return this._li.computeIntersection(t,r,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,r,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,r,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,r,this._corner[3],this._corner[0]),this._li.isProper())||n&&i||t.equals(this._pt)||r.equals(this._pt))};yr.prototype.addSnappedNode=function(t,r){var n=t.getCoordinate(r),i=t.getCoordinate(r+1);return this.intersects(n,i)?(t.addIntersection(this.getCoordinate(),r),!0):!1};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};Yg.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(yr,Yg);var $s=function(){this.tempEnv1=new W,this.selectedSegment=new K};$s.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],r=arguments[1];t.getLineSegment(r,this.selectedSegment),this.select(this.selectedSegment)}}};$s.prototype.interfaces_=function(){return[]};$s.prototype.getClass=function(){return $s};var Zo=function(){this._index=null;var t=arguments[0];this._index=t},Vg={HotPixelSnapAction:{configurable:!0}};Zo.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2],o=r.getSafeEnvelope(),s=new Hg(r,n,i);return this._index.query(o,{interfaces_:function(){return[gi]},visitItem:function(a){var u=a;u.select(o,s)}}),s.isNodeAdded()}};Zo.prototype.interfaces_=function(){return[]};Zo.prototype.getClass=function(){return Zo};Vg.HotPixelSnapAction.get=function(){return Hg};Object.defineProperties(Zo,Vg);var Hg=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var r=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=r,this._parentEdge=n,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1],o=n.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($s),io=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new B};io.prototype.processIntersections=function(t,r,n,i){var o=this;if(t===n&&r===i)return null;var s=t.getCoordinates()[r],a=t.getCoordinates()[r+1],u=n.getCoordinates()[i],f=n.getCoordinates()[i+1];if(this._li.computeIntersection(s,a,u,f),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)o._interiorIntersections.add(o._li.getIntersection(l));t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1)}};io.prototype.isDone=function(){return!1};io.prototype.getInteriorIntersections=function(){return this._interiorIntersections};io.prototype.interfaces_=function(){return[Fi]};io.prototype.getClass=function(){return io};var kn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Yi,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};kn.prototype.checkCorrectness=function(t){var r=Ee.getNodedSubstrings(t),n=new wn(r);try{n.checkValid()}catch(i){if(i instanceof Lg)i.printStackTrace();else throw i}finally{}};kn.prototype.getNodedSubstrings=function(){return Ee.getNodedSubstrings(this._nodedSegStrings)};kn.prototype.snapRound=function(t,r){var n=this.findInteriorIntersections(t,r);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)};kn.prototype.findInteriorIntersections=function(t,r){var n=new io(r);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()};kn.prototype.computeVertexSnaps=function(){var t=this;if(tt(arguments[0],Ce))for(var r=arguments[0],n=r.iterator();n.hasNext();){var i=n.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof Ee)for(var o=arguments[0],s=o.getCoordinates(),a=0;a<s.length;a++){var u=new yr(s[a],t._scaleFactor,t._li),f=t._pointSnapper.snap(u,o,a);f&&o.addIntersection(s[a],a)}};kn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new _l,this._pointSnapper=new Zo(this._noder.getIndex()),this.snapRound(t,this._li)};kn.prototype.computeIntersectionSnaps=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next(),o=new yr(i,r._scaleFactor,r._li);r._pointSnapper.snap(o)}};kn.prototype.interfaces_=function(){return[Di]};kn.prototype.getClass=function(){return kn};var Be=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Vt,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this._argGeom=r,this._bufParams=n}},cs={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Be.prototype.bufferFixedPrecision=function(t){var r=new yi(new kn(new Ht(1)),t.getScale()),n=new ir(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(r),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Be.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var r=Be.MAX_PRECISION_DIGITS;r>=0;r--){try{t.bufferReducedPrecision(r)}catch(s){if(s instanceof ei)t._saveException=s;else throw s}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],i=Be.precisionScaleFactor(this._argGeom,this._distance,n),o=new Ht(i);this.bufferFixedPrecision(o)}};Be.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ht.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};Be.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};Be.prototype.bufferOriginalPrecision=function(){try{var t=new ir(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(r){if(r instanceof jn)this._saveException=r;else throw r}finally{}};Be.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};Be.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};Be.prototype.interfaces_=function(){return[]};Be.prototype.getClass=function(){return Be};Be.bufferOp=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new Be(t),i=n.getResultGeometry(r);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof j&&typeof arguments[1]=="number"){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Be(o);u.setQuadrantSegments(a);var f=u.getResultGeometry(s);return f}else if(arguments[2]instanceof Vt&&arguments[0]instanceof j&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],h=arguments[2],p=new Be(l,h),d=p.getResultGeometry(c);return d}}else if(arguments.length===4){var m=arguments[0],x=arguments[1],_=arguments[2],g=arguments[3],v=new Be(m);v.setQuadrantSegments(_),v.setEndCapStyle(g);var y=v.getResultGeometry(x);return y}};Be.precisionScaleFactor=function(t,r,n){var i=t.getEnvelopeInternal(),o=Lr.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),s=r>0?r:0,a=o+2*s,u=Math.trunc(Math.log(a)/Math.log(10)+1),f=n-u,l=Math.pow(10,f);return l};cs.CAP_ROUND.get=function(){return Vt.CAP_ROUND};cs.CAP_BUTT.get=function(){return Vt.CAP_FLAT};cs.CAP_FLAT.get=function(){return Vt.CAP_FLAT};cs.CAP_SQUARE.get=function(){return Vt.CAP_SQUARE};cs.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Be,cs);var er=function(){this._pt=[new P,new P],this._distance=st.NaN,this._isNull=!0};er.prototype.getCoordinates=function(){return this._pt};er.prototype.getCoordinate=function(t){return this._pt[t]};er.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i<this._distance&&this.initialize(r,n,i)}};er.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],r=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(r),this._distance=t.distance(r),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};er.prototype.getDistance=function(){return this._distance};er.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i>this._distance&&this.initialize(r,n,i)}};er.prototype.interfaces_=function(){return[]};er.prototype.getClass=function(){return er};var On=function(){};On.prototype.interfaces_=function(){return[]};On.prototype.getClass=function(){return On};On.computeDistance=function(){if(arguments[2]instanceof er&&arguments[0]instanceof ve&&arguments[1]instanceof P)for(var t=arguments[0],r=arguments[1],n=arguments[2],i=t.getCoordinates(),o=new K,s=0;s<i.length-1;s++){o.setCoordinates(i[s],i[s+1]);var a=o.closestPoint(r);n.setMinimum(a,r)}else if(arguments[2]instanceof er&&arguments[0]instanceof be&&arguments[1]instanceof P){var u=arguments[0],f=arguments[1],l=arguments[2];On.computeDistance(u.getExteriorRing(),f,l);for(var c=0;c<u.getNumInteriorRing();c++)On.computeDistance(u.getInteriorRingN(c),f,l)}else if(arguments[2]instanceof er&&arguments[0]instanceof j&&arguments[1]instanceof P){var h=arguments[0],p=arguments[1],d=arguments[2];if(h instanceof ve)On.computeDistance(h,p,d);else if(h instanceof be)On.computeDistance(h,p,d);else if(h instanceof sr)for(var m=h,x=0;x<m.getNumGeometries();x++){var _=m.getGeometryN(x);On.computeDistance(_,p,d)}else d.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof er&&arguments[0]instanceof K&&arguments[1]instanceof P){var g=arguments[0],v=arguments[1],y=arguments[2],E=g.closestPoint(v);y.setMinimum(E,v)}};var Gi=function(t){this._maxPtDist=new er,this._inputGeom=t||null},El={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Gi.prototype.computeMaxMidpointDistance=function(t){var r=new mi(this._inputGeom);t.apply(r),this._maxPtDist.setMaximum(r.getMaxPointDistance())};Gi.prototype.computeMaxVertexDistance=function(t){var r=new oo(this._inputGeom);t.apply(r),this._maxPtDist.setMaximum(r.getMaxPointDistance())};Gi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};Gi.prototype.getDistancePoints=function(){return this._maxPtDist};Gi.prototype.interfaces_=function(){return[]};Gi.prototype.getClass=function(){return Gi};El.MaxPointDistanceFilter.get=function(){return oo};El.MaxMidpointDistanceFilter.get=function(){return mi};Object.defineProperties(Gi,El);var oo=function(t){this._maxPtDist=new er,this._minPtDist=new er,this._geom=t||null};oo.prototype.filter=function(t){this._minPtDist.initialize(),On.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};oo.prototype.getMaxPointDistance=function(){return this._maxPtDist};oo.prototype.interfaces_=function(){return[Dn]};oo.prototype.getClass=function(){return oo};var mi=function(t){this._maxPtDist=new er,this._minPtDist=new er,this._geom=t||null};mi.prototype.filter=function(t,r){if(r===0)return null;var n=t.getCoordinate(r-1),i=t.getCoordinate(r),o=new P((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),On.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};mi.prototype.isDone=function(){return!1};mi.prototype.isGeometryChanged=function(){return!1};mi.prototype.getMaxPointDistance=function(){return this._maxPtDist};mi.prototype.interfaces_=function(){return[jr]};mi.prototype.getClass=function(){return mi};var $n=function(t){this._comps=t||null};$n.prototype.filter=function(t){t instanceof be&&this._comps.add(t)};$n.prototype.interfaces_=function(){return[yn]};$n.prototype.getClass=function(){return $n};$n.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return $n.getPolygons(t,new B)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r instanceof be?n.add(r):r instanceof sr&&r.apply(new $n(n)),n}};var Fe=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this._lines=r,this._isForcedToLineString=n}};Fe.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Tn){var r=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(r),null}t instanceof ve&&this._lines.add(t)};Fe.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};Fe.prototype.interfaces_=function(){return[ti]};Fe.prototype.getClass=function(){return Fe};Fe.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Fe.getLines(t))}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r.getFactory().buildGeometry(Fe.getLines(r,n))}};Fe.getLines=function(){if(arguments.length===1){var t=arguments[0];return Fe.getLines(t,!1)}else if(arguments.length===2){if(tt(arguments[0],Ce)&&tt(arguments[1],Ce)){for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();Fe.getLines(o,n)}return n}else if(arguments[0]instanceof j&&typeof arguments[1]=="boolean"){var s=arguments[0],a=arguments[1],u=new B;return s.apply(new Fe(u,a)),u}else if(arguments[0]instanceof j&&tt(arguments[1],Ce)){var f=arguments[0],l=arguments[1];return f instanceof ve?l.add(f):f.apply(new Fe(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&tt(arguments[0],Ce)&&tt(arguments[1],Ce)){for(var c=arguments[0],h=arguments[1],p=arguments[2],d=c.iterator();d.hasNext();){var m=d.next();Fe.getLines(m,h,p)}return h}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof j&&tt(arguments[1],Ce)){var x=arguments[0],_=arguments[1],g=arguments[2];return x.apply(new Fe(_,g)),_}}};var nn=function(){if(this._boundaryRule=kr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new le("Rule must be non-null");this._boundaryRule=t}}};nn.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof P&&arguments[1]instanceof be){var r=arguments[0],n=arguments[1];if(n.isEmpty())return L.EXTERIOR;var i=n.getExteriorRing(),o=this.locateInPolygonRing(r,i);if(o===L.EXTERIOR)return L.EXTERIOR;if(o===L.BOUNDARY)return L.BOUNDARY;for(var s=0;s<n.getNumInteriorRing();s++){var a=n.getInteriorRingN(s),u=t.locateInPolygonRing(r,a);if(u===L.INTERIOR)return L.EXTERIOR;if(u===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}else if(arguments[0]instanceof P&&arguments[1]instanceof ve){var f=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(f))return L.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(f.equals(c[0])||f.equals(c[c.length-1]))?L.BOUNDARY:G.isOnLine(f,c)?L.INTERIOR:L.EXTERIOR}else if(arguments[0]instanceof P&&arguments[1]instanceof wr){var h=arguments[0],p=arguments[1],d=p.getCoordinate();return d.equals2D(h)?L.INTERIOR:L.EXTERIOR}};nn.prototype.locateInPolygonRing=function(t,r){return r.getEnvelopeInternal().intersects(t)?G.locatePointInRing(t,r.getCoordinates()):L.EXTERIOR};nn.prototype.intersects=function(t,r){return this.locate(t,r)!==L.EXTERIOR};nn.prototype.updateLocationInfo=function(t){t===L.INTERIOR&&(this._isIn=!0),t===L.BOUNDARY&&this._numBoundaries++};nn.prototype.computeLocation=function(t,r){var n=this;if(r instanceof wr&&this.updateLocationInfo(this.locateInternal(t,r)),r instanceof ve)this.updateLocationInfo(this.locateInternal(t,r));else if(r instanceof be)this.updateLocationInfo(this.locateInternal(t,r));else if(r instanceof Ai)for(var i=r,o=0;o<i.getNumGeometries();o++){var s=i.getGeometryN(o);n.updateLocationInfo(n.locateInternal(t,s))}else if(r instanceof Rn)for(var a=r,u=0;u<a.getNumGeometries();u++){var f=a.getGeometryN(u);n.updateLocationInfo(n.locateInternal(t,f))}else if(r instanceof sr)for(var l=new An(r);l.hasNext();){var c=l.next();c!==r&&n.computeLocation(t,c)}};nn.prototype.locate=function(t,r){return r.isEmpty()?L.EXTERIOR:r instanceof ve?this.locateInternal(t,r):r instanceof be?this.locateInternal(t,r):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,r),this._boundaryRule.isInBoundary(this._numBoundaries)?L.BOUNDARY:this._numBoundaries>0||this._isIn?L.INTERIOR:L.EXTERIOR)};nn.prototype.interfaces_=function(){return[]};nn.prototype.getClass=function(){return nn};var rr=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],r=arguments[1];e.call(this,t,e.INSIDE_AREA,r)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Wg={INSIDE_AREA:{configurable:!0}};rr.prototype.isInsideArea=function(){return this._segIndex===rr.INSIDE_AREA};rr.prototype.getCoordinate=function(){return this._pt};rr.prototype.getGeometryComponent=function(){return this._component};rr.prototype.getSegmentIndex=function(){return this._segIndex};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};Wg.INSIDE_AREA.get=function(){return-1};Object.defineProperties(rr,Wg);var li=function(t){this._pts=t||null};li.prototype.filter=function(t){t instanceof wr&&this._pts.add(t)};li.prototype.interfaces_=function(){return[yn]};li.prototype.getClass=function(){return li};li.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof wr?en.singletonList(t):li.getPoints(t,new B)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r instanceof wr?n.add(r):r instanceof sr&&r.apply(new li(n)),n}};var so=function(){this._locations=null;var t=arguments[0];this._locations=t};so.prototype.filter=function(t){(t instanceof wr||t instanceof ve||t instanceof be)&&this._locations.add(new rr(t,0,t.getCoordinate()))};so.prototype.interfaces_=function(){return[yn]};so.prototype.getClass=function(){return so};so.getLocations=function(t){var r=new B;return t.apply(new so(r)),r};var ze=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new nn,this._minDistanceLocation=null,this._minDistance=st.MAX_VALUE,arguments.length===2){var t=arguments[0],r=arguments[1];this._geom=[t,r],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=o}};ze.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var r=new Array(2).fill(null);if(this.computeContainmentDistance(0,r),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,r)}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=1-n,s=$n.getPolygons(this._geom[n]);if(s.size()>0){var a=so.getLocations(this._geom[o]);if(this.computeContainmentDistance(a,s,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&tt(arguments[0],Kr)&&tt(arguments[1],Kr)){for(var u=arguments[0],f=arguments[1],l=arguments[2],c=0;c<u.size();c++)for(var h=u.get(c),p=0;p<f.size();p++)if(t.computeContainmentDistance(h,f.get(p),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof be){var d=arguments[0],m=arguments[1],x=arguments[2],_=d.getCoordinate();if(L.EXTERIOR!==this._ptLocator.locate(_,m))return this._minDistance=0,x[0]=d,x[1]=new rr(m,_),null}}};ze.prototype.computeMinDistanceLinesPoints=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a);if(i.computeMinDistance(s,u,n),i._minDistance<=i._terminateDistance)return null}};ze.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),r=Fe.getLines(this._geom[0]),n=Fe.getLines(this._geom[1]),i=li.getPoints(this._geom[0]),o=li.getPoints(this._geom[1]);if(this.computeMinDistanceLines(r,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(i,o,t),this.updateMinDistance(t,!1)};ze.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};ze.prototype.updateMinDistance=function(t,r){if(t[0]===null)return null;r?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};ze.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};ze.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof ve&&arguments[1]instanceof wr){var r=arguments[0],n=arguments[1],i=arguments[2];if(r.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=r.getCoordinates(),s=n.getCoordinate(),a=0;a<o.length-1;a++){var u=G.distancePointLine(s,o[a],o[a+1]);if(u<t._minDistance){t._minDistance=u;var f=new K(o[a],o[a+1]),l=f.closestPoint(s);i[0]=new rr(r,a,l),i[1]=new rr(n,0,s)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ve&&arguments[1]instanceof ve){var c=arguments[0],h=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var d=c.getCoordinates(),m=h.getCoordinates(),x=0;x<d.length-1;x++)for(var _=0;_<m.length-1;_++){var g=G.distanceLineLine(d[x],d[x+1],m[_],m[_+1]);if(g<t._minDistance){t._minDistance=g;var v=new K(d[x],d[x+1]),y=new K(m[_],m[_+1]),E=v.closestPoints(y);p[0]=new rr(c,x,E[0]),p[1]=new rr(h,_,E[1])}if(t._minDistance<=t._terminateDistance)return null}}}};ze.prototype.computeMinDistancePoints=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a),f=s.getCoordinate().distance(u.getCoordinate());if(f<i._minDistance&&(i._minDistance=f,n[0]=new rr(s,0,s.getCoordinate()),n[1]=new rr(u,0,u.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};ze.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new le("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};ze.prototype.computeMinDistanceLines=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a);if(i.computeMinDistance(s,u,n),i._minDistance<=i._terminateDistance)return null}};ze.prototype.interfaces_=function(){return[]};ze.prototype.getClass=function(){return ze};ze.distance=function(t,r){var n=new ze(t,r);return n.distance()};ze.isWithinDistance=function(t,r,n){var i=new ze(t,r,n);return i.distance()<=n};ze.nearestPoints=function(t,r){var n=new ze(t,r);return n.nearestPoints()};var He=function(){this._pt=[new P,new P],this._distance=st.NaN,this._isNull=!0};He.prototype.getCoordinates=function(){return this._pt};He.prototype.getCoordinate=function(t){return this._pt[t]};He.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i<this._distance&&this.initialize(r,n,i)}};He.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],r=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(r),this._distance=t.distance(r),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};He.prototype.toString=function(){return $r.toLineString(this._pt[0],this._pt[1])};He.prototype.getDistance=function(){return this._distance};He.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i>this._distance&&this.initialize(r,n,i)}};He.prototype.interfaces_=function(){return[]};He.prototype.getClass=function(){return He};var cn=function(){};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};cn.computeDistance=function(){if(arguments[2]instanceof He&&arguments[0]instanceof ve&&arguments[1]instanceof P)for(var t=arguments[0],r=arguments[1],n=arguments[2],i=new K,o=t.getCoordinates(),s=0;s<o.length-1;s++){i.setCoordinates(o[s],o[s+1]);var a=i.closestPoint(r);n.setMinimum(a,r)}else if(arguments[2]instanceof He&&arguments[0]instanceof be&&arguments[1]instanceof P){var u=arguments[0],f=arguments[1],l=arguments[2];cn.computeDistance(u.getExteriorRing(),f,l);for(var c=0;c<u.getNumInteriorRing();c++)cn.computeDistance(u.getInteriorRingN(c),f,l)}else if(arguments[2]instanceof He&&arguments[0]instanceof j&&arguments[1]instanceof P){var h=arguments[0],p=arguments[1],d=arguments[2];if(h instanceof ve)cn.computeDistance(h,p,d);else if(h instanceof be)cn.computeDistance(h,p,d);else if(h instanceof sr)for(var m=h,x=0;x<m.getNumGeometries();x++){var _=m.getGeometryN(x);cn.computeDistance(_,p,d)}else d.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof He&&arguments[0]instanceof K&&arguments[1]instanceof P){var g=arguments[0],v=arguments[1],y=arguments[2],E=g.closestPoint(v);y.setMinimum(E,v)}};var Br=function(){this._g0=null,this._g1=null,this._ptDist=new He,this._densifyFrac=0;var t=arguments[0],r=arguments[1];this._g0=t,this._g1=r},xl={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Br.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};Br.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new le("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};Br.prototype.compute=function(t,r){this.computeOrientedDistance(t,r,this._ptDist),this.computeOrientedDistance(r,t,this._ptDist)};Br.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};Br.prototype.computeOrientedDistance=function(t,r,n){var i=new ao(r);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new _i(r,this._densifyFrac);t.apply(o),n.setMaximum(o.getMaxPointDistance())}};Br.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};Br.prototype.interfaces_=function(){return[]};Br.prototype.getClass=function(){return Br};Br.distance=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new Br(t,r);return n.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Br(i,o);return a.setDensifyFraction(s),a.distance()}};xl.MaxPointDistanceFilter.get=function(){return ao};xl.MaxDensifiedByFractionDistanceFilter.get=function(){return _i};Object.defineProperties(Br,xl);var ao=function(){this._maxPtDist=new He,this._minPtDist=new He,this._euclideanDist=new cn,this._geom=null;var t=arguments[0];this._geom=t};ao.prototype.filter=function(t){this._minPtDist.initialize(),cn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ao.prototype.getMaxPointDistance=function(){return this._maxPtDist};ao.prototype.interfaces_=function(){return[Dn]};ao.prototype.getClass=function(){return ao};var _i=function(){this._maxPtDist=new He,this._minPtDist=new He,this._geom=null,this._numSubSegs=0;var t=arguments[0],r=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/r))};_i.prototype.filter=function(t,r){var n=this;if(r===0)return null;for(var i=t.getCoordinate(r-1),o=t.getCoordinate(r),s=(o.x-i.x)/this._numSubSegs,a=(o.y-i.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++){var f=i.x+u*s,l=i.y+u*a,c=new P(f,l);n._minPtDist.initialize(),cn.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};_i.prototype.isDone=function(){return!1};_i.prototype.isGeometryChanged=function(){return!1};_i.prototype.getMaxPointDistance=function(){return this._maxPtDist};_i.prototype.interfaces_=function(){return[jr]};_i.prototype.getClass=function(){return _i};var xr=function(t,r,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=r||null,this._result=n||null},wl={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};xr.prototype.checkMaximumDistance=function(t,r,n){var i=new Br(r,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+$r.toLineString(o[0],o[1])+")"}};xr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),r=xr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-r,this._maxValidDistance=t+r,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),xr.VERBOSE&&ke.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};xr.prototype.checkNegativeValid=function(){if(!(this._input instanceof be||this._input instanceof Rn||this._input instanceof sr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};xr.prototype.getErrorIndicator=function(){return this._errorIndicator};xr.prototype.checkMinimumDistance=function(t,r,n){var i=new ze(t,r,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+$r.toLineString(o[0],o[1])+" )"}};xr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};xr.prototype.getErrorLocation=function(){return this._errorLocation};xr.prototype.getPolygonLines=function(t){for(var r=new B,n=new Fe(r),i=$n.getPolygons(t),o=i.iterator();o.hasNext();){var s=o.next();s.apply(n)}return t.getFactory().buildGeometry(r)};xr.prototype.getErrorMessage=function(){return this._errMsg};xr.prototype.interfaces_=function(){return[]};xr.prototype.getClass=function(){return xr};wl.VERBOSE.get=function(){return!1};wl.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(xr,wl);var Xe=function(t,r,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=r||null,this._result=n||null},Il={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Xe.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Xe.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Xe.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var r=new W(this._input.getEnvelopeInternal());r.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(r)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Xe.prototype.checkDistance=function(){var t=new xr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};Xe.prototype.checkArea=function(){var t=this._input.getArea(),r=this._result.getArea();this._distance>0&&t>r&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<r&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Xe.prototype.checkPolygonal=function(){this._result instanceof be||this._result instanceof Rn||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Xe.prototype.getErrorIndicator=function(){return this._errorIndicator};Xe.prototype.getErrorLocation=function(){return this._errorLocation};Xe.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Xe.prototype.report=function(t){if(!Xe.VERBOSE)return null;ke.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};Xe.prototype.getErrorMessage=function(){return this._errorMsg};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};Xe.isValidMsg=function(t,r,n){var i=new Xe(t,r,n);return i.isValid()?null:i.getErrorMessage()};Xe.isValid=function(t,r,n){var i=new Xe(t,r,n);return!!i.isValid()};Il.VERBOSE.get=function(){return!1};Il.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Xe,Il);var In=function(){this._pts=null,this._data=null;var t=arguments[0],r=arguments[1];this._pts=t,this._data=r};In.prototype.getCoordinates=function(){return this._pts};In.prototype.size=function(){return this._pts.length};In.prototype.getCoordinate=function(t){return this._pts[t]};In.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};In.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ro.octant(this.getCoordinate(t),this.getCoordinate(t+1))};In.prototype.setData=function(t){this._data=t};In.prototype.getData=function(){return this._data};In.prototype.toString=function(){return $r.toLineString(new ye(this._pts))};In.prototype.interfaces_=function(){return[Bn]};In.prototype.getClass=function(){return In};var De=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new B,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};De.prototype.getInteriorIntersection=function(){return this._interiorIntersection};De.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};De.prototype.getIntersectionSegments=function(){return this._intSegments};De.prototype.count=function(){return this._intersectionCount};De.prototype.getIntersections=function(){return this._intersections};De.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};De.prototype.setKeepIntersections=function(t){this._keepIntersections=t};De.prototype.processIntersections=function(t,r,n,i){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&r===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(t,r)||this.isEndSegment(n,i);if(!o)return null}var s=t.getCoordinates()[r],a=t.getCoordinates()[r+1],u=n.getCoordinates()[i],f=n.getCoordinates()[i+1];this._li.computeIntersection(s,a,u,f),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=s,this._intSegments[1]=a,this._intSegments[2]=u,this._intSegments[3]=f,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};De.prototype.isEndSegment=function(t,r){return r===0||r>=t.size()-2};De.prototype.hasIntersection=function(){return this._interiorIntersection!==null};De.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};De.prototype.interfaces_=function(){return[Fi]};De.prototype.getClass=function(){return De};De.createAllIntersectionsFinder=function(t){var r=new De(t);return r.setFindAllIntersections(!0),r};De.createAnyIntersectionFinder=function(t){return new De(t)};De.createIntersectionCounter=function(t){var r=new De(t);return r.setFindAllIntersections(!0),r.setKeepIntersections(!1),r};var on=function(){this._li=new Yi,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};on.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};on.prototype.getIntersections=function(){return this._segInt.getIntersections()};on.prototype.isValid=function(){return this.execute(),this._isValid};on.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};on.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new De(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new _l;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};on.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ei(this.getErrorMessage(),this._segInt.getInteriorIntersection())};on.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+$r.toLineString(t[0],t[1])+" and "+$r.toLineString(t[2],t[3])};on.prototype.interfaces_=function(){return[]};on.prototype.getClass=function(){return on};on.computeIntersections=function(t){var r=new on(t);return r.setFindAllIntersections(!0),r.isValid(),r.getIntersections()};var ki=function e(){this._nv=null;var t=arguments[0];this._nv=new on(e.toSegmentStrings(t))};ki.prototype.checkValid=function(){this._nv.checkValid()};ki.prototype.interfaces_=function(){return[]};ki.prototype.getClass=function(){return ki};ki.toSegmentStrings=function(t){for(var r=new B,n=t.iterator();n.hasNext();){var i=n.next();r.add(new In(i.getCoordinates(),i))}return r};ki.checkValid=function(t){var r=new ki(t);r.checkValid()};var uo=function(t){this._mapOp=t};uo.prototype.map=function(t){for(var r=this,n=new B,i=0;i<t.getNumGeometries();i++){var o=r._mapOp.map(t.getGeometryN(i));o.isEmpty()||n.add(o)}return t.getFactory().createGeometryCollection(lt.toGeometryArray(n))};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};uo.map=function(t,r){var n=new uo(r);return n.map(t)};var Cn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new B,this._resultLineList=new B;var t=arguments[0],r=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=r,this._ptLocator=n};Cn.prototype.collectLines=function(t){for(var r=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();r.collectLineEdge(i,t,r._lineEdgesList),r.collectBoundaryTouchEdge(i,t,r._lineEdgesList)}};Cn.prototype.labelIsolatedLine=function(t,r){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(r));t.getLabel().setLocation(r,n)};Cn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};Cn.prototype.collectLineEdge=function(t,r,n){var i=t.getLabel(),o=t.getEdge();t.isLineEdge()&&!t.isVisited()&&at.isResultOfOp(i,r)&&!o.isCovered()&&(n.add(o),t.setVisitedEdge(!0))};Cn.prototype.findCoveredLineEdges=function(){for(var t=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();){var n=r.next();n.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),s=o.getEdge();if(o.isLineEdge()&&!s.isCoveredSet()){var a=t._op.isCoveredByA(o.getCoordinate());s.setCovered(a)}}};Cn.prototype.labelIsolatedLines=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?r.labelIsolatedLine(i,0):r.labelIsolatedLine(i,1))}};Cn.prototype.buildLines=function(t){for(var r=this,n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next(),o=r._geometryFactory.createLineString(i.getCoordinates());r._resultLineList.add(o),i.setInResult(!0)}};Cn.prototype.collectBoundaryTouchEdge=function(t,r,n){var i=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;ut.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),at.isResultOfOp(i,r)&&r===at.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))};Cn.prototype.interfaces_=function(){return[]};Cn.prototype.getClass=function(){return Cn};var fo=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new B;var t=arguments[0],r=arguments[1];this._op=t,this._geometryFactory=r};fo.prototype.filterCoveredNodeToPoint=function(t){var r=t.getCoordinate();if(!this._op.isCoveredByLA(r)){var n=this._geometryFactory.createPoint(r);this._resultPointList.add(n)}};fo.prototype.extractNonCoveredResultNodes=function(t){for(var r=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||t===at.INTERSECTION)){var o=i.getLabel();at.isResultOfOp(o,t)&&r.filterCoveredNodeToPoint(i)}}};fo.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};var mr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};mr.prototype.transformPoint=function(t,r){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};mr.prototype.transformPolygon=function(t,r){var n=this,i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);(o===null||!(o instanceof Tn)||o.isEmpty())&&(i=!1);for(var s=new B,a=0;a<t.getNumInteriorRing();a++){var u=n.transformLinearRing(t.getInteriorRingN(a),t);u===null||u.isEmpty()||(u instanceof Tn||(i=!1),s.add(u))}if(i)return this._factory.createPolygon(o,s.toArray([]));var f=new B;return o!==null&&f.add(o),f.addAll(s),this._factory.buildGeometry(f)};mr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};mr.prototype.getInputGeometry=function(){return this._inputGeom};mr.prototype.transformMultiLineString=function(t,r){for(var n=this,i=new B,o=0;o<t.getNumGeometries();o++){var s=n.transformLineString(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};mr.prototype.transformCoordinates=function(t,r){return this.copy(t)};mr.prototype.transformLineString=function(t,r){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};mr.prototype.transformMultiPoint=function(t,r){for(var n=this,i=new B,o=0;o<t.getNumGeometries();o++){var s=n.transformPoint(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};mr.prototype.transformMultiPolygon=function(t,r){for(var n=this,i=new B,o=0;o<t.getNumGeometries();o++){var s=n.transformPolygon(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};mr.prototype.copy=function(t){return t.copy()};mr.prototype.transformGeometryCollection=function(t,r){for(var n=this,i=new B,o=0;o<t.getNumGeometries();o++){var s=n.transform(t.getGeometryN(o));s!==null&&(n._pruneEmptyGeometry&&s.isEmpty()||i.add(s))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(lt.toGeometryArray(i)):this._factory.buildGeometry(i)};mr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof wr)return this.transformPoint(t,null);if(t instanceof Ho)return this.transformMultiPoint(t,null);if(t instanceof Tn)return this.transformLinearRing(t,null);if(t instanceof ve)return this.transformLineString(t,null);if(t instanceof Ai)return this.transformMultiLineString(t,null);if(t instanceof be)return this.transformPolygon(t,null);if(t instanceof Rn)return this.transformMultiPolygon(t,null);if(t instanceof sr)return this.transformGeometryCollection(t,null);throw new le("Unknown Geometry subtype: "+t.getClass().getName())};mr.prototype.transformLinearRing=function(t,r){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};mr.prototype.interfaces_=function(){return[]};mr.prototype.getClass=function(){return mr};var qn=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new K,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ve&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];e.call(this,t.getCoordinates(),r)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=i}};qn.prototype.snapVertices=function(t,r){for(var n=this,i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var s=t.get(o),a=n.findSnapForVertex(s,r);a!==null&&(t.set(o,new P(a)),o===0&&n._isClosed&&t.set(t.size()-1,new P(a)))}};qn.prototype.findSnapForVertex=function(t,r){for(var n=this,i=0;i<r.length;i++){if(t.equals2D(r[i]))return null;if(t.distance(r[i])<n._snapTolerance)return r[i]}return null};qn.prototype.snapTo=function(t){var r=new ua(this._srcPts);this.snapVertices(r,t),this.snapSegments(r,t);var n=r.toCoordinateArray();return n};qn.prototype.snapSegments=function(t,r){var n=this;if(r.length===0)return null;var i=r.length;r[0].equals2D(r[r.length-1])&&(i=r.length-1);for(var o=0;o<i;o++){var s=r[o],a=n.findSegmentIndexToSnap(s,t);a>=0&&t.add(a+1,new P(s),!1)}};qn.prototype.findSegmentIndexToSnap=function(t,r){for(var n=this,i=st.MAX_VALUE,o=-1,s=0;s<r.size()-1;s++){if(n._seg.p0=r.get(s),n._seg.p1=r.get(s+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<i&&(i=a,o=s)}return o};qn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};qn.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var me=function(t){this._srcGeom=t||null},Jg={SNAP_PRECISION_FACTOR:{configurable:!0}};me.prototype.snapTo=function(t,r){var n=this.extractTargetCoordinates(t),i=new Kg(r,n);return i.transform(this._srcGeom)};me.prototype.snapToSelf=function(t,r){var n=this.extractTargetCoordinates(this._srcGeom),i=new Kg(t,n,!0),o=i.transform(this._srcGeom),s=o;return r&&tt(s,pi)&&(s=o.buffer(0)),s};me.prototype.computeSnapTolerance=function(t){var r=this.computeMinimumSegmentLength(t),n=r/10;return n};me.prototype.extractTargetCoordinates=function(t){for(var r=new dn,n=t.getCoordinates(),i=0;i<n.length;i++)r.add(n[i]);return r.toArray(new Array(0).fill(null))};me.prototype.computeMinimumSegmentLength=function(t){for(var r=st.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<r&&(r=i)}return r};me.prototype.interfaces_=function(){return[]};me.prototype.getClass=function(){return me};me.snap=function(t,r,n){var i=new Array(2).fill(null),o=new me(t);i[0]=o.snapTo(r,n);var s=new me(r);return i[1]=s.snapTo(i[0],n),i};me.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],r=me.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ht.FIXED){var i=1/n.getScale()*2/1.415;i>r&&(r=i)}return r}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return Math.min(me.computeOverlaySnapTolerance(o),me.computeOverlaySnapTolerance(s))}};me.computeSizeBasedSnapTolerance=function(t){var r=t.getEnvelopeInternal(),n=Math.min(r.getHeight(),r.getWidth()),i=n*me.SNAP_PRECISION_FACTOR;return i};me.snapToSelf=function(t,r,n){var i=new me(t);return i.snapToSelf(r,n)};Jg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(me,Jg);var Kg=function(e){function t(r,n,i){e.call(this),this._snapTolerance=r||null,this._snapPts=n||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,i){var o=new qn(n,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},t.prototype.transformCoordinates=function(n,i){var o=n.toCoordinateArray(),s=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(s)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(mr),je=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};je.prototype.getCommon=function(){return st.longBitsToDouble(this._commonBits)};je.prototype.add=function(t){var r=st.doubleToLongBits(t);if(this._isFirst)return this._commonBits=r,this._commonSignExp=je.signExpBits(this._commonBits),this._isFirst=!1,null;var n=je.signExpBits(r);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=je.numCommonMostSigMantissaBits(this._commonBits,r),this._commonBits=je.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};je.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],r=st.longBitsToDouble(t),n=st.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),s=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+r+" ]";return s}};je.prototype.interfaces_=function(){return[]};je.prototype.getClass=function(){return je};je.getBit=function(t,r){var n=1<<r;return t&n?1:0};je.signExpBits=function(t){return t>>52};je.zeroLowerBits=function(t,r){var n=(1<<r)-1,i=~n,o=t&i;return o};je.numCommonMostSigMantissaBits=function(t,r){for(var n=0,i=52;i>=0;i--){if(je.getBit(t,i)!==je.getBit(r,i))return n;n++}return 52};var Ei=function(){this._commonCoord=null,this._ccFilter=new lo},Cl={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Ei.prototype.addCommonBits=function(t){var r=new xi(this._commonCoord);t.apply(r),t.geometryChanged()};Ei.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var r=new P(this._commonCoord);r.x=-r.x,r.y=-r.y;var n=new xi(r);return t.apply(n),t.geometryChanged(),t};Ei.prototype.getCommonCoordinate=function(){return this._commonCoord};Ei.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};Ei.prototype.interfaces_=function(){return[]};Ei.prototype.getClass=function(){return Ei};Cl.CommonCoordinateFilter.get=function(){return lo};Cl.Translater.get=function(){return xi};Object.defineProperties(Ei,Cl);var lo=function(){this._commonBitsX=new je,this._commonBitsY=new je};lo.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};lo.prototype.getCommonCoordinate=function(){return new P(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};lo.prototype.interfaces_=function(){return[Dn]};lo.prototype.getClass=function(){return lo};var xi=function(){this.trans=null;var t=arguments[0];this.trans=t};xi.prototype.filter=function(t,r){var n=t.getOrdinate(r,0)+this.trans.x,i=t.getOrdinate(r,1)+this.trans.y;t.setOrdinate(r,0,n),t.setOrdinate(r,1,i)};xi.prototype.isDone=function(){return!1};xi.prototype.isGeometryChanged=function(){return!0};xi.prototype.interfaces_=function(){return[jr]};xi.prototype.getClass=function(){return xi};var Te=function(t,r){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=r,this.computeSnapTolerance()};Te.prototype.selfSnap=function(t){var r=new me(t),n=r.snapTo(t,this._snapTolerance);return n};Te.prototype.removeCommonBits=function(t){this._cbr=new Ei,this._cbr.add(t[0]),this._cbr.add(t[1]);var r=new Array(2).fill(null);return r[0]=this._cbr.removeCommonBits(t[0].copy()),r[1]=this._cbr.removeCommonBits(t[1].copy()),r};Te.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};Te.prototype.getResultGeometry=function(t){var r=this.snap(this._geom),n=at.overlayOp(r[0],r[1],t);return this.prepareResult(n)};Te.prototype.checkValid=function(t){t.isValid()||ke.out.println("Snapped geometry is invalid")};Te.prototype.computeSnapTolerance=function(){this._snapTolerance=me.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Te.prototype.snap=function(t){var r=this.removeCommonBits(t),n=me.snap(r[0],r[1],this._snapTolerance);return n};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};Te.overlayOp=function(t,r,n){var i=new Te(t,r);return i.getResultGeometry(n)};Te.union=function(t,r){return Te.overlayOp(t,r,at.UNION)};Te.intersection=function(t,r){return Te.overlayOp(t,r,at.INTERSECTION)};Te.symDifference=function(t,r){return Te.overlayOp(t,r,at.SYMDIFFERENCE)};Te.difference=function(t,r){return Te.overlayOp(t,r,at.DIFFERENCE)};var fr=function(t,r){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=r};fr.prototype.getResultGeometry=function(t){var r=null,n=!1,i=null;try{r=at.overlayOp(this._geom[0],this._geom[1],t);var o=!0;o&&(n=!0)}catch(s){if(s instanceof jn)i=s;else throw s}finally{}if(!n)try{r=Te.overlayOp(this._geom[0],this._geom[1],t)}catch(s){throw s instanceof jn?i:s}finally{}return r};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};fr.overlayOp=function(t,r,n){var i=new fr(t,r);return i.getResultGeometry(n)};fr.union=function(t,r){return fr.overlayOp(t,r,at.UNION)};fr.intersection=function(t,r){return fr.overlayOp(t,r,at.INTERSECTION)};fr.symDifference=function(t,r){return fr.overlayOp(t,r,at.SYMDIFFERENCE)};fr.difference=function(t,r){return fr.overlayOp(t,r,at.DIFFERENCE)};var js=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],r=arguments[1];this.mce=t,this.chainIndex=r};js.prototype.computeIntersections=function(t,r){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,r)};js.prototype.interfaces_=function(){return[]};js.prototype.getClass=function(){return js};var Sr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],r=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=r}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=n,this._xValue=i,this._obj=o}},Sl={INSERT:{configurable:!0},DELETE:{configurable:!0}};Sr.prototype.isDelete=function(){return this._eventType===Sr.DELETE};Sr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};Sr.prototype.getObject=function(){return this._obj};Sr.prototype.compareTo=function(t){var r=t;return this._xValue<r._xValue?-1:this._xValue>r._xValue?1:this._eventType<r._eventType?-1:this._eventType>r._eventType?1:0};Sr.prototype.getInsertEvent=function(){return this._insertEvent};Sr.prototype.isInsert=function(){return this._eventType===Sr.INSERT};Sr.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};Sr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Sr.prototype.interfaces_=function(){return[Xr]};Sr.prototype.getClass=function(){return Sr};Sl.INSERT.get=function(){return 1};Sl.DELETE.get=function(){return 2};Object.defineProperties(Sr,Sl);var Ya=function(){};Ya.prototype.interfaces_=function(){return[]};Ya.prototype.getClass=function(){return Ya};var Ue=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._li=t,this._includeProper=r,this._recordIsolated=n};Ue.prototype.isTrivialIntersection=function(t,r,n,i){if(t===n&&this._li.getIntersectionNum()===1){if(Ue.isAdjacentSegments(r,i))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(r===0&&i===o||i===0&&r===o)return!0}}return!1};Ue.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Ue.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};Ue.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Ue.prototype.isBoundaryPointInternal=function(t,r){for(var n=r.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinate();if(t.isIntersection(o))return!0}return!1};Ue.prototype.hasProperIntersection=function(){return this._hasProper};Ue.prototype.hasIntersection=function(){return this._hasIntersection};Ue.prototype.isDone=function(){return this._isDone};Ue.prototype.isBoundaryPoint=function(t,r){return r===null?!1:!!(this.isBoundaryPointInternal(t,r[0])||this.isBoundaryPointInternal(t,r[1]))};Ue.prototype.setBoundaryNodes=function(t,r){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=r};Ue.prototype.addIntersections=function(t,r,n,i){if(t===n&&r===i)return null;this.numTests++;var o=t.getCoordinates()[r],s=t.getCoordinates()[r+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,r,n,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Ue.prototype.interfaces_=function(){return[]};Ue.prototype.getClass=function(){return Ue};Ue.isAdjacentSegments=function(t,r){return Math.abs(t-r)===1};var Ox=function(e){function t(){e.call(this),this.events=new B,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;en.sort(this.events);for(var i=0;i<this.events.size();i++){var o=n.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var s=n.events.get(o);if(s.isInsert()&&n.processOverlaps(o,s.getDeleteEventIndex(),s,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Ue&&tt(arguments[0],Kr)&&tt(arguments[1],Kr)){var a=arguments[0],u=arguments[1],f=arguments[2];this.addEdges(a,a),this.addEdges(u,u),this.computeIntersections(f)}else if(typeof arguments[2]=="boolean"&&tt(arguments[0],Kr)&&arguments[1]instanceof Ue){var l=arguments[0],c=arguments[1],h=arguments[2];h?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},t.prototype.addEdge=function(n,i){for(var o=this,s=n.getMonotoneChainEdge(),a=s.getStartIndexes(),u=0;u<a.length-1;u++){var f=new js(s,u),l=new Sr(i,s.getMinX(u),f);o.events.add(l),o.events.add(new Sr(s.getMaxX(u),l))}},t.prototype.processOverlaps=function(n,i,o,s){for(var a=this,u=o.getObject(),f=n;f<i;f++){var l=a.events.get(f);if(l.isInsert()){var c=l.getObject();o.isSameLabel(l)||(u.computeIntersections(c,s),a.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var s=o.next();n.addEdge(s,s)}else if(arguments.length===2)for(var a=arguments[0],u=arguments[1],f=a.iterator();f.hasNext();){var l=f.next();n.addEdge(l,u)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ya),zn=function(){this._min=st.POSITIVE_INFINITY,this._max=st.NEGATIVE_INFINITY},Qg={NodeComparator:{configurable:!0}};zn.prototype.getMin=function(){return this._min};zn.prototype.intersects=function(t,r){return!(this._min>r||this._max<t)};zn.prototype.getMax=function(){return this._max};zn.prototype.toString=function(){return $r.toLineString(new P(this._min,0),new P(this._max,0))};zn.prototype.interfaces_=function(){return[]};zn.prototype.getClass=function(){return zn};Qg.NodeComparator.get=function(){return ta};Object.defineProperties(zn,Qg);var ta=function(){};ta.prototype.compare=function(t,r){var n=t,i=r,o=(n._min+n._max)/2,s=(i._min+i._max)/2;return o<s?-1:o>s?1:0};ta.prototype.interfaces_=function(){return[ko]};ta.prototype.getClass=function(){return ta};var bx=function(e){function t(){e.call(this),this._item=null;var r=arguments[0],n=arguments[1],i=arguments[2];this._min=r,this._max=n,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;o.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(zn),Rx=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var r=arguments[0],n=arguments[1];this._node1=r,this._node2=n,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,i){this._min=Math.min(n._min,i._min),this._max=Math.max(n._max,i._max)},t.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;this._node1!==null&&this._node1.query(n,i,o),this._node2!==null&&this._node2.query(n,i,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(zn),Xn=function(){this._leaves=new B,this._root=null,this._level=0};Xn.prototype.buildTree=function(){var t=this;en.sort(this._leaves,new zn.NodeComparator);for(var r=this._leaves,n=null,i=new B;;){if(t.buildLevel(r,i),i.size()===1)return i.get(0);n=r,r=i,i=n}};Xn.prototype.insert=function(t,r,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new bx(t,r,n))};Xn.prototype.query=function(t,r,n){this.init(),this._root.query(t,r,n)};Xn.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Xn.prototype.printNode=function(t){ke.out.println($r.toLineString(new P(t._min,this._level),new P(t._max,this._level)))};Xn.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Xn.prototype.buildLevel=function(t,r){this._level++,r.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),o=n+1<t.size()?t.get(n):null;if(o===null)r.add(i);else{var s=new Rx(t.get(n),t.get(n+1));r.add(s)}}};Xn.prototype.interfaces_=function(){return[]};Xn.prototype.getClass=function(){return Xn};var $o=function(){this._items=new B};$o.prototype.visitItem=function(t){this._items.add(t)};$o.prototype.getItems=function(){return this._items};$o.prototype.interfaces_=function(){return[gi]};$o.prototype.getClass=function(){return $o};var jo=function(){this._index=null;var t=arguments[0];if(!tt(t,pi))throw new le("Argument must be Polygonal");this._index=new qi(t)},Nl={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jo.prototype.locate=function(t){var r=new pn(t),n=new ts(r);return this._index.query(t.y,t.y,n),r.getLocation()};jo.prototype.interfaces_=function(){return[Qo]};jo.prototype.getClass=function(){return jo};Nl.SegmentVisitor.get=function(){return ts};Nl.IntervalIndexedGeometry.get=function(){return qi};Object.defineProperties(jo,Nl);var ts=function(){this._counter=null;var t=arguments[0];this._counter=t};ts.prototype.visitItem=function(t){var r=t;this._counter.countSegment(r.getCoordinate(0),r.getCoordinate(1))};ts.prototype.interfaces_=function(){return[gi]};ts.prototype.getClass=function(){return ts};var qi=function(){this._index=new Xn;var t=arguments[0];this.init(t)};qi.prototype.init=function(t){for(var r=this,n=Fe.getLines(t),i=n.iterator();i.hasNext();){var o=i.next(),s=o.getCoordinates();r.addLine(s)}};qi.prototype.addLine=function(t){for(var r=this,n=1;n<t.length;n++){var i=new K(t[n-1],t[n]),o=Math.min(i.p0.y,i.p1.y),s=Math.max(i.p0.y,i.p1.y);r._index.insert(o,s,i)}};qi.prototype.query=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new $o;return this._index.query(t,r,n),n.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];this._index.query(i,o,s)}};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};var ms=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new Ag,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new nn,arguments.length===2){var r=arguments[0],n=arguments[1],i=kr.OGC_SFS_BOUNDARY_RULE;this._argIndex=r,this._parentGeom=n,this._boundaryNodeRule=i,n!==null&&this.add(n)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,i){var o=this._nodes.addNode(i),s=o.getLabel(),a=1,u=L.NONE;u=s.getLocation(n,T.ON),u===L.BOUNDARY&&a++;var f=t.determineBoundary(this._boundaryNodeRule,a);s.setLocation(n,f)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.computeSelfNodes(n,i,!1)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ue(o,!0,!1);u.setIsDoneIfProperInt(a);var f=this.createEdgeSetIntersector(),l=this._parentGeom instanceof Tn||this._parentGeom instanceof be||this._parentGeom instanceof Rn,c=s||!l;return f.computeIntersections(this._edges,u,c),this.addSelfIntersectionNodes(this._argIndex),u}},t.prototype.computeSplitEdges=function(n){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,i,o){var s=new Ue(i,o,!0);s.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var a=this.createEdgeSetIntersector();return a.computeIntersections(this._edges,n._edges,s),s},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof wr){var n=arguments[0],i=n.getCoordinate();this.insertPoint(this._argIndex,i,L.INTERIOR)}else if(arguments[0]instanceof P){var o=arguments[0];this.insertPoint(this._argIndex,o,L.INTERIOR)}},t.prototype.addPolygon=function(n){var i=this;this.addPolygonRing(n.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o);i.addPolygonRing(s,L.INTERIOR,L.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var i=n.getCoordinates();this.insertPoint(this._argIndex,i[0],L.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],L.BOUNDARY)},t.prototype.addLineString=function(n){var i=ct.removeRepeatedPoints(n.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new Ua(i,new Kt(this._argIndex,L.INTERIOR));this._lineEdgeMap.put(n,o),this.insertEdge(o),ut.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),i=new Array(n.size()).fill(null),o=0,s=n.iterator();s.hasNext();){var a=s.next();i[o++]=a.getCoordinate().copy()}return i},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,i,o){if(this.isBoundaryNode(n,i))return null;o===L.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,i):this.insertPoint(n,i,o)},t.prototype.addPolygonRing=function(n,i,o){if(n.isEmpty())return null;var s=ct.removeRepeatedPoints(n.getCoordinates());if(s.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=s[0],null;var a=i,u=o;G.isCCW(s)&&(a=o,u=i);var f=new Ua(s,new Kt(this._argIndex,L.BOUNDARY,a,u));this._lineEdgeMap.put(n,f),this.insertEdge(f),this.insertPoint(this._argIndex,s[0],L.BOUNDARY)},t.prototype.insertPoint=function(n,i,o){var s=this._nodes.addNode(i),a=s.getLabel();a===null?s._label=new Kt(n,o):a.setLocation(n,o)},t.prototype.createEdgeSetIntersector=function(){return new Ox},t.prototype.addSelfIntersectionNodes=function(n){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel().getLocation(n),u=s.eiList.iterator();u.hasNext();){var f=u.next();i.addSelfIntersectionNode(n,f.coord,a)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Rn&&(this._useBoundaryDeterminationRule=!1),n instanceof be)this.addPolygon(n);else if(n instanceof ve)this.addLineString(n);else if(n instanceof wr)this.addPoint(n);else if(n instanceof Ho)this.addCollection(n);else if(n instanceof Ai)this.addCollection(n);else if(n instanceof Rn)this.addCollection(n);else if(n instanceof sr)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var i=this,o=0;o<n.getNumGeometries();o++){var s=n.getGeometryN(o);i.add(s)}},t.prototype.locate=function(n){return tt(this._parentGeom,pi)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new jo(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,i){return n.isInBoundary(i)?L.BOUNDARY:L.INTERIOR},t}(pe),es=function(){if(this._li=new Yi,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ms(0,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=kr.OGC_SFS_BOUNDARY_RULE;r.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ms(0,r,i),this._arg[1]=new ms(1,n,i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];o.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ms(0,o,a),this._arg[1]=new ms(1,s,a)}};es.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};es.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};es.prototype.interfaces_=function(){return[]};es.prototype.getClass=function(){return es};var Oi=function(){};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};Oi.map=function(){if(arguments[0]instanceof j&&tt(arguments[1],Oi.MapOp)){for(var t=arguments[0],r=arguments[1],n=new B,i=0;i<t.getNumGeometries();i++){var o=r.map(t.getGeometryN(i));o!==null&&n.add(o)}return t.getFactory().buildGeometry(n)}else if(tt(arguments[0],Ce)&&tt(arguments[1],Oi.MapOp)){for(var s=arguments[0],a=arguments[1],u=new B,f=s.iterator();f.hasNext();){var l=f.next(),c=a.map(l);c!==null&&u.add(c)}return u}};Oi.MapOp=function(){};var at=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n),this._ptLocator=new nn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new rn,this._resultPolyList=new B,this._resultLineList=new B,this._resultPointList=new B,this._graph=new pe(new zg),this._geomFact=r.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n);if(i!==null){var o=i.getLabel(),s=n.getLabel();i.isPointwiseEqual(n)||(s=new Kt(n.getLabel()),s.flip());var a=i.getDepth();a.isNull()&&a.add(o),a.add(s),o.merge(s)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,i,o,s){var a=new B;return a.addAll(n),a.addAll(i),a.addAll(o),a.isEmpty()?t.createEmptyResult(s,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(a)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next();i.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,i){for(var o=this,s=i.iterator();s.hasNext();){var a=s.next(),u=o._ptLocator.locate(n,a);if(u!==L.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new B,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),n.add(o.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var i=this,o=n.iterator();o.hasNext();){var s=o.next();i.insertUniqueEdge(s)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new B;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ki.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var o=new Ir(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var s=new Cn(this,this._geomFact,this._ptLocator);this._resultLineList=s.build(n);var a=new fo(this,this._geomFact,this._ptLocator);this._resultPointList=a.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,i){var o=this._ptLocator.locate(n.getCoordinate(),this._arg[i].getGeometry());n.getLabel().setLocation(i,o)},t.prototype.copyPoints=function(n){for(var i=this,o=this._arg[n].getNodeIterator();o.hasNext();){var s=o.next(),a=i._graph.addNode(s.getCoordinate());a.setLabel(n,s.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),s=o.getLabel();s.isArea()&&!o.isInteriorAreaEdge()&&t.isResultOfOp(s.getLocation(0,T.RIGHT),s.getLocation(1,T.RIGHT),n)&&o.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next(),o=i.getLabel(),s=i.getDepth();if(!s.isNull()){s.normalize();for(var a=0;a<2;a++)!o.isNull(a)&&o.isArea()&&!s.isNull(a)&&(s.getDelta(a)===0?o.toLine(a):(ut.isTrue(!s.isNull(a,T.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(a,T.LEFT,s.getLocation(a,T.LEFT)),ut.isTrue(!s.isNull(a,T.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(a,T.RIGHT,s.getLocation(a,T.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),s=o.getLabel();o.isIsolated()&&(s.isNull(0)?n.labelIncompleteNode(o,0):n.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(s)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(es);at.overlayOp=function(e,t,r){var n=new at(e,t),i=n.getResultGeometry(r);return i};at.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return at.createEmptyResult(at.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var r=t;return uo.map(e,{interfaces_:function(){return[Oi.MapOp]},map:function(n){return n.intersection(r)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.INTERSECTION)};at.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return at.createEmptyResult(at.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.SYMDIFFERENCE)};at.resultDimension=function(e,t,r){var n=t.getDimension(),i=r.getDimension(),o=-1;switch(e){case at.INTERSECTION:o=Math.min(n,i);break;case at.UNION:o=Math.max(n,i);break;case at.DIFFERENCE:o=n;break;case at.SYMDIFFERENCE:o=Math.max(n,i);break}return o};at.createEmptyResult=function(e,t,r,n){var i=null;switch(at.resultDimension(e,t,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon();break}return i};at.difference=function(e,t){return e.isEmpty()?at.createEmptyResult(at.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.DIFFERENCE))};at.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],r=e.getLocation(0),n=e.getLocation(1);return at.isResultOfOp(r,n,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===L.BOUNDARY&&(i=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),s){case at.INTERSECTION:return i===L.INTERIOR&&o===L.INTERIOR;case at.UNION:return i===L.INTERIOR||o===L.INTERIOR;case at.DIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR;case at.SYMDIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR||i!==L.INTERIOR&&o===L.INTERIOR}return!1}};at.INTERSECTION=1;at.UNION=2;at.DIFFERENCE=3;at.SYMDIFFERENCE=4;var ci=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new nn,this._seg=new K;var t=arguments[0],r=arguments[1];this._g=t,this._boundaryDistanceTolerance=r,this._linework=this.extractLinework(t)};ci.prototype.isWithinToleranceOfBoundary=function(t){for(var r=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=r._linework.getGeometryN(n),o=i.getCoordinateSequence(),s=0;s<o.size()-1;s++){o.getCoordinate(s,r._seg.p0),o.getCoordinate(s+1,r._seg.p1);var a=r._seg.distance(t);if(a<=r._boundaryDistanceTolerance)return!0}return!1};ci.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?L.BOUNDARY:this._ptLocator.locate(t,this._g)};ci.prototype.extractLinework=function(t){var r=new rs;t.apply(r);var n=r.getLinework(),i=lt.toLineStringArray(n);return t.getFactory().createMultiLineString(i)};ci.prototype.interfaces_=function(){return[]};ci.prototype.getClass=function(){return ci};var rs=function(){this._linework=null,this._linework=new B};rs.prototype.getLinework=function(){return this._linework};rs.prototype.filter=function(t){var r=this;if(t instanceof be){var n=t;this._linework.add(n.getExteriorRing());for(var i=0;i<n.getNumInteriorRing();i++)r._linework.add(n.getInteriorRingN(i))}};rs.prototype.interfaces_=function(){return[yn]};rs.prototype.getClass=function(){return rs};var zi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};zi.prototype.extractPoints=function(t,r,n){for(var i=this,o=t.getCoordinates(),s=0;s<o.length-1;s++)i.computeOffsetPoints(o[s],o[s+1],r,n)};zi.prototype.setSidesToGenerate=function(t,r){this._doLeft=t,this._doRight=r};zi.prototype.getPoints=function(t){for(var r=this,n=new B,i=Fe.getLines(this._g),o=i.iterator();o.hasNext();){var s=o.next();r.extractPoints(s,t,n)}return n};zi.prototype.computeOffsetPoints=function(t,r,n,i){var o=r.x-t.x,s=r.y-t.y,a=Math.sqrt(o*o+s*s),u=n*o/a,f=n*s/a,l=(r.x+t.x)/2,c=(r.y+t.y)/2;if(this._doLeft){var h=new P(l-f,c+u);i.add(h)}if(this._doRight){var p=new P(l+f,c-u);i.add(p)}};zi.prototype.interfaces_=function(){return[]};zi.prototype.getClass=function(){return zi};var Ar=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new B;var t=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,r),this._geom=[t,r,n],this._locFinder=[new ci(this._geom[0],this._boundaryDistanceTolerance),new ci(this._geom[1],this._boundaryDistanceTolerance),new ci(this._geom[2],this._boundaryDistanceTolerance)]},Zg={TOLERANCE:{configurable:!0}};Ar.prototype.reportResult=function(t,r,n){ke.out.println("Overlay result invalid - A:"+L.toLocationSymbol(r[0])+" B:"+L.toLocationSymbol(r[1])+" expected:"+(n?"i":"e")+" actual:"+L.toLocationSymbol(r[2]))};Ar.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var r=this.checkValid(t);return r};Ar.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var r=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(r,i))return t._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return this._location[0]=this._locFinder[0].getLocation(s),this._location[1]=this._locFinder[1].getLocation(s),this._location[2]=this._locFinder[2].getLocation(s),Ar.hasLocation(this._location,L.BOUNDARY)?!0:this.isValidResult(o,this._location)}};Ar.prototype.addTestPts=function(t){var r=new zi(t);this._testCoords.addAll(r.getPoints(5*this._boundaryDistanceTolerance))};Ar.prototype.isValidResult=function(t,r){var n=at.isResultOfOp(r[0],r[1],t),i=r[2]===L.INTERIOR,o=!(n^i);return o||this.reportResult(t,r,n),o};Ar.prototype.getInvalidLocation=function(){return this._invalidLocation};Ar.prototype.interfaces_=function(){return[]};Ar.prototype.getClass=function(){return Ar};Ar.hasLocation=function(t,r){for(var n=0;n<3;n++)if(t[n]===r)return!0;return!1};Ar.computeBoundaryDistanceTolerance=function(t,r){return Math.min(me.computeSizeBasedSnapTolerance(t),me.computeSizeBasedSnapTolerance(r))};Ar.isValid=function(t,r,n,i){var o=new Ar(t,r,i);return o.isValid(n)};Zg.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Ar,Zg);var Nr=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Nr.prototype.extractElements=function(t,r){var n=this;if(t===null)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);n._skipEmpty&&o.isEmpty()||r.add(o)}};Nr.prototype.combine=function(){for(var t=this,r=new B,n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();t.extractElements(i,r)}return r.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(r)};Nr.prototype.interfaces_=function(){return[]};Nr.prototype.getClass=function(){return Nr};Nr.combine=function(){if(arguments.length===1){var t=arguments[0],r=new Nr(t);return r.combine()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Nr(Nr.createList(n,i));return o.combine()}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2],f=new Nr(Nr.createList(s,a,u));return f.combine()}};Nr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};Nr.createList=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new B;return n.add(t),n.add(r),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new B;return a.add(i),a.add(o),a.add(s),a}};var we=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new B)},$g={STRTREE_NODE_CAPACITY:{configurable:!0}};we.prototype.reduceToGeometries=function(t){for(var r=this,n=new B,i=t.iterator();i.hasNext();){var o=i.next(),s=null;tt(o,Kr)?s=r.unionTree(o):o instanceof j&&(s=o),n.add(s)}return n};we.prototype.extractByEnvelope=function(t,r,n){for(var i=new B,o=0;o<r.getNumGeometries();o++){var s=r.getGeometryN(o);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this._geomFactory.buildGeometry(i)};we.prototype.unionOptimized=function(t,r){var n=t.getEnvelopeInternal(),i=r.getEnvelopeInternal();if(!n.intersects(i)){var o=Nr.combine(t,r);return o}if(t.getNumGeometries()<=1&&r.getNumGeometries()<=1)return this.unionActual(t,r);var s=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,r,s)};we.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Bg(we.STRTREE_NODE_CAPACITY),r=this._inputPolys.iterator();r.hasNext();){var n=r.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree(),o=this.unionTree(i);return o};we.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var o=we.getGeometry(r,n);return this.unionSafe(o,null)}else{if(i-n===2)return this.unionSafe(we.getGeometry(r,n),we.getGeometry(r,n+1));var s=Math.trunc((i+n)/2),a=this.binaryUnion(r,n,s),u=this.binaryUnion(r,s,i);return this.unionSafe(a,u)}}};we.prototype.repeatedUnion=function(t){for(var r=null,n=t.iterator();n.hasNext();){var i=n.next();r===null?r=i.copy():r=r.union(i)}return r};we.prototype.unionSafe=function(t,r){return t===null&&r===null?null:t===null?r.copy():r===null?t.copy():this.unionOptimized(t,r)};we.prototype.unionActual=function(t,r){return we.restrictToPolygons(t.union(r))};we.prototype.unionTree=function(t){var r=this.reduceToGeometries(t),n=this.binaryUnion(r);return n};we.prototype.unionUsingEnvelopeIntersection=function(t,r,n){var i=new B,o=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,r,i),a=this.unionActual(o,s);i.add(a);var u=Nr.combine(i);return u};we.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],r=t.get(0).getFactory(),n=r.buildGeometry(t),i=n.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o.getFactory(),u=a.createGeometryCollection([o,s]),f=u.buffer(0);return f}};we.prototype.interfaces_=function(){return[]};we.prototype.getClass=function(){return we};we.restrictToPolygons=function(t){if(tt(t,pi))return t;var r=$n.getPolygons(t);return r.size()===1?r.get(0):t.getFactory().createMultiPolygon(lt.toPolygonArray(r))};we.getGeometry=function(t,r){return r>=t.size()?null:t.get(r)};we.union=function(t){var r=new we(t);return r.union()};$g.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(we,$g);var Va=function(){};Va.prototype.interfaces_=function(){return[]};Va.prototype.getClass=function(){return Va};Va.union=function(t,r){if(t.isEmpty()||r.isEmpty()){if(t.isEmpty()&&r.isEmpty())return at.createEmptyResult(at.UNION,t,r,t.getFactory());if(t.isEmpty())return r.copy();if(r.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(r),fr.overlayOp(t,r,at.UNION)};function Vi(){return new Ha}function Ha(){this.reset()}Ha.prototype={constructor:Ha,reset:function(){this.s=this.t=0},add:function(e){Lh(xa,e,this.t),Lh(this,xa.s,this.s),this.s?this.t+=xa.t:this.s=xa.t},valueOf:function(){return this.s}};var xa=new Ha;function Lh(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var ge=1e-6,te=Math.PI,Zn=te/2,Oh=te/4,ii=te*2,Si=180/te,fn=te/180,nr=Math.abs,Ax=Math.atan,ns=Math.atan2,Se=Math.cos,Ne=Math.sin,hs=Math.sqrt;function jg(e){return e>1?0:e<-1?te:Math.acos(e)}function co(e){return e>1?Zn:e<-1?-Zn:Math.asin(e)}function Ss(){}function Wa(e,t){e&&Rh.hasOwnProperty(e.type)&&Rh[e.type](e,t)}var bh={Feature:function(e,t){Wa(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)Wa(r[n].geometry,t)}},Rh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nf(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)Nf(r[n],t,0)},Polygon:function(e,t){Ah(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)Ah(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)Wa(r[n],t)}};function Nf(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function Ah(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)Nf(e[r],t,1);t.polygonEnd()}function Dx(e,t){e&&bh.hasOwnProperty(e.type)?bh[e.type](e,t):Wa(e,t)}Vi();Vi();function Pf(e){return[ns(e[1],e[0]),co(e[2])]}function is(e){var t=e[0],r=e[1],n=Se(r);return[n*Se(t),n*Ne(t),Ne(r)]}function wa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ja(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ia(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Mf(e){var t=hs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Vi();function tv(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function Lf(e,t){return[e>te?e-ii:e<-te?e+ii:e,t]}Lf.invert=Lf;function Tx(e,t,r){return(e%=ii)?t||r?tv(Th(e),Fh(t,r)):Th(e):t||r?Fh(t,r):Lf}function Dh(e){return function(t,r){return t+=e,[t>te?t-ii:t<-te?t+ii:t,r]}}function Th(e){var t=Dh(e);return t.invert=Dh(-e),t}function Fh(e,t){var r=Se(e),n=Ne(e),i=Se(t),o=Ne(t);function s(a,u){var f=Se(u),l=Se(a)*f,c=Ne(a)*f,h=Ne(u),p=h*r+l*n;return[ns(c*i-p*o,l*r-h*n),co(p*i+c*o)]}return s.invert=function(a,u){var f=Se(u),l=Se(a)*f,c=Ne(a)*f,h=Ne(u),p=h*i-c*o;return[ns(c*i+h*o,l*r+p*n),co(p*r-l*n)]},s}function Fx(e,t,r,n,i,o){if(r){var s=Se(t),a=Ne(t),u=n*r;i==null?(i=t+n*ii,o=t-u/2):(i=Bh(s,i),o=Bh(s,o),(n>0?i<o:i>o)&&(i+=n*ii));for(var f,l=i;n>0?l>o:l<o;l-=u)f=Pf([s,-a*Se(l),-a*Ne(l)]),e.point(f[0],f[1])}}function Bh(e,t){t=is(t),t[0]-=e,Mf(t);var r=jg(-t[1]);return((-t[2]<0?-r:r)+ii-ge)%ii}function ev(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:Ss,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Bx(e,t,r,n,i,o){var s=e[0],a=e[1],u=t[0],f=t[1],l=0,c=1,h=u-s,p=f-a,d;if(d=r-s,!(!h&&d>0)){if(d/=h,h<0){if(d<l)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>l&&(l=d)}if(d=i-s,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>l&&(l=d)}else if(h>0){if(d<l)return;d<c&&(c=d)}if(d=n-a,!(!p&&d>0)){if(d/=p,p<0){if(d<l)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>l&&(l=d)}if(d=o-a,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>l&&(l=d)}else if(p>0){if(d<l)return;d<c&&(c=d)}return l>0&&(e[0]=s+l*h,e[1]=a+l*p),c<1&&(t[0]=s+c*h,t[1]=a+c*p),!0}}}}}function ba(e,t){return nr(e[0]-t[0])<ge&&nr(e[1]-t[1])<ge}function Ca(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function rv(e,t,r,n,i){var o=[],s=[],a,u;if(e.forEach(function(d){if(!((m=d.length-1)<=0)){var m,x=d[0],_=d[m],g;if(ba(x,_)){for(i.lineStart(),a=0;a<m;++a)i.point((x=d[a])[0],x[1]);i.lineEnd();return}o.push(g=new Ca(x,d,null,!0)),s.push(g.o=new Ca(x,null,g,!1)),o.push(g=new Ca(_,d,null,!1)),s.push(g.o=new Ca(_,null,g,!0))}}),!!o.length){for(s.sort(t),Gh(o),Gh(s),a=0,u=s.length;a<u;++a)s[a].e=r=!r;for(var f=o[0],l,c;;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,u=l.length;a<u;++a)i.point((c=l[a])[0],c[1]);else n(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else n(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Gh(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function nv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gx(e){return e.length===1&&(e=kx(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function kx(e){return function(t,r){return nv(e(t),r)}}Gx(nv);function iv(e){for(var t=e.length,r,n=-1,i=0,o,s;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(s=e[t],r=s.length;--r>=0;)o[--i]=s[r];return o}var Ns=1e9,Sa=-Ns;function qx(e,t,r,n){function i(f,l){return e<=f&&f<=r&&t<=l&&l<=n}function o(f,l,c,h){var p=0,d=0;if(f==null||(p=s(f,c))!==(d=s(l,c))||u(f,l)<0^c>0)do h.point(p===0||p===3?e:r,p>1?n:t);while((p=(p+c+4)%4)!==d);else h.point(l[0],l[1])}function s(f,l){return nr(f[0]-e)<ge?l>0?0:3:nr(f[0]-r)<ge?l>0?2:1:nr(f[1]-t)<ge?l>0?1:0:l>0?3:2}function a(f,l){return u(f.x,l.x)}function u(f,l){var c=s(f,1),h=s(l,1);return c!==h?c-h:c===0?l[1]-f[1]:c===1?f[0]-l[0]:c===2?f[1]-l[1]:l[0]-f[0]}return function(f){var l=f,c=ev(),h,p,d,m,x,_,g,v,y,E,S,C={point:N,lineStart:A,lineEnd:D,polygonStart:b,polygonEnd:M};function N(k,F){i(k,F)&&l.point(k,F)}function I(){for(var k=0,F=0,J=p.length;F<J;++F)for(var H=p[F],Q=1,q=H.length,V=H[0],U,ft,it=V[0],gt=V[1];Q<q;++Q)U=it,ft=gt,V=H[Q],it=V[0],gt=V[1],ft<=n?gt>n&&(it-U)*(n-ft)>(gt-ft)*(e-U)&&++k:gt<=n&&(it-U)*(n-ft)<(gt-ft)*(e-U)&&--k;return k}function b(){l=c,h=[],p=[],S=!0}function M(){var k=I(),F=S&&k,J=(h=iv(h)).length;(F||J)&&(f.polygonStart(),F&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),J&&rv(h,a,k,o,f),f.polygonEnd()),l=f,h=p=d=null}function A(){C.point=R,p&&p.push(d=[]),E=!0,y=!1,g=v=NaN}function D(){h&&(R(m,x),_&&y&&c.rejoin(),h.push(c.result())),C.point=N,y&&l.lineEnd()}function R(k,F){var J=i(k,F);if(p&&d.push([k,F]),E)m=k,x=F,_=J,E=!1,J&&(l.lineStart(),l.point(k,F));else if(J&&y)l.point(k,F);else{var H=[g=Math.max(Sa,Math.min(Ns,g)),v=Math.max(Sa,Math.min(Ns,v))],Q=[k=Math.max(Sa,Math.min(Ns,k)),F=Math.max(Sa,Math.min(Ns,F))];Bx(H,Q,e,t,r,n)?(y||(l.lineStart(),l.point(H[0],H[1])),l.point(Q[0],Q[1]),J||l.lineEnd(),S=!1):J&&(l.lineStart(),l.point(k,F),S=!1)}g=k,v=F,y=J}return C}}var Zu=Vi();function zx(e,t){var r=t[0],n=t[1],i=[Ne(r),-Se(r),0],o=0,s=0;Zu.reset();for(var a=0,u=e.length;a<u;++a)if(l=(f=e[a]).length)for(var f,l,c=f[l-1],h=c[0],p=c[1]/2+Oh,d=Ne(p),m=Se(p),x=0;x<l;++x,h=g,d=y,m=E,c=_){var _=f[x],g=_[0],v=_[1]/2+Oh,y=Ne(v),E=Se(v),S=g-h,C=S>=0?1:-1,N=C*S,I=N>te,b=d*y;if(Zu.add(ns(b*C*Ne(N),m*E+b*Se(N))),o+=I?S+C*ii:S,I^h>=r^g>=r){var M=Ja(is(c),is(_));Mf(M);var A=Ja(i,M);Mf(A);var D=(I^S>=0?-1:1)*co(A[2]);(n>D||n===D&&(M[0]||M[1]))&&(s+=I^S>=0?1:-1)}}return(o<-ge||o<ge&&Zu<-ge)^s&1}Vi();function kh(e){return e}Vi();Vi();var os=1/0,Ka=os,ea=-os,Qa=ea,qh={point:Xx,lineStart:Ss,lineEnd:Ss,polygonStart:Ss,polygonEnd:Ss,result:function(){var e=[[os,Ka],[ea,Qa]];return ea=Qa=-(Ka=os=1/0),e}};function Xx(e,t){e<os&&(os=e),e>ea&&(ea=e),t<Ka&&(Ka=t),t>Qa&&(Qa=t)}Vi();function ov(e,t,r,n){return function(i,o){var s=t(o),a=i.invert(n[0],n[1]),u=ev(),f=t(u),l=!1,c,h,p,d={point:m,lineStart:_,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=E,h=[],c=[]},polygonEnd:function(){d.point=m,d.lineStart=_,d.lineEnd=g,h=iv(h);var S=zx(c,a);h.length?(l||(o.polygonStart(),l=!0),rv(h,Yx,S,r,o)):S&&(l||(o.polygonStart(),l=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),l&&(o.polygonEnd(),l=!1),h=c=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(S,C){var N=i(S,C);e(S=N[0],C=N[1])&&o.point(S,C)}function x(S,C){var N=i(S,C);s.point(N[0],N[1])}function _(){d.point=x,s.lineStart()}function g(){d.point=m,s.lineEnd()}function v(S,C){p.push([S,C]);var N=i(S,C);f.point(N[0],N[1])}function y(){f.lineStart(),p=[]}function E(){v(p[0][0],p[0][1]),f.lineEnd();var S=f.clean(),C=u.result(),N,I=C.length,b,M,A;if(p.pop(),c.push(p),p=null,!!I){if(S&1){if(M=C[0],(b=M.length-1)>0){for(l||(o.polygonStart(),l=!0),o.lineStart(),N=0;N<b;++N)o.point((A=M[N])[0],A[1]);o.lineEnd()}return}I>1&&S&2&&C.push(C.pop().concat(C.shift())),h.push(C.filter(Ux))}}return d}}function Ux(e){return e.length>1}function Yx(e,t){return((e=e.x)[0]<0?e[1]-Zn-ge:Zn-e[1])-((t=t.x)[0]<0?t[1]-Zn-ge:Zn-t[1])}const zh=ov(function(){return!0},Vx,Wx,[-te,-Zn]);function Vx(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?te:-te,u=nr(o-t);nr(u-te)<ge?(e.point(t,r=(r+s)/2>0?Zn:-Zn),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&u>=te&&(nr(t-n)<ge&&(t-=n*ge),nr(o-a)<ge&&(o-=a*ge),r=Hx(t,r,o,s),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=s),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Hx(e,t,r,n){var i,o,s=Ne(e-r);return nr(s)>ge?Ax((Ne(t)*(o=Se(n))*Ne(r)-Ne(n)*(i=Se(t))*Ne(e))/(i*o*s)):(t+n)/2}function Wx(e,t,r,n){var i;if(e==null)i=r*Zn,n.point(-te,i),n.point(0,i),n.point(te,i),n.point(te,0),n.point(te,-i),n.point(0,-i),n.point(-te,-i),n.point(-te,0),n.point(-te,i);else if(nr(e[0]-t[0])>ge){var o=e[0]<t[0]?te:-te;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function Jx(e,t){var r=Se(e),n=r>0,i=nr(r)>ge;function o(l,c,h,p){Fx(p,e,t,h,l,c)}function s(l,c){return Se(l)*Se(c)>r}function a(l){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(x,_){var g=[x,_],v,y=s(x,_),E=n?y?0:f(x,_):y?f(x+(x<0?te:-te),_):0;if(!c&&(d=p=y)&&l.lineStart(),y!==p&&(v=u(c,g),(!v||ba(c,v)||ba(g,v))&&(g[0]+=ge,g[1]+=ge,y=s(g[0],g[1]))),y!==p)m=0,y?(l.lineStart(),v=u(g,c),l.point(v[0],v[1])):(v=u(c,g),l.point(v[0],v[1]),l.lineEnd()),c=v;else if(i&&c&&n^y){var S;!(E&h)&&(S=u(g,c,!0))&&(m=0,n?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1])))}y&&(!c||!ba(c,g))&&l.point(g[0],g[1]),c=g,p=y,h=E},lineEnd:function(){p&&l.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function u(l,c,h){var p=is(l),d=is(c),m=[1,0,0],x=Ja(p,d),_=wa(x,x),g=x[0],v=_-g*g;if(!v)return!h&&l;var y=r*_/v,E=-r*g/v,S=Ja(m,x),C=Ia(m,y),N=Ia(x,E);Qu(C,N);var I=S,b=wa(C,I),M=wa(I,I),A=b*b-M*(wa(C,C)-1);if(!(A<0)){var D=hs(A),R=Ia(I,(-b-D)/M);if(Qu(R,C),R=Pf(R),!h)return R;var k=l[0],F=c[0],J=l[1],H=c[1],Q;F<k&&(Q=k,k=F,F=Q);var q=F-k,V=nr(q-te)<ge,U=V||q<ge;if(!V&&H<J&&(Q=J,J=H,H=Q),U?V?J+H>0^R[1]<(nr(R[0]-k)<ge?J:H):J<=R[1]&&R[1]<=H:q>te^(k<=R[0]&&R[0]<=F)){var ft=Ia(I,(-b+D)/M);return Qu(ft,C),[R,Pf(ft)]}}}function f(l,c){var h=n?e:te-e,p=0;return l<-h?p|=1:l>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return ov(s,a,o,n?[0,-e]:[-te,e-te])}function sv(e){return function(t){var r=new Of;for(var n in e)r[n]=e[n];return r.stream=t,r}}function Of(){}Of.prototype={constructor:Of,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function av(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Dx(r,e.stream(qh));var s=qh.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+t[0][0]+(n-a*(s[1][0]+s[0][0]))/2,f=+t[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([u,f])}function Kx(e,t,r){return av(e,[[0,0],t],r)}var Xh=16,Qx=Se(30*fn);function Uh(e,t){return+t?$x(e,t):Zx(e)}function Zx(e){return sv({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function $x(e,t){function r(n,i,o,s,a,u,f,l,c,h,p,d,m,x){var _=f-n,g=l-i,v=_*_+g*g;if(v>4*t&&m--){var y=s+h,E=a+p,S=u+d,C=hs(y*y+E*E+S*S),N=co(S/=C),I=nr(nr(S)-1)<ge||nr(o-c)<ge?(o+c)/2:ns(E,y),b=e(I,N),M=b[0],A=b[1],D=M-n,R=A-i,k=g*D-_*R;(k*k/v>t||nr((_*D+g*R)/v-.5)>.3||s*h+a*p+u*d<Qx)&&(r(n,i,o,s,a,u,M,A,I,y/=C,E/=C,S,m,x),x.point(M,A),r(M,A,I,y,E,S,f,l,c,h,p,d,m,x))}}return function(n){var i,o,s,a,u,f,l,c,h,p,d,m,x={point:_,lineStart:g,lineEnd:y,polygonStart:function(){n.polygonStart(),x.lineStart=E},polygonEnd:function(){n.polygonEnd(),x.lineStart=g}};function _(N,I){N=e(N,I),n.point(N[0],N[1])}function g(){c=NaN,x.point=v,n.lineStart()}function v(N,I){var b=is([N,I]),M=e(N,I);r(c,h,l,p,d,m,c=M[0],h=M[1],l=N,p=b[0],d=b[1],m=b[2],Xh,n),n.point(c,h)}function y(){x.point=_,n.lineEnd()}function E(){g(),x.point=S,x.lineEnd=C}function S(N,I){v(i=N,I),o=c,s=h,a=p,u=d,f=m,x.point=v}function C(){r(c,h,l,p,d,m,o,s,i,a,u,f,Xh,n),x.lineEnd=y,y()}return x}}var jx=sv({point:function(e,t){this.stream.point(e*fn,t*fn)}});function tw(e){return ew(function(){return e})()}function ew(e){var t,r=150,n=480,i=250,o,s,a=0,u=0,f=0,l=0,c=0,h,p,d=null,m=zh,x=null,_,g,v,y=kh,E=.5,S=Uh(M,E),C,N;function I(R){return R=p(R[0]*fn,R[1]*fn),[R[0]*r+o,s-R[1]*r]}function b(R){return R=p.invert((R[0]-o)/r,(s-R[1])/r),R&&[R[0]*Si,R[1]*Si]}function M(R,k){return R=t(R,k),[R[0]*r+o,s-R[1]*r]}I.stream=function(R){return C&&N===R?C:C=jx(m(h,S(y(N=R))))},I.clipAngle=function(R){return arguments.length?(m=+R?Jx(d=R*fn,6*fn):(d=null,zh),D()):d*Si},I.clipExtent=function(R){return arguments.length?(y=R==null?(x=_=g=v=null,kh):qx(x=+R[0][0],_=+R[0][1],g=+R[1][0],v=+R[1][1]),D()):x==null?null:[[x,_],[g,v]]},I.scale=function(R){return arguments.length?(r=+R,A()):r},I.translate=function(R){return arguments.length?(n=+R[0],i=+R[1],A()):[n,i]},I.center=function(R){return arguments.length?(a=R[0]%360*fn,u=R[1]%360*fn,A()):[a*Si,u*Si]},I.rotate=function(R){return arguments.length?(f=R[0]%360*fn,l=R[1]%360*fn,c=R.length>2?R[2]%360*fn:0,A()):[f*Si,l*Si,c*Si]},I.precision=function(R){return arguments.length?(S=Uh(M,E=R*R),D()):hs(E)},I.fitExtent=function(R,k){return av(I,R,k)},I.fitSize=function(R,k){return Kx(I,R,k)};function A(){p=tv(h=Tx(f,l,c),t);var R=t(a,u);return o=n-R[0]*r,s=i+R[1]*r,D()}function D(){return C=N=null,I}return function(){return t=e.apply(this,arguments),I.invert=t.invert&&b,A()}}function uv(e){return function(t,r){var n=Se(t),i=Se(r),o=e(n*i);return[o*i*Ne(t),o*Ne(r)]}}function fv(e){return function(t,r){var n=hs(t*t+r*r),i=e(n),o=Ne(i),s=Se(i);return[ns(t*o,n*s),co(n&&r*o/n)]}}var rw=uv(function(e){return hs(2/(1+e))});rw.invert=fv(function(e){return 2*co(e/2)});var lv=uv(function(e){return(e=jg(e))&&e/Ne(e)});lv.invert=fv(function(e){return e});function nw(){return tw(lv).scale(79.4188).clipAngle(180-.001)}function Yh(e,t){return[e,t]}Yh.invert=Yh;function fI(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Zr(e,function(s){var a=Ra(s,t,n,i);a&&o.push(a)}),nt(o);case"FeatureCollection":return Qt(e,function(s){var a=Ra(s,t,n,i);a&&Qt(a,function(u){u&&o.push(u)})}),nt(o)}return Ra(e,t,n,i)}function Ra(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var s=[];return Zr(e,function(m){var x=Ra(m,t,r,n);x&&s.push(x)}),nt(s)}var a=iw(o),u={type:o.type,coordinates:hv(o.coordinates,a)},f=new ml,l=f.read(u),c=eu(ra(t,r),"meters"),h=Be.bufferOp(l,c,n),p=new Tg;if(h=p.write(h),!cv(h.coordinates)){var d={type:h.type,coordinates:pv(h.coordinates,a)};return qe(d,i)}}function cv(e){return Array.isArray(e[0])?cv(e[0]):isNaN(e[0])}function hv(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return hv(r,t)})}function pv(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return pv(r,t)})}function iw(e){var t=kf(e).geometry.coordinates,r=[-t[0],-t[1]];return nw().rotate(r).scale(Ye)}function lI(e,t,r){r===void 0&&(r={});var n=fe(e),i=fe(t),o=fi.union(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?dt(o[0],r.properties):Qr(o,r.properties)}function Za(e,t,r){r===void 0&&(r={});var n=fe(e),i=fe(t),o=fi.intersection(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?dt(o[0],r.properties):Qr(o,r.properties)}function cI(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.propertyName;Xi(e,"Polygon","dissolve");var n=[];if(t.propertyName){var i={};Qt(e,function(u){Object.prototype.hasOwnProperty.call(i,u.properties[r])||(i[u.properties[r]]=[]),i[u.properties[r]].push(u)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=Qr(fi.union.apply(null,i[o[s]].map(function(u){return u.geometry.coordinates})));a.properties[r]=o[s],n.push(a)}}else return ec(Qr(fi.union.apply(null,e.features.map(function(u){return u.geometry.coordinates}))));return ec(nt(n))}function ow(e,t,r){r===void 0&&(r={});var n=JSON.stringify(r.properties||{}),i=e[0],o=e[1],s=e[2],a=e[3],u=(o+a)/2,f=(i+s)/2,l=t*2/ee([i,u],[s,u],r),c=l*(s-i),h=t*2/ee([f,o],[f,a],r),p=h*(a-o),d=c/2,m=d*2,x=Math.sqrt(3)/2*p,_=s-i,g=a-o,v=3/4*m,y=x,E=(_-m)/(m-d/2),S=Math.floor(E),C=(S*v-d/2-_)/2-d/2+v/2,N=Math.floor((g-x)/x),I=(g-N*x)/2,b=N*x-g>x/2;b&&(I-=x/4);for(var M=[],A=[],D=0;D<6;D++){var R=2*Math.PI/6*D;M.push(Math.cos(R)),A.push(Math.sin(R))}for(var k=[],F=0;F<=S;F++)for(var J=0;J<=N;J++){var H=F%2===1;if(!(J===0&&H)&&!(J===0&&b)){var Q=F*v+i-C,q=J*y+o+I;if(H&&(q-=x/2),r.triangles===!0)aw([Q,q],c/2,p/2,JSON.parse(n),M,A).forEach(function(U){r.mask?Za(r.mask,U)&&k.push(U):k.push(U)});else{var V=sw([Q,q],c/2,p/2,JSON.parse(n),M,A);r.mask?Za(r.mask,V)&&k.push(V):k.push(V)}}}return nt(k)}function sw(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=e[0]+t*i[a],f=e[1]+r*o[a];s.push([u,f])}return s.push(s[0].slice()),dt([s],n)}function aw(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(e),u.push([e[0]+t*i[a],e[1]+r*o[a]]),u.push([e[0]+t*i[(a+1)%6],e[1]+r*o[(a+1)%6]]),u.push(e),s.push(dt([u],n))}return s}function hI(e,t){var r=fw(t),n=null;return e.type==="FeatureCollection"?n=uw(e):n=gv(fi.union(e.geometry.coordinates)),n.geometry.coordinates.forEach(function(i){r.geometry.coordinates.push(i[0])}),r}function uw(e){var t=e.features.length===2?fi.union(e.features[0].geometry.coordinates,e.features[1].geometry.coordinates):fi.union.apply(fi,e.features.map(function(r){return r.geometry.coordinates}));return gv(t)}function gv(e){return Qr(e)}function fw(e){var t=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],r=e&&e.geometry.coordinates||t;return dt(r)}function lw(e,t,r,n){n===void 0&&(n={});for(var i=[],o=e[0],s=e[1],a=e[2],u=e[3],f=t/ee([o,s],[a,s],n),l=f*(a-o),c=r/ee([o,s],[o,u],n),h=c*(u-s),p=a-o,d=u-s,m=Math.floor(p/l),x=Math.floor(d/h),_=(p-m*l)/2,g=(d-x*h)/2,v=o+_,y=0;y<m;y++){for(var E=s+g,S=0;S<x;S++){var C=dt([[[v,E],[v,E+h],[v+l,E+h],[v+l,E],[v,E]]],n.properties);n.mask?Y_(n.mask,C)&&i.push(C):i.push(C),E+=h}v+=l}return nt(i)}function cw(e,t,r){return r===void 0&&(r={}),lw(e,t,t,r)}function hw(e,t,r){r===void 0&&(r={});for(var n=[],i=t/ee([e[0],e[1]],[e[2],e[1]],r),o=i*(e[2]-e[0]),s=t/ee([e[0],e[1]],[e[0],e[3]],r),a=s*(e[3]-e[1]),u=0,f=e[0];f<=e[2];){for(var l=0,c=e[1];c<=e[3];){var h=null,p=null;u%2===0&&l%2===0?(h=dt([[[f,c],[f,c+a],[f+o,c],[f,c]]],r.properties),p=dt([[[f,c+a],[f+o,c+a],[f+o,c],[f,c+a]]],r.properties)):u%2===0&&l%2===1?(h=dt([[[f,c],[f+o,c+a],[f+o,c],[f,c]]],r.properties),p=dt([[[f,c],[f,c+a],[f+o,c+a],[f,c]]],r.properties)):l%2===0&&u%2===1?(h=dt([[[f,c],[f,c+a],[f+o,c+a],[f,c]]],r.properties),p=dt([[[f,c],[f+o,c+a],[f+o,c],[f,c]]],r.properties)):l%2===1&&u%2===1&&(h=dt([[[f,c],[f,c+a],[f+o,c],[f,c]]],r.properties),p=dt([[[f,c+a],[f+o,c+a],[f+o,c],[f,c+a]]],r.properties)),r.mask?(Za(r.mask,h)&&n.push(h),Za(r.mask,p)&&n.push(p)):(n.push(h),n.push(p)),c+=a,l++}u++,f+=o}return nt(n)}function pI(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!e)throw new Error("points is required");if(Xi(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(o!==void 0&&typeof o!="number")throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s=Oe(e),a;switch(n){case"point":case"points":a=l0(s,t,r);break;case"square":case"squares":a=cw(s,t,r);break;case"hex":case"hexes":a=ow(s,t,r);break;case"triangle":case"triangles":a=hw(s,t,r);break;default:throw new Error("invalid gridType")}var u=[];return Qt(a,function(f){var l=0,c=0;Qt(e,function(p){var d=n==="point"?f:Zi(f),m=ee(d,p,r),x;if(i!==void 0&&(x=p.properties[i]),x===void 0&&(x=p.geometry.coordinates[2]),x===void 0)throw new Error("zValue is missing");m===0&&(l=x);var _=1/Math.pow(m,o);c+=_,l+=_*x});var h=vr(f);h.properties[i]=l/c,u.push(h)}),nt(u)}export{Ow as along,rI as angle,fl as applyFilter,Ip as area,$u as areaFactors,Oe as bbox,Bw as bboxClip,pp as bboxPolygon,bi as bearing,Os as bearingToAngle,Os as bearingToAzimuth,Ew as bezier,Ew as bezierSpline,df as booleanClockwise,Vw as booleanContains,Hw as booleanCrosses,N_ as booleanDisjoint,Jw as booleanEqual,Y_ as booleanIntersects,Ww as booleanOverlap,Zw as booleanParallel,ce as booleanPointInPolygon,Wr as booleanPointOnLine,e0 as booleanWithin,fI as buffer,kf as center,yg as centerMean,tI as centerMedian,yy as centerOfMass,Zi as centroid,gp as circle,To as cleanCoords,vr as clone,wg as clusterEach,VE as clusterReduce,aI as clusters,Kw as clustersDbscan,Qw as clustersKmeans,yw as collect,Xi as collectionOf,Cw as combine,dw as concave,tp as containsNumber,Sv as convertArea,na as convertDistance,na as convertLength,dd as convex,bs as coordAll,Le as coordEach,Wh as coordReduce,Ig as createBins,tr as degrees2radians,tr as degreesToRadians,hi as destination,uI as difference,cI as dissolve,ee as distance,Hh as distanceToDegrees,ra as distanceToRadians,RE as distanceWeight,Ye as earthRadius,ME as ellipse,gy as envelope,qf as explode,bf as factors,qe as feature,nt as featureCollection,Qt as featureEach,Aa as featureOf,Kh as featureReduce,HE as filterProperties,Rv as findPoint,bv as findSegment,ec as flatten,or as flattenEach,Ov as flattenReduce,mw as flip,Tv as geojsonType,Zr as geomEach,Qh as geomReduce,Ev as geometry,Vh as geometryCollection,YE as getCluster,se as getCoord,ot as getCoords,fe as getGeom,Gr as getType,Dw as greatCircle,Mv as helpers,ow as hexGrid,ce as inside,pI as interpolate,Za as intersect,gw as invariant,We as isNumber,re as isObject,zw as isobands,vw as isolines,Mw as kinks,$y as length,Hh as lengthToDegrees,ra as lengthToRadians,_0 as lineArc,Rw as lineChunk,$y as lineDistance,$h as lineEach,Ui as lineIntersect,Uw as lineOffset,l1 as lineOverlap,jh as lineReduce,Fo as lineSegment,bw as lineSlice,jy as lineSliceAlong,Tw as lineSplit,$t as lineString,Fw as lineStringToPolygon,Iv as lineStrings,Fw as lineToPolygon,hI as mask,Av as meta,Iw as midpoint,iI as moranIndex,ho as multiLineString,tu as multiPoint,Qr as multiPolygon,mp as nearest,mp as nearestPoint,Ji as nearestPointOnLine,Nw as nearestPointToLine,Pw as planepoint,pt as point,l0 as pointGrid,Lw as pointOnFeature,Ji as pointOnLine,Lw as pointOnSurface,Hy as pointToLineDistance,xv as points,md as pointsWithinPolygon,dt as polygon,nI as polygonSmooth,kw as polygonTangents,uf as polygonToLine,uf as polygonToLineString,Yw as polygonize,wv as polygons,oI as projection,Jh as propEach,Lv as propReduce,Cg as propertiesContainsFilter,Do as radians2degrees,Do as radiansToDegrees,eu as radiansToDistance,eu as radiansToLength,sI as random,qE as randomLineString,GE as randomPoint,kE as randomPolygon,hu as randomPosition,qw as rewind,Go as rhumbBearing,Gs as rhumbDestination,Uf as rhumbDistance,Cv as round,ww as sample,Gw as sector,Pi as segmentEach,Zh as segmentReduce,$w as shortestPath,_w as simplify,vy as square,cw as squareGrid,eI as standardDeviationalEllipse,xw as tag,Sw as tesselate,_d as tin,DE as toMercator,TE as toWgs84,u_ as transformRotate,f_ as transformScale,Xw as transformTranslate,hw as triangleGrid,c0 as truncate,lI as union,_v as unitsFactors,Aw as unkinkPolygon,Nv as validateBBox,Pv as validateId,jw as voronoi,md as within};
